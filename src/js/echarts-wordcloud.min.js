(function webpackUniversalModuleDefinition(root,factory){if(typeof exports==='object'&&typeof module==='object')module.exports=factory(require("echarts"));else if(typeof define==='function'&&define.amd)define(["echarts"],factory);else if(typeof exports==='object')exports["echarts-wordcloud"]=factory(require("echarts"));else root["echarts-wordcloud"]=factory(root["echarts"])})(this,function(__WEBPACK_EXTERNAL_MODULE_7__){return(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module['default']}:function getModuleExports(){return module};__webpack_require__.d(getter,'a',getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=25)})([(function(module,exports){var BUILTIN_OBJECT={'[object Function]':1,'[object RegExp]':1,'[object Date]':1,'[object Error]':1,'[object CanvasGradient]':1,'[object CanvasPattern]':1,'[object Image]':1,'[object Canvas]':1};var TYPED_ARRAY={'[object Int8Array]':1,'[object Uint8Array]':1,'[object Uint8ClampedArray]':1,'[object Int16Array]':1,'[object Uint16Array]':1,'[object Int32Array]':1,'[object Uint32Array]':1,'[object Float32Array]':1,'[object Float64Array]':1};var objToString=Object.prototype.toString;var arrayProto=Array.prototype;var nativeForEach=arrayProto.forEach;var nativeFilter=arrayProto.filter;var nativeSlice=arrayProto.slice;var nativeMap=arrayProto.map;var nativeReduce=arrayProto.reduce;function clone(source){if(source==null||typeof source!='object'){return source}var result=source;var typeStr=objToString.call(source);if(typeStr==='[object Array]'){result=[];for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}else if(TYPED_ARRAY[typeStr]){var Ctor=source.constructor;if(source.constructor.from){result=Ctor.from(source)}else{result=new Ctor(source.length);for(var i=0,len=source.length;i<len;i++){result[i]=clone(source[i])}}}else if(!BUILTIN_OBJECT[typeStr]&&!isPrimitive(source)&&!isDom(source)){result={};for(var key in source){if(source.hasOwnProperty(key)){result[key]=clone(source[key])}}}return result}function merge(target,source,overwrite){if(!isObject(source)||!isObject(target)){return overwrite?clone(source):target}for(var key in source){if(source.hasOwnProperty(key)){var targetProp=target[key];var sourceProp=source[key];if(isObject(sourceProp)&&isObject(targetProp)&&!isArray(sourceProp)&&!isArray(targetProp)&&!isDom(sourceProp)&&!isDom(targetProp)&&!isBuiltInObject(sourceProp)&&!isBuiltInObject(targetProp)&&!isPrimitive(sourceProp)&&!isPrimitive(targetProp)){merge(targetProp,sourceProp,overwrite)}else if(overwrite||!(key in target)){target[key]=clone(source[key],true)}}}return target}function mergeAll(targetAndSources,overwrite){var result=targetAndSources[0];for(var i=1,len=targetAndSources.length;i<len;i++){result=merge(result,targetAndSources[i],overwrite)}return result}function extend(target,source){for(var key in source){if(source.hasOwnProperty(key)){target[key]=source[key]}}return target}function defaults(target,source,overlay){for(var key in source){if(source.hasOwnProperty(key)&&(overlay?source[key]!=null:target[key]==null)){target[key]=source[key]}}return target}function createCanvas(){return document.createElement('canvas')}var _ctx;function getContext(){if(!_ctx){_ctx=util.createCanvas().getContext('2d')}return _ctx}function indexOf(array,value){if(array){if(array.indexOf){return array.indexOf(value)}for(var i=0,len=array.length;i<len;i++){if(array[i]===value){return i}}}return-1}function inherits(clazz,baseClazz){var clazzPrototype=clazz.prototype;function F(){}F.prototype=baseClazz.prototype;clazz.prototype=new F();for(var prop in clazzPrototype){clazz.prototype[prop]=clazzPrototype[prop]}clazz.prototype.constructor=clazz;clazz.superClass=baseClazz}function mixin(target,source,overlay){target='prototype'in target?target.prototype:target;source='prototype'in source?source.prototype:source;defaults(target,source,overlay)}function isArrayLike(data){if(!data){return}if(typeof data=='string'){return false}return typeof data.length=='number'}function each(obj,cb,context){if(!(obj&&cb)){return}if(obj.forEach&&obj.forEach===nativeForEach){obj.forEach(cb,context)}else if(obj.length===+obj.length){for(var i=0,len=obj.length;i<len;i++){cb.call(context,obj[i],i,obj)}}else{for(var key in obj){if(obj.hasOwnProperty(key)){cb.call(context,obj[key],key,obj)}}}}function map(obj,cb,context){if(!(obj&&cb)){return}if(obj.map&&obj.map===nativeMap){return obj.map(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){result.push(cb.call(context,obj[i],i,obj))}return result}}function reduce(obj,cb,memo,context){if(!(obj&&cb)){return}if(obj.reduce&&obj.reduce===nativeReduce){return obj.reduce(cb,memo,context)}else{for(var i=0,len=obj.length;i<len;i++){memo=cb.call(context,memo,obj[i],i,obj)}return memo}}function filter(obj,cb,context){if(!(obj&&cb)){return}if(obj.filter&&obj.filter===nativeFilter){return obj.filter(cb,context)}else{var result=[];for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){result.push(obj[i])}}return result}}function find(obj,cb,context){if(!(obj&&cb)){return}for(var i=0,len=obj.length;i<len;i++){if(cb.call(context,obj[i],i,obj)){return obj[i]}}}function bind(func,context){var args=nativeSlice.call(arguments,2);return function(){return func.apply(context,args.concat(nativeSlice.call(arguments)))}}function curry(func){var args=nativeSlice.call(arguments,1);return function(){return func.apply(this,args.concat(nativeSlice.call(arguments)))}}function isArray(value){return objToString.call(value)==='[object Array]'}function isFunction(value){return typeof value==='function'}function isString(value){return objToString.call(value)==='[object String]'}function isObject(value){var type=typeof value;return type==='function'||(!!value&&type=='object')}function isBuiltInObject(value){return!!BUILTIN_OBJECT[objToString.call(value)]}function isDom(value){return typeof value==='object'&&typeof value.nodeType==='number'&&typeof value.ownerDocument==='object'}function eqNaN(value){return value!==value}function retrieve(values){for(var i=0,len=arguments.length;i<len;i++){if(arguments[i]!=null){return arguments[i]}}}function retrieve2(value0,value1){return value0!=null?value0:value1}function retrieve3(value0,value1,value2){return value0!=null?value0:value1!=null?value1:value2}function slice(){return Function.call.apply(nativeSlice,arguments)}function normalizeCssArray(val){if(typeof(val)==='number'){return[val,val,val,val]}var len=val.length;if(len===2){return[val[0],val[1],val[0],val[1]]}else if(len===3){return[val[0],val[1],val[2],val[1]]}return val}function assert(condition,message){if(!condition){throw new Error(message);}}var primitiveKey='__ec_primitive__';function setAsPrimitive(obj){obj[primitiveKey]=true}function isPrimitive(obj){return obj[primitiveKey]}function HashMap(obj){obj&&each(obj,function(value,key){this.set(key,value)},this)}var HASH_MAP_PREFIX='_ec_';var HASH_MAP_PREFIX_LENGTH=4;HashMap.prototype={constructor:HashMap,get:function(key){return this[HASH_MAP_PREFIX+key]},set:function(key,value){this[HASH_MAP_PREFIX+key]=value;return value},each:function(cb,context){context!==void 0&&(cb=bind(cb,context));for(var prefixedKey in this){this.hasOwnProperty(prefixedKey)&&cb(this[prefixedKey],prefixedKey.slice(HASH_MAP_PREFIX_LENGTH))}},removeKey:function(key){delete this[HASH_MAP_PREFIX+key]}};function createHashMap(obj){return new HashMap(obj)}var util={inherits:inherits,mixin:mixin,clone:clone,merge:merge,mergeAll:mergeAll,extend:extend,defaults:defaults,getContext:getContext,createCanvas:createCanvas,indexOf:indexOf,slice:slice,find:find,isArrayLike:isArrayLike,each:each,map:map,reduce:reduce,filter:filter,bind:bind,curry:curry,isArray:isArray,isString:isString,isObject:isObject,isFunction:isFunction,isBuiltInObject:isBuiltInObject,isDom:isDom,eqNaN:eqNaN,retrieve:retrieve,retrieve2:retrieve2,retrieve3:retrieve3,assert:assert,setAsPrimitive:setAsPrimitive,createHashMap:createHashMap,normalizeCssArray:normalizeCssArray,noop:function(){}};module.exports=util}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(12);var zrUtil=__webpack_require__(0);var PathProxy=__webpack_require__(6);var pathContain=__webpack_require__(48);var Pattern=__webpack_require__(54);var getCanvasPattern=Pattern.prototype.getCanvasPattern;var abs=Math.abs;var pathProxyForDraw=new PathProxy(true);function Path(opts){Displayable.call(this,opts);this.path=null}Path.prototype={constructor:Path,type:'path',__dirtyPath:true,strokeContainThreshold:5,brush:function(ctx,prevEl){var style=this.style;var path=this.path||pathProxyForDraw;var hasStroke=style.hasStroke();var hasFill=style.hasFill();var fill=style.fill;var stroke=style.stroke;var hasFillGradient=hasFill&&!!(fill.colorStops);var hasStrokeGradient=hasStroke&&!!(stroke.colorStops);var hasFillPattern=hasFill&&!!(fill.image);var hasStrokePattern=hasStroke&&!!(stroke.image);style.bind(ctx,this,prevEl);this.setTransform(ctx);if(this.__dirty){var rect;if(hasFillGradient){rect=rect||this.getBoundingRect();this._fillGradient=style.getGradient(ctx,fill,rect)}if(hasStrokeGradient){rect=rect||this.getBoundingRect();this._strokeGradient=style.getGradient(ctx,stroke,rect)}}if(hasFillGradient){ctx.fillStyle=this._fillGradient}else if(hasFillPattern){ctx.fillStyle=getCanvasPattern.call(fill,ctx)}if(hasStrokeGradient){ctx.strokeStyle=this._strokeGradient}else if(hasStrokePattern){ctx.strokeStyle=getCanvasPattern.call(stroke,ctx)}var lineDash=style.lineDash;var lineDashOffset=style.lineDashOffset;var ctxLineDash=!!ctx.setLineDash;var scale=this.getGlobalScale();path.setScale(scale[0],scale[1]);if(this.__dirtyPath||(lineDash&&!ctxLineDash&&hasStroke)){path.beginPath(ctx);if(lineDash&&!ctxLineDash){path.setLineDash(lineDash);path.setLineDashOffset(lineDashOffset)}this.buildPath(path,this.shape,false);if(this.path){this.__dirtyPath=false}}else{ctx.beginPath();this.path.rebuildPath(ctx)}hasFill&&path.fill(ctx);if(lineDash&&ctxLineDash){ctx.setLineDash(lineDash);ctx.lineDashOffset=lineDashOffset}hasStroke&&path.stroke(ctx);if(lineDash&&ctxLineDash){ctx.setLineDash([])}this.restoreTransform(ctx);if(style.text!=null){this.drawRectText(ctx,this.getBoundingRect())}},buildPath:function(ctx,shapeCfg,inBundle){},createPathProxy:function(){this.path=new PathProxy()},getBoundingRect:function(){var rect=this._rect;var style=this.style;var needsUpdateRect=!rect;if(needsUpdateRect){var path=this.path;if(!path){path=this.path=new PathProxy()}if(this.__dirtyPath){path.beginPath();this.buildPath(path,this.shape,false)}rect=path.getBoundingRect()}this._rect=rect;if(style.hasStroke()){var rectWithStroke=this._rectWithStroke||(this._rectWithStroke=rect.clone());if(this.__dirty||needsUpdateRect){rectWithStroke.copy(rect);var w=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(!style.hasFill()){w=Math.max(w,this.strokeContainThreshold||4)}if(lineScale>1e-10){rectWithStroke.width+=w/lineScale;rectWithStroke.height+=w/lineScale;rectWithStroke.x-=w/lineScale/2;rectWithStroke.y-=w/lineScale/2}}return rectWithStroke}return rect},contain:function(x,y){var localPos=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();var style=this.style;x=localPos[0];y=localPos[1];if(rect.contain(x,y)){var pathData=this.path.data;if(style.hasStroke()){var lineWidth=style.lineWidth;var lineScale=style.strokeNoScale?this.getLineScale():1;if(lineScale>1e-10){if(!style.hasFill()){lineWidth=Math.max(lineWidth,this.strokeContainThreshold)}if(pathContain.containStroke(pathData,lineWidth/lineScale,x,y)){return true}}}if(style.hasFill()){return pathContain.contain(pathData,x,y)}}return false},dirty:function(dirtyPath){if(dirtyPath==null){dirtyPath=true}if(dirtyPath){this.__dirtyPath=dirtyPath;this._rect=null}this.__dirty=true;this.__zr&&this.__zr.refresh();if(this.__clipTarget){this.__clipTarget.dirty()}},animateShape:function(loop){return this.animate('shape',loop)},attrKV:function(key,value){if(key==='shape'){this.setShape(value);this.__dirtyPath=true;this._rect=null}else{Displayable.prototype.attrKV.call(this,key,value)}},setShape:function(key,value){var shape=this.shape;if(shape){if(zrUtil.isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){shape[name]=key[name]}}}else{shape[key]=value}this.dirty(true)}return this},getLineScale:function(){var m=this.transform;return m&&abs(m[0]-1)>1e-10&&abs(m[3]-1)>1e-10?Math.sqrt(abs(m[0]*m[3]-m[2]*m[1])):1}};Path.extend=function(defaults){var Sub=function(opts){Path.call(this,opts);if(defaults.style){this.style.extendFrom(defaults.style,false)}var defaultShape=defaults.shape;if(defaultShape){this.shape=this.shape||{};var thisShape=this.shape;for(var name in defaultShape){if(!thisShape.hasOwnProperty(name)&&defaultShape.hasOwnProperty(name)){thisShape[name]=defaultShape[name]}}}defaults.init&&defaults.init.call(this,opts)};zrUtil.inherits(Sub,Path);for(var name in defaults){if(name!=='style'&&name!=='shape'){Sub.prototype[name]=defaults[name]}}return Sub};zrUtil.inherits(Path,Displayable);module.exports=Path}),(function(module,exports){var ArrayCtor=typeof Float32Array==='undefined'?Array:Float32Array;var vector={create:function(x,y){var out=new ArrayCtor(2);if(x==null){x=0}if(y==null){y=0}out[0]=x;out[1]=y;return out},copy:function(out,v){out[0]=v[0];out[1]=v[1];return out},clone:function(v){var out=new ArrayCtor(2);out[0]=v[0];out[1]=v[1];return out},set:function(out,a,b){out[0]=a;out[1]=b;return out},add:function(out,v1,v2){out[0]=v1[0]+v2[0];out[1]=v1[1]+v2[1];return out},scaleAndAdd:function(out,v1,v2,a){out[0]=v1[0]+v2[0]*a;out[1]=v1[1]+v2[1]*a;return out},sub:function(out,v1,v2){out[0]=v1[0]-v2[0];out[1]=v1[1]-v2[1];return out},len:function(v){return Math.sqrt(this.lenSquare(v))},lenSquare:function(v){return v[0]*v[0]+v[1]*v[1]},mul:function(out,v1,v2){out[0]=v1[0]*v2[0];out[1]=v1[1]*v2[1];return out},div:function(out,v1,v2){out[0]=v1[0]/v2[0];out[1]=v1[1]/v2[1];return out},dot:function(v1,v2){return v1[0]*v2[0]+v1[1]*v2[1]},scale:function(out,v,s){out[0]=v[0]*s;out[1]=v[1]*s;return out},normalize:function(out,v){var d=vector.len(v);if(d===0){out[0]=0;out[1]=0}else{out[0]=v[0]/d;out[1]=v[1]/d}return out},distance:function(v1,v2){return Math.sqrt((v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1]))},distanceSquare:function(v1,v2){return(v1[0]-v2[0])*(v1[0]-v2[0])+(v1[1]-v2[1])*(v1[1]-v2[1])},negate:function(out,v){out[0]=-v[0];out[1]=-v[1];return out},lerp:function(out,v1,v2,t){out[0]=v1[0]+t*(v2[0]-v1[0]);out[1]=v1[1]+t*(v2[1]-v1[1]);return out},applyTransform:function(out,v,m){var x=v[0];var y=v[1];out[0]=m[0]*x+m[2]*y+m[4];out[1]=m[1]*x+m[3]*y+m[5];return out},min:function(out,v1,v2){out[0]=Math.min(v1[0],v2[0]);out[1]=Math.min(v1[1],v2[1]);return out},max:function(out,v1,v2){out[0]=Math.max(v1[0],v2[0]);out[1]=Math.max(v1[1],v2[1]);return out}};vector.length=vector.len;vector.lengthSquare=vector.lenSquare;vector.dist=vector.distance;vector.distSquare=vector.distanceSquare;module.exports=vector}),(function(module,exports,__webpack_require__){"use strict";var vec2=__webpack_require__(2);var matrix=__webpack_require__(8);var v2ApplyTransform=vec2.applyTransform;var mathMin=Math.min;var mathMax=Math.max;function BoundingRect(x,y,width,height){if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}this.x=x;this.y=y;this.width=width;this.height=height}BoundingRect.prototype={constructor:BoundingRect,union:function(other){var x=mathMin(other.x,this.x);var y=mathMin(other.y,this.y);this.width=mathMax(other.x+other.width,this.x+this.width)-x;this.height=mathMax(other.y+other.height,this.y+this.height)-y;this.x=x;this.y=y},applyTransform:(function(){var lt=[];var rb=[];var lb=[];var rt=[];return function(m){if(!m){return}lt[0]=lb[0]=this.x;lt[1]=rt[1]=this.y;rb[0]=rt[0]=this.x+this.width;rb[1]=lb[1]=this.y+this.height;v2ApplyTransform(lt,lt,m);v2ApplyTransform(rb,rb,m);v2ApplyTransform(lb,lb,m);v2ApplyTransform(rt,rt,m);this.x=mathMin(lt[0],rb[0],lb[0],rt[0]);this.y=mathMin(lt[1],rb[1],lb[1],rt[1]);var maxX=mathMax(lt[0],rb[0],lb[0],rt[0]);var maxY=mathMax(lt[1],rb[1],lb[1],rt[1]);this.width=maxX-this.x;this.height=maxY-this.y}})(),calculateTransform:function(b){var a=this;var sx=b.width/a.width;var sy=b.height/a.height;var m=matrix.create();matrix.translate(m,m,[-a.x,-a.y]);matrix.scale(m,m,[sx,sy]);matrix.translate(m,m,[b.x,b.y]);return m},intersect:function(b){if(!b){return false}if(!(b instanceof BoundingRect)){b=BoundingRect.create(b)}var a=this;var ax0=a.x;var ax1=a.x+a.width;var ay0=a.y;var ay1=a.y+a.height;var bx0=b.x;var bx1=b.x+b.width;var by0=b.y;var by1=b.y+b.height;return!(ax1<bx0||bx1<ax0||ay1<by0||by1<ay0)},contain:function(x,y){var rect=this;return x>=rect.x&&x<=(rect.x+rect.width)&&y>=rect.y&&y<=(rect.y+rect.height)},clone:function(){return new BoundingRect(this.x,this.y,this.width,this.height)},copy:function(other){this.x=other.x;this.y=other.y;this.width=other.width;this.height=other.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}};BoundingRect.create=function(rect){return new BoundingRect(rect.x,rect.y,rect.width,rect.height)};module.exports=BoundingRect}),(function(module,exports,__webpack_require__){"use strict";var vec2=__webpack_require__(2);var v2Create=vec2.create;var v2DistSquare=vec2.distSquare;var mathPow=Math.pow;var mathSqrt=Math.sqrt;var EPSILON=1e-8;var EPSILON_NUMERIC=1e-4;var THREE_SQRT=mathSqrt(3);var ONE_THIRD=1/3;var _v0=v2Create();var _v1=v2Create();var _v2=v2Create();function isAroundZero(val){return val>-EPSILON&&val<EPSILON}function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}function cubicAt(p0,p1,p2,p3,t){var onet=1-t;return onet*onet*(onet*p0+3*t*p1)+t*t*(t*p3+3*onet*p2)}function cubicDerivativeAt(p0,p1,p2,p3,t){var onet=1-t;return 3*(((p1-p0)*onet+2*(p2-p1)*t)*onet+(p3-p2)*t*t)}function cubicRootAt(p0,p1,p2,p3,val,roots){var a=p3+3*(p1-p2)-p0;var b=3*(p2-p1*2+p0);var c=3*(p1-p0);var d=p0-val;var A=b*b-3*a*c;var B=b*c-9*a*d;var C=c*c-3*b*d;var n=0;if(isAroundZero(A)&&isAroundZero(B)){if(isAroundZero(b)){roots[0]=0}else{var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=B*B-4*A*C;if(isAroundZero(disc)){var K=B/A;var t1=-b/a+K;var t2=-K/2;if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}else if(disc>0){var discSqrt=mathSqrt(disc);var Y1=A*b+1.5*a*(-B+discSqrt);var Y2=A*b+1.5*a*(-B-discSqrt);if(Y1<0){Y1=-mathPow(-Y1,ONE_THIRD)}else{Y1=mathPow(Y1,ONE_THIRD)}if(Y2<0){Y2=-mathPow(-Y2,ONE_THIRD)}else{Y2=mathPow(Y2,ONE_THIRD)}var t1=(-b-(Y1+Y2))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else{var T=(2*A*b-3*a*B)/(2*mathSqrt(A*A*A));var theta=Math.acos(T)/3;var ASqrt=mathSqrt(A);var tmp=Math.cos(theta);var t1=(-b-2*ASqrt*tmp)/(3*a);var t2=(-b+ASqrt*(tmp+THREE_SQRT*Math.sin(theta)))/(3*a);var t3=(-b+ASqrt*(tmp-THREE_SQRT*Math.sin(theta)))/(3*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}if(t3>=0&&t3<=1){roots[n++]=t3}}}return n}function cubicExtrema(p0,p1,p2,p3,extrema){var b=6*p2-12*p1+6*p0;var a=9*p1+3*p3-3*p0-9*p2;var c=3*p1-3*p0;var n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;if(t1>=0&&t1<=1){extrema[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){extrema[0]=-b/(2*a)}else if(disc>0){var discSqrt=mathSqrt(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){extrema[n++]=t1}if(t2>=0&&t2<=1){extrema[n++]=t2}}}return n}function cubicSubdivide(p0,p1,p2,p3,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p23=(p3-p2)*t+p2;var p012=(p12-p01)*t+p01;var p123=(p23-p12)*t+p12;var p0123=(p123-p012)*t+p012;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p0123;out[4]=p0123;out[5]=p123;out[6]=p23;out[7]=p3}function cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,out){var t;var interval=0.005;var d=Infinity;var prev;var next;var d1;var d2;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=cubicAt(x0,x1,x2,x3,_t);_v1[1]=cubicAt(y0,y1,y2,y3,_t);d1=v2DistSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}prev=t-interval;next=t+interval;_v1[0]=cubicAt(x0,x1,x2,x3,prev);_v1[1]=cubicAt(y0,y1,y2,y3,prev);d1=v2DistSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=cubicAt(x0,x1,x2,x3,next);_v2[1]=cubicAt(y0,y1,y2,y3,next);d2=v2DistSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=cubicAt(x0,x1,x2,x3,t);out[1]=cubicAt(y0,y1,y2,y3,t)}return mathSqrt(d)}function quadraticAt(p0,p1,p2,t){var onet=1-t;return onet*(onet*p0+2*t*p1)+t*t*p2}function quadraticDerivativeAt(p0,p1,p2,t){return 2*((1-t)*(p1-p0)+t*(p2-p1))}function quadraticRootAt(p0,p1,p2,val,roots){var a=p0-2*p1+p2;var b=2*(p1-p0);var c=p0-val;var n=0;if(isAroundZero(a)){if(isNotAroundZero(b)){var t1=-c/b;if(t1>=0&&t1<=1){roots[n++]=t1}}}else{var disc=b*b-4*a*c;if(isAroundZero(disc)){var t1=-b/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}}else if(disc>0){var discSqrt=mathSqrt(disc);var t1=(-b+discSqrt)/(2*a);var t2=(-b-discSqrt)/(2*a);if(t1>=0&&t1<=1){roots[n++]=t1}if(t2>=0&&t2<=1){roots[n++]=t2}}}return n}function quadraticExtremum(p0,p1,p2){var divider=p0+p2-2*p1;if(divider===0){return 0.5}else{return(p0-p1)/divider}}function quadraticSubdivide(p0,p1,p2,t,out){var p01=(p1-p0)*t+p0;var p12=(p2-p1)*t+p1;var p012=(p12-p01)*t+p01;out[0]=p0;out[1]=p01;out[2]=p012;out[3]=p012;out[4]=p12;out[5]=p2}function quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,out){var t;var interval=0.005;var d=Infinity;_v0[0]=x;_v0[1]=y;for(var _t=0;_t<1;_t+=0.05){_v1[0]=quadraticAt(x0,x1,x2,_t);_v1[1]=quadraticAt(y0,y1,y2,_t);var d1=v2DistSquare(_v0,_v1);if(d1<d){t=_t;d=d1}}d=Infinity;for(var i=0;i<32;i++){if(interval<EPSILON_NUMERIC){break}var prev=t-interval;var next=t+interval;_v1[0]=quadraticAt(x0,x1,x2,prev);_v1[1]=quadraticAt(y0,y1,y2,prev);var d1=v2DistSquare(_v1,_v0);if(prev>=0&&d1<d){t=prev;d=d1}else{_v2[0]=quadraticAt(x0,x1,x2,next);_v2[1]=quadraticAt(y0,y1,y2,next);var d2=v2DistSquare(_v2,_v0);if(next<=1&&d2<d){t=next;d=d2}else{interval*=0.5}}}if(out){out[0]=quadraticAt(x0,x1,x2,t);out[1]=quadraticAt(y0,y1,y2,t)}return mathSqrt(d)}module.exports={cubicAt:cubicAt,cubicDerivativeAt:cubicDerivativeAt,cubicRootAt:cubicRootAt,cubicExtrema:cubicExtrema,cubicSubdivide:cubicSubdivide,cubicProjectPoint:cubicProjectPoint,quadraticAt:quadraticAt,quadraticDerivativeAt:quadraticDerivativeAt,quadraticRootAt:quadraticRootAt,quadraticExtremum:quadraticExtremum,quadraticSubdivide:quadraticSubdivide,quadraticProjectPoint:quadraticProjectPoint}}),(function(module,exports,__webpack_require__){var util=__webpack_require__(0);var BoundingRect=__webpack_require__(3);var imageHelper=__webpack_require__(10);var textWidthCache={};var textWidthCacheCounter=0;var TEXT_CACHE_MAX=5000;var STYLE_REG=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;var DEFAULT_FONT='12px sans-serif';var retrieve2=util.retrieve2;var retrieve3=util.retrieve3;function getTextWidth(text,font){font=font||DEFAULT_FONT;var key=text+':'+font;if(textWidthCache[key]){return textWidthCache[key]}var textLines=(text+'').split('\n');var width=0;for(var i=0,l=textLines.length;i<l;i++){width=Math.max(textContain.measureText(textLines[i],font).width,width)}if(textWidthCacheCounter>TEXT_CACHE_MAX){textWidthCacheCounter=0;textWidthCache={}}textWidthCacheCounter++;textWidthCache[key]=width;return width}function getTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){return rich?getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate):getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,truncate)}function getPlainTextRect(text,font,textAlign,textVerticalAlign,textPadding,truncate){var contentBlock=parsePlainText(text,font,textPadding,truncate);var outerWidth=getTextWidth(text,font);if(textPadding){outerWidth+=textPadding[1]+textPadding[3]}var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);var rect=new BoundingRect(x,y,outerWidth,outerHeight);rect.lineHeight=contentBlock.lineHeight;return rect}function getRichTextRect(text,font,textAlign,textVerticalAlign,textPadding,rich,truncate){var contentBlock=parseRichText(text,{rich:rich,truncate:truncate,font:font,textAlign:textAlign,textPadding:textPadding});var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var x=adjustTextX(0,outerWidth,textAlign);var y=adjustTextY(0,outerHeight,textVerticalAlign);return new BoundingRect(x,y,outerWidth,outerHeight)}function adjustTextX(x,width,textAlign){if(textAlign==='right'){x-=width}else if(textAlign==='center'){x-=width/2}return x}function adjustTextY(y,height,textVerticalAlign){if(textVerticalAlign==='middle'){y-=height/2}else if(textVerticalAlign==='bottom'){y-=height}return y}function adjustTextPositionOnRect(textPosition,rect,distance){var x=rect.x;var y=rect.y;var height=rect.height;var width=rect.width;var halfHeight=height/2;var textAlign='left';var textVerticalAlign='top';switch(textPosition){case'left':x-=distance;y+=halfHeight;textAlign='right';textVerticalAlign='middle';break;case'right':x+=distance+width;y+=halfHeight;textVerticalAlign='middle';break;case'top':x+=width/2;y-=distance;textAlign='center';textVerticalAlign='bottom';break;case'bottom':x+=width/2;y+=height+distance;textAlign='center';break;case'inside':x+=width/2;y+=halfHeight;textAlign='center';textVerticalAlign='middle';break;case'insideLeft':x+=distance;y+=halfHeight;textVerticalAlign='middle';break;case'insideRight':x+=width-distance;y+=halfHeight;textAlign='right';textVerticalAlign='middle';break;case'insideTop':x+=width/2;y+=distance;textAlign='center';break;case'insideBottom':x+=width/2;y+=height-distance;textAlign='center';textVerticalAlign='bottom';break;case'insideTopLeft':x+=distance;y+=distance;break;case'insideTopRight':x+=width-distance;y+=distance;textAlign='right';break;case'insideBottomLeft':x+=distance;y+=height-distance;textVerticalAlign='bottom';break;case'insideBottomRight':x+=width-distance;y+=height-distance;textAlign='right';textVerticalAlign='bottom';break}return{x:x,y:y,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function truncateText(text,containerWidth,font,ellipsis,options){if(!containerWidth){return''}var textLines=(text+'').split('\n');options=prepareTruncateOptions(containerWidth,font,ellipsis,options);for(var i=0,len=textLines.length;i<len;i++){textLines[i]=truncateSingleLine(textLines[i],options)}return textLines.join('\n')}function prepareTruncateOptions(containerWidth,font,ellipsis,options){options=util.extend({},options);options.font=font;var ellipsis=retrieve2(ellipsis,'...');options.maxIterations=retrieve2(options.maxIterations,2);var minChar=options.minChar=retrieve2(options.minChar,0);options.cnCharWidth=getTextWidth('国',font);var ascCharWidth=options.ascCharWidth=getTextWidth('a',font);options.placeholder=retrieve2(options.placeholder,'');var contentWidth=containerWidth=Math.max(0,containerWidth-1);for(var i=0;i<minChar&&contentWidth>=ascCharWidth;i++){contentWidth-=ascCharWidth}var ellipsisWidth=getTextWidth(ellipsis);if(ellipsisWidth>contentWidth){ellipsis='';ellipsisWidth=0}contentWidth=containerWidth-ellipsisWidth;options.ellipsis=ellipsis;options.ellipsisWidth=ellipsisWidth;options.contentWidth=contentWidth;options.containerWidth=containerWidth;return options}function truncateSingleLine(textLine,options){var containerWidth=options.containerWidth;var font=options.font;var contentWidth=options.contentWidth;if(!containerWidth){return''}var lineWidth=getTextWidth(textLine,font);if(lineWidth<=containerWidth){return textLine}for(var j=0;;j++){if(lineWidth<=contentWidth||j>=options.maxIterations){textLine+=options.ellipsis;break}var subLength=j===0?estimateLength(textLine,contentWidth,options.ascCharWidth,options.cnCharWidth):lineWidth>0?Math.floor(textLine.length*contentWidth/lineWidth):0;textLine=textLine.substr(0,subLength);lineWidth=getTextWidth(textLine,font)}if(textLine===''){textLine=options.placeholder}return textLine}function estimateLength(text,contentWidth,ascCharWidth,cnCharWidth){var width=0;var i=0;for(var len=text.length;i<len&&width<contentWidth;i++){var charCode=text.charCodeAt(i);width+=(0<=charCode&&charCode<=127)?ascCharWidth:cnCharWidth}return i}function getLineHeight(font){return getTextWidth('国',font)}function measureText(text,font){var ctx=util.getContext();ctx.font=font||DEFAULT_FONT;return ctx.measureText(text)}function parsePlainText(text,font,padding,truncate){text!=null&&(text+='');var lineHeight=getLineHeight(font);var lines=text?text.split('\n'):[];var height=lines.length*lineHeight;var outerHeight=height;if(padding){outerHeight+=padding[0]+padding[2]}if(text&&truncate){var truncOuterHeight=truncate.outerHeight;var truncOuterWidth=truncate.outerWidth;if(truncOuterHeight!=null&&outerHeight>truncOuterHeight){text='';lines=[]}else if(truncOuterWidth!=null){var options=prepareTruncateOptions(truncOuterWidth-(padding?padding[1]+padding[3]:0),font,truncate.ellipsis,{minChar:truncate.minChar,placeholder:truncate.placeholder});for(var i=0,len=lines.length;i<len;i++){lines[i]=truncateSingleLine(lines[i],options)}}}return{lines:lines,height:height,outerHeight:outerHeight,lineHeight:lineHeight}}function parseRichText(text,style){var contentBlock={lines:[],width:0,height:0};text!=null&&(text+='');if(!text){return contentBlock}var lastIndex=STYLE_REG.lastIndex=0;var result;while((result=STYLE_REG.exec(text))!=null){var matchedIndex=result.index;if(matchedIndex>lastIndex){pushTokens(contentBlock,text.substring(lastIndex,matchedIndex))}pushTokens(contentBlock,result[2],result[1]);lastIndex=STYLE_REG.lastIndex}if(lastIndex<text.length){pushTokens(contentBlock,text.substring(lastIndex,text.length))}var lines=contentBlock.lines;var contentHeight=0;var contentWidth=0;var pendingList=[];var stlPadding=style.textPadding;var truncate=style.truncate;var truncateWidth=truncate&&truncate.outerWidth;var truncateHeight=truncate&&truncate.outerHeight;if(stlPadding){truncateWidth!=null&&(truncateWidth-=stlPadding[1]+stlPadding[3]);truncateHeight!=null&&(truncateHeight-=stlPadding[0]+stlPadding[2])}for(var i=0;i<lines.length;i++){var line=lines[i];var lineHeight=0;var lineWidth=0;for(var j=0;j<line.tokens.length;j++){var token=line.tokens[j];var tokenStyle=token.styleName&&style.rich[token.styleName]||{};var textPadding=token.textPadding=tokenStyle.textPadding;var font=token.font=tokenStyle.font||style.font;var tokenHeight=token.textHeight=retrieve2(tokenStyle.textHeight,textContain.getLineHeight(font));textPadding&&(tokenHeight+=textPadding[0]+textPadding[2]);token.height=tokenHeight;token.lineHeight=retrieve3(tokenStyle.textLineHeight,style.textLineHeight,tokenHeight);token.textAlign=tokenStyle&&tokenStyle.textAlign||style.textAlign;token.textVerticalAlign=tokenStyle&&tokenStyle.textVerticalAlign||'middle';if(truncateHeight!=null&&contentHeight+token.lineHeight>truncateHeight){return{lines:[],width:0,height:0}}token.textWidth=textContain.getWidth(token.text,font);var tokenWidth=tokenStyle.textWidth;var tokenWidthNotSpecified=tokenWidth==null||tokenWidth==='auto';if(typeof tokenWidth==='string'&&tokenWidth.charAt(tokenWidth.length-1)==='%'){token.percentWidth=tokenWidth;pendingList.push(token);tokenWidth=0}else{if(tokenWidthNotSpecified){tokenWidth=token.textWidth;var textBackgroundColor=tokenStyle.textBackgroundColor;var bgImg=textBackgroundColor&&textBackgroundColor.image;if(bgImg){bgImg=imageHelper.findExistImage(bgImg);if(imageHelper.isImageReady(bgImg)){tokenWidth=Math.max(tokenWidth,bgImg.width*tokenHeight/bgImg.height)}}}var paddingW=textPadding?textPadding[1]+textPadding[3]:0;tokenWidth+=paddingW;var remianTruncWidth=truncateWidth!=null?truncateWidth-lineWidth:null;if(remianTruncWidth!=null&&remianTruncWidth<tokenWidth){if(!tokenWidthNotSpecified||remianTruncWidth<paddingW){token.text='';token.textWidth=tokenWidth=0}else{token.text=truncateText(token.text,remianTruncWidth-paddingW,font,truncate.ellipsis,{minChar:truncate.minChar});token.textWidth=textContain.getWidth(token.text,font);tokenWidth=token.textWidth+paddingW}}}lineWidth+=(token.width=tokenWidth);tokenStyle&&(lineHeight=Math.max(lineHeight,token.lineHeight))}line.width=lineWidth;line.lineHeight=lineHeight;contentHeight+=lineHeight;contentWidth=Math.max(contentWidth,lineWidth)}contentBlock.outerWidth=contentBlock.width=retrieve2(style.textWidth,contentWidth);contentBlock.outerHeight=contentBlock.height=retrieve2(style.textHeight,contentHeight);if(stlPadding){contentBlock.outerWidth+=stlPadding[1]+stlPadding[3];contentBlock.outerHeight+=stlPadding[0]+stlPadding[2]}for(var i=0;i<pendingList.length;i++){var token=pendingList[i];var percentWidth=token.percentWidth;token.width=parseInt(percentWidth,10)/100*contentWidth}return contentBlock}function pushTokens(block,str,styleName){var isEmptyStr=str==='';var strs=str.split('\n');var lines=block.lines;for(var i=0;i<strs.length;i++){var text=strs[i];var token={styleName:styleName,text:text,isLineHolder:!text&&!isEmptyStr};if(!i){var tokens=(lines[lines.length-1]||(lines[0]={tokens:[]})).tokens;var tokensLen=tokens.length;(tokensLen===1&&tokens[0].isLineHolder)?(tokens[0]=token):((text||!tokensLen||isEmptyStr)&&tokens.push(token))}else{lines.push({tokens:[token]})}}}function makeFont(style){return(style.fontSize||style.fontFamily)&&[style.fontStyle,style.fontWeight,(style.fontSize||12)+'px',style.fontFamily||'sans-serif'].join(' ')||style.textFont||style.font}var textContain={getWidth:getTextWidth,getBoundingRect:getTextRect,adjustTextPositionOnRect:adjustTextPositionOnRect,truncateText:truncateText,measureText:measureText,getLineHeight:getLineHeight,parsePlainText:parsePlainText,parseRichText:parseRichText,adjustTextX:adjustTextX,adjustTextY:adjustTextY,makeFont:makeFont,DEFAULT_FONT:DEFAULT_FONT};module.exports=textContain}),(function(module,exports,__webpack_require__){"use strict";var curve=__webpack_require__(4);var vec2=__webpack_require__(2);var bbox=__webpack_require__(47);var BoundingRect=__webpack_require__(3);var dpr=__webpack_require__(19).devicePixelRatio;var CMD={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7};var min=[];var max=[];var min2=[];var max2=[];var mathMin=Math.min;var mathMax=Math.max;var mathCos=Math.cos;var mathSin=Math.sin;var mathSqrt=Math.sqrt;var mathAbs=Math.abs;var hasTypedArray=typeof Float32Array!='undefined';var PathProxy=function(notSaveData){this._saveData=!(notSaveData||false);if(this._saveData){this.data=[]}this._ctx=null};PathProxy.prototype={constructor:PathProxy,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(sx,sy){this._ux=mathAbs(1/dpr/sx)||0;this._uy=mathAbs(1/dpr/sy)||0},getContext:function(){return this._ctx},beginPath:function(ctx){this._ctx=ctx;ctx&&ctx.beginPath();ctx&&(this.dpr=ctx.dpr);if(this._saveData){this._len=0}if(this._lineDash){this._lineDash=null;this._dashOffset=0}return this},moveTo:function(x,y){this.addData(CMD.M,x,y);this._ctx&&this._ctx.moveTo(x,y);this._x0=x;this._y0=y;this._xi=x;this._yi=y;return this},lineTo:function(x,y){var exceedUnit=mathAbs(x-this._xi)>this._ux||mathAbs(y-this._yi)>this._uy||this._len<5;this.addData(CMD.L,x,y);if(this._ctx&&exceedUnit){this._needsDash()?this._dashedLineTo(x,y):this._ctx.lineTo(x,y)}if(exceedUnit){this._xi=x;this._yi=y}return this},bezierCurveTo:function(x1,y1,x2,y2,x3,y3){this.addData(CMD.C,x1,y1,x2,y2,x3,y3);if(this._ctx){this._needsDash()?this._dashedBezierTo(x1,y1,x2,y2,x3,y3):this._ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3)}this._xi=x3;this._yi=y3;return this},quadraticCurveTo:function(x1,y1,x2,y2){this.addData(CMD.Q,x1,y1,x2,y2);if(this._ctx){this._needsDash()?this._dashedQuadraticTo(x1,y1,x2,y2):this._ctx.quadraticCurveTo(x1,y1,x2,y2)}this._xi=x2;this._yi=y2;return this},arc:function(cx,cy,r,startAngle,endAngle,anticlockwise){this.addData(CMD.A,cx,cy,r,r,startAngle,endAngle-startAngle,0,anticlockwise?0:1);this._ctx&&this._ctx.arc(cx,cy,r,startAngle,endAngle,anticlockwise);this._xi=mathCos(endAngle)*r+cx;this._yi=mathSin(endAngle)*r+cx;return this},arcTo:function(x1,y1,x2,y2,radius){if(this._ctx){this._ctx.arcTo(x1,y1,x2,y2,radius)}return this},rect:function(x,y,w,h){this._ctx&&this._ctx.rect(x,y,w,h);this.addData(CMD.R,x,y,w,h);return this},closePath:function(){this.addData(CMD.Z);var ctx=this._ctx;var x0=this._x0;var y0=this._y0;if(ctx){this._needsDash()&&this._dashedLineTo(x0,y0);ctx.closePath()}this._xi=x0;this._yi=y0;return this},fill:function(ctx){ctx&&ctx.fill();this.toStatic()},stroke:function(ctx){ctx&&ctx.stroke();this.toStatic()},setLineDash:function(lineDash){if(lineDash instanceof Array){this._lineDash=lineDash;this._dashIdx=0;var lineDashSum=0;for(var i=0;i<lineDash.length;i++){lineDashSum+=lineDash[i]}this._dashSum=lineDashSum}return this},setLineDashOffset:function(offset){this._dashOffset=offset;return this},len:function(){return this._len},setData:function(data){var len=data.length;if(!(this.data&&this.data.length==len)&&hasTypedArray){this.data=new Float32Array(len)}for(var i=0;i<len;i++){this.data[i]=data[i]}this._len=len},appendPath:function(path){if(!(path instanceof Array)){path=[path]}var len=path.length;var appendSize=0;var offset=this._len;for(var i=0;i<len;i++){appendSize+=path[i].len()}if(hasTypedArray&&(this.data instanceof Float32Array)){this.data=new Float32Array(offset+appendSize)}for(var i=0;i<len;i++){var appendPathData=path[i].data;for(var k=0;k<appendPathData.length;k++){this.data[offset++]=appendPathData[k]}}this._len=offset},addData:function(cmd){if(!this._saveData){return}var data=this.data;if(this._len+arguments.length>data.length){this._expandData();data=this.data}for(var i=0;i<arguments.length;i++){data[this._len++]=arguments[i]}this._prevCmd=cmd},_expandData:function(){if(!(this.data instanceof Array)){var newData=[];for(var i=0;i<this._len;i++){newData[i]=this.data[i]}this.data=newData}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(x1,y1){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var dx=x1-x0;var dy=y1-y0;var dist=mathSqrt(dx*dx+dy*dy);var x=x0;var y=y0;var dash;var nDash=lineDash.length;var idx;dx/=dist;dy/=dist;if(offset<0){offset=dashSum+offset}offset%=dashSum;x-=offset*dx;y-=offset*dy;while((dx>0&&x<=x1)||(dx<0&&x>=x1)||(dx==0&&((dy>0&&y<=y1)||(dy<0&&y>=y1)))){idx=this._dashIdx;dash=lineDash[idx];x+=dx*dash;y+=dy*dash;this._dashIdx=(idx+1)%nDash;if((dx>0&&x<x0)||(dx<0&&x>x0)||(dy>0&&y<y0)||(dy<0&&y>y0)){continue}ctx[idx%2?'moveTo':'lineTo'](dx>=0?mathMin(x,x1):mathMax(x,x1),dy>=0?mathMin(y,y1):mathMax(y,y1))}dx=x-x1;dy=y-y1;this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedBezierTo:function(x1,y1,x2,y2,x3,y3){var dashSum=this._dashSum;var offset=this._dashOffset;var lineDash=this._lineDash;var ctx=this._ctx;var x0=this._xi;var y0=this._yi;var t;var dx;var dy;var cubicAt=curve.cubicAt;var bezierLen=0;var idx=this._dashIdx;var nDash=lineDash.length;var x;var y;var tmpLen=0;if(offset<0){offset=dashSum+offset}offset%=dashSum;for(t=0;t<1;t+=0.1){dx=cubicAt(x0,x1,x2,x3,t+0.1)-cubicAt(x0,x1,x2,x3,t);dy=cubicAt(y0,y1,y2,y3,t+0.1)-cubicAt(y0,y1,y2,y3,t);bezierLen+=mathSqrt(dx*dx+dy*dy)}for(;idx<nDash;idx++){tmpLen+=lineDash[idx];if(tmpLen>offset){break}}t=(tmpLen-offset)/bezierLen;while(t<=1){x=cubicAt(x0,x1,x2,x3,t);y=cubicAt(y0,y1,y2,y3,t);idx%2?ctx.moveTo(x,y):ctx.lineTo(x,y);t+=lineDash[idx]/bezierLen;idx=(idx+1)%nDash}(idx%2!==0)&&ctx.lineTo(x3,y3);dx=x3-x;dy=y3-y;this._dashOffset=-mathSqrt(dx*dx+dy*dy)},_dashedQuadraticTo:function(x1,y1,x2,y2){var x3=x2;var y3=y2;x2=(x2+2*x1)/3;y2=(y2+2*y1)/3;x1=(this._xi+2*x1)/3;y1=(this._yi+2*y1)/3;this._dashedBezierTo(x1,y1,x2,y2,x3,y3)},toStatic:function(){var data=this.data;if(data instanceof Array){data.length=this._len;if(hasTypedArray){this.data=new Float32Array(data)}}},getBoundingRect:function(){min[0]=min[1]=min2[0]=min2[1]=Number.MAX_VALUE;max[0]=max[1]=max2[0]=max2[1]=-Number.MAX_VALUE;var data=this.data;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(i==1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;min2[0]=x0;min2[1]=y0;max2[0]=x0;max2[1]=y0;break;case CMD.L:bbox.fromLine(xi,yi,data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.C:bbox.fromCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.Q:bbox.fromQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],min2,max2);xi=data[i++];yi=data[i++];break;case CMD.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var startAngle=data[i++];var endAngle=data[i++]+startAngle;var psi=data[i++];var anticlockwise=1-data[i++];if(i==1){x0=mathCos(startAngle)*rx+cx;y0=mathSin(startAngle)*ry+cy}bbox.fromArc(cx,cy,rx,ry,startAngle,endAngle,anticlockwise,min2,max2);xi=mathCos(endAngle)*rx+cx;yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];bbox.fromLine(x0,y0,x0+width,y0+height,min2,max2);break;case CMD.Z:xi=x0;yi=y0;break}vec2.min(min,min,min2);vec2.max(max,max,max2)}if(i===0){min[0]=min[1]=max[0]=max[1]=0}return new BoundingRect(min[0],min[1],max[0]-min[0],max[1]-min[1])},rebuildPath:function(ctx){var d=this.data;var x0,y0;var xi,yi;var x,y;var ux=this._ux;var uy=this._uy;var len=this._len;for(var i=0;i<len;){var cmd=d[i++];if(i==1){xi=d[i];yi=d[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=xi=d[i++];y0=yi=d[i++];ctx.moveTo(xi,yi);break;case CMD.L:x=d[i++];y=d[i++];if(mathAbs(x-xi)>ux||mathAbs(y-yi)>uy||i===len-1){ctx.lineTo(x,y);xi=x;yi=y}break;case CMD.C:ctx.bezierCurveTo(d[i++],d[i++],d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.Q:ctx.quadraticCurveTo(d[i++],d[i++],d[i++],d[i++]);xi=d[i-2];yi=d[i-1];break;case CMD.A:var cx=d[i++];var cy=d[i++];var rx=d[i++];var ry=d[i++];var theta=d[i++];var dTheta=d[i++];var psi=d[i++];var fs=d[i++];var r=(rx>ry)?rx:ry;var scaleX=(rx>ry)?1:rx/ry;var scaleY=(rx>ry)?ry/rx:1;var isEllipse=Math.abs(rx-ry)>1e-3;var endAngle=theta+dTheta;if(isEllipse){ctx.translate(cx,cy);ctx.rotate(psi);ctx.scale(scaleX,scaleY);ctx.arc(0,0,r,theta,endAngle,1-fs);ctx.scale(1/scaleX,1/scaleY);ctx.rotate(-psi);ctx.translate(-cx,-cy)}else{ctx.arc(cx,cy,r,theta,endAngle,1-fs)}if(i==1){x0=mathCos(theta)*rx+cx;y0=mathSin(theta)*ry+cy}xi=mathCos(endAngle)*rx+cx;yi=mathSin(endAngle)*ry+cy;break;case CMD.R:x0=xi=d[i];y0=yi=d[i+1];ctx.rect(d[i++],d[i++],d[i++],d[i++]);break;case CMD.Z:ctx.closePath();xi=x0;yi=y0}}}};PathProxy.CMD=CMD;module.exports=PathProxy}),(function(module,exports){module.exports=__WEBPACK_EXTERNAL_MODULE_7__}),(function(module,exports){var ArrayCtor=typeof Float32Array==='undefined'?Array:Float32Array;var matrix={create:function(){var out=new ArrayCtor(6);matrix.identity(out);return out},identity:function(out){out[0]=1;out[1]=0;out[2]=0;out[3]=1;out[4]=0;out[5]=0;return out},copy:function(out,m){out[0]=m[0];out[1]=m[1];out[2]=m[2];out[3]=m[3];out[4]=m[4];out[5]=m[5];return out},mul:function(out,m1,m2){var out0=m1[0]*m2[0]+m1[2]*m2[1];var out1=m1[1]*m2[0]+m1[3]*m2[1];var out2=m1[0]*m2[2]+m1[2]*m2[3];var out3=m1[1]*m2[2]+m1[3]*m2[3];var out4=m1[0]*m2[4]+m1[2]*m2[5]+m1[4];var out5=m1[1]*m2[4]+m1[3]*m2[5]+m1[5];out[0]=out0;out[1]=out1;out[2]=out2;out[3]=out3;out[4]=out4;out[5]=out5;return out},translate:function(out,a,v){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];out[4]=a[4]+v[0];out[5]=a[5]+v[1];return out},rotate:function(out,a,rad){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var st=Math.sin(rad);var ct=Math.cos(rad);out[0]=aa*ct+ab*st;out[1]=-aa*st+ab*ct;out[2]=ac*ct+ad*st;out[3]=-ac*st+ct*ad;out[4]=ct*atx+st*aty;out[5]=ct*aty-st*atx;return out},scale:function(out,a,v){var vx=v[0];var vy=v[1];out[0]=a[0]*vx;out[1]=a[1]*vy;out[2]=a[2]*vx;out[3]=a[3]*vy;out[4]=a[4]*vx;out[5]=a[5]*vy;return out},invert:function(out,a){var aa=a[0];var ac=a[2];var atx=a[4];var ab=a[1];var ad=a[3];var aty=a[5];var det=aa*ad-ab*ac;if(!det){return null}det=1.0/det;out[0]=ad*det;out[1]=-ab*det;out[2]=-ac*det;out[3]=aa*det;out[4]=(ac*aty-ad*atx)*det;out[5]=(ab*atx-aa*aty)*det;return out}};module.exports=matrix}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var number={};var RADIAN_EPSILON=1e-4;function _trim(str){return str.replace(/^\s+/,'').replace(/\s+$/,'')}number.linearMap=function(val,domain,range,clamp){var subDomain=domain[1]-domain[0];var subRange=range[1]-range[0];if(subDomain===0){return subRange===0?range[0]:(range[0]+range[1])/2}if(clamp){if(subDomain>0){if(val<=domain[0]){return range[0]}else if(val>=domain[1]){return range[1]}}else{if(val>=domain[0]){return range[0]}else if(val<=domain[1]){return range[1]}}}else{if(val===domain[0]){return range[0]}if(val===domain[1]){return range[1]}}return(val-domain[0])/subDomain*subRange+range[0]};number.parsePercent=function(percent,all){switch(percent){case'center':case'middle':percent='50%';break;case'left':case'top':percent='0%';break;case'right':case'bottom':percent='100%';break}if(typeof percent==='string'){if(_trim(percent).match(/%$/)){return parseFloat(percent)/100*all}return parseFloat(percent)}return percent==null?NaN:+percent};number.round=function(x,precision,returnStr){if(precision==null){precision=10}precision=Math.min(Math.max(0,precision),20);x=(+x).toFixed(precision);return returnStr?x:+x};number.asc=function(arr){arr.sort(function(a,b){return a-b});return arr};number.getPrecision=function(val){val=+val;if(isNaN(val)){return 0}var e=1;var count=0;while(Math.round(val*e)/e!==val){e*=10;count++}return count};number.getPrecisionSafe=function(val){var str=val.toString();var eIndex=str.indexOf('e');if(eIndex>0){var precision=+str.slice(eIndex+1);return precision<0?-precision:0}else{var dotIndex=str.indexOf('.');return dotIndex<0?0:str.length-1-dotIndex}};number.getPixelPrecision=function(dataExtent,pixelExtent){var log=Math.log;var LN10=Math.LN10;var dataQuantity=Math.floor(log(dataExtent[1]-dataExtent[0])/LN10);var sizeQuantity=Math.round(log(Math.abs(pixelExtent[1]-pixelExtent[0]))/LN10);var precision=Math.min(Math.max(-dataQuantity+sizeQuantity,0),20);return!isFinite(precision)?20:precision};number.getPercentWithPrecision=function(valueList,idx,precision){if(!valueList[idx]){return 0}var sum=zrUtil.reduce(valueList,function(acc,val){return acc+(isNaN(val)?0:val)},0);if(sum===0){return 0}var digits=Math.pow(10,precision);var votesPerQuota=zrUtil.map(valueList,function(val){return(isNaN(val)?0:val)/sum*digits*100});var targetSeats=digits*100;var seats=zrUtil.map(votesPerQuota,function(votes){return Math.floor(votes)});var currentSum=zrUtil.reduce(seats,function(acc,val){return acc+val},0);var remainder=zrUtil.map(votesPerQuota,function(votes,idx){return votes-seats[idx]});while(currentSum<targetSeats){var max=Number.NEGATIVE_INFINITY;var maxId=null;for(var i=0,len=remainder.length;i<len;++i){if(remainder[i]>max){max=remainder[i];maxId=i}}++seats[maxId];remainder[maxId]=0;++currentSum}return seats[idx]/digits};number.MAX_SAFE_INTEGER=9007199254740991;number.remRadian=function(radian){var pi2=Math.PI*2;return(radian%pi2+pi2)%pi2};number.isRadianAroundZero=function(val){return val>-RADIAN_EPSILON&&val<RADIAN_EPSILON};var TIME_REG=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;number.parseDate=function(value){if(value instanceof Date){return value}else if(typeof value==='string'){var match=TIME_REG.exec(value);if(!match){return new Date(NaN)}if(!match[8]){return new Date(+match[1],+(match[2]||1)-1,+match[3]||1,+match[4]||0,+(match[5]||0),+match[6]||0,+match[7]||0)}else{var hour=+match[4]||0;if(match[8].toUpperCase()!=='Z'){hour-=match[8].slice(0,3)}return new Date(Date.UTC(+match[1],+(match[2]||1)-1,+match[3]||1,hour,+(match[5]||0),+match[6]||0,+match[7]||0))}}else if(value==null){return new Date(NaN)}return new Date(Math.round(value))};number.quantity=function(val){return Math.pow(10,quantityExponent(val))};function quantityExponent(val){return Math.floor(Math.log(val)/Math.LN10)}number.nice=function(val,round){var exponent=quantityExponent(val);var exp10=Math.pow(10,exponent);var f=val/exp10;var nf;if(round){if(f<1.5){nf=1}else if(f<2.5){nf=2}else if(f<4){nf=3}else if(f<7){nf=5}else{nf=10}}else{if(f<1){nf=1}else if(f<2){nf=2}else if(f<3){nf=3}else if(f<5){nf=5}else{nf=10}}val=nf*exp10;return exponent>=-20?+val.toFixed(exponent<0?-exponent:0):val};number.reformIntervals=function(list){list.sort(function(a,b){return littleThan(a,b,0)?-1:1});var curr=-Infinity;var currClose=1;for(var i=0;i<list.length;){var interval=list[i].interval;var close=list[i].close;for(var lg=0;lg<2;lg++){if(interval[lg]<=curr){interval[lg]=curr;close[lg]=!lg?1-currClose:1}curr=interval[lg];currClose=close[lg]}if(interval[0]===interval[1]&&close[0]*close[1]!==1){list.splice(i,1)}else{i++}}return list;function littleThan(a,b,lg){return a.interval[lg]<b.interval[lg]||(a.interval[lg]===b.interval[lg]&&((a.close[lg]-b.close[lg]===(!lg?1:-1))||(!lg&&littleThan(a,b,1))))}};number.isNumeric=function(v){return v-parseFloat(v)>=0};module.exports=number}),(function(module,exports,__webpack_require__){var LRU=__webpack_require__(14);var globalImageCache=new LRU(50);var helper={};helper.findExistImage=function(newImageOrSrc){if(typeof newImageOrSrc==='string'){var cachedImgObj=globalImageCache.get(newImageOrSrc);return cachedImgObj&&cachedImgObj.image}else{return newImageOrSrc}};helper.createOrUpdateImage=function(newImageOrSrc,image,hostEl,cb,cbPayload){if(!newImageOrSrc){return image}else if(typeof newImageOrSrc==='string'){if((image&&image.__zrImageSrc===newImageOrSrc)||!hostEl){return image}var cachedImgObj=globalImageCache.get(newImageOrSrc);var pendingWrap={hostEl:hostEl,cb:cb,cbPayload:cbPayload};if(cachedImgObj){image=cachedImgObj.image;!isImageReady(image)&&cachedImgObj.pending.push(pendingWrap)}else{!image&&(image=new Image());image.onload=imageOnLoad;globalImageCache.put(newImageOrSrc,image.__cachedImgObj={image:image,pending:[pendingWrap]});image.src=image.__zrImageSrc=newImageOrSrc}return image}else{return newImageOrSrc}};function imageOnLoad(){var cachedImgObj=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var i=0;i<cachedImgObj.pending.length;i++){var pendingWrap=cachedImgObj.pending[i];var cb=pendingWrap.cb;cb&&cb(this,pendingWrap.cbPayload);pendingWrap.hostEl.dirty()}cachedImgObj.pending.length=0}var isImageReady=helper.isImageReady=function(image){return image&&image.width&&image.height};module.exports=helper}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);module.exports=function(properties){for(var i=0;i<properties.length;i++){if(!properties[i][1]){properties[i][1]=properties[i][0]}}return function(excludes,includes){var style={};for(var i=0;i<properties.length;i++){var propName=properties[i][1];if((excludes&&zrUtil.indexOf(excludes,propName)>=0)||(includes&&zrUtil.indexOf(includes,propName)<0)){continue}var val=this.getShallow(propName);if(val!=null){style[properties[i][0]]=val}}return style}}}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var Style=__webpack_require__(38);var Element=__webpack_require__(16);var RectText=__webpack_require__(46);function Displayable(opts){opts=opts||{};Element.call(this,opts);for(var name in opts){if(opts.hasOwnProperty(name)&&name!=='style'){this[name]=opts[name]}}this.style=new Style(opts.style,this);this._rect=null;this.__clipPaths=[]}Displayable.prototype={constructor:Displayable,type:'displayable',__dirty:true,invisible:false,z:0,z2:0,zlevel:0,draggable:false,dragging:false,silent:false,culling:false,cursor:'pointer',rectHover:false,progressive:-1,beforeBrush:function(ctx){},afterBrush:function(ctx){},brush:function(ctx,prevEl){},getBoundingRect:function(){},contain:function(x,y){return this.rectContain(x,y)},traverse:function(cb,context){cb.call(context,this)},rectContain:function(x,y){var coord=this.transformCoordToLocal(x,y);var rect=this.getBoundingRect();return rect.contain(coord[0],coord[1])},dirty:function(){this.__dirty=true;this._rect=null;this.__zr&&this.__zr.refresh()},animateStyle:function(loop){return this.animate('style',loop)},attrKV:function(key,value){if(key!=='style'){Element.prototype.attrKV.call(this,key,value)}else{this.style.set(value)}},setStyle:function(key,value){this.style.set(key,value);this.dirty(false);return this},useStyle:function(obj){this.style=new Style(obj,this);this.dirty(false);return this}};zrUtil.inherits(Displayable,Element);zrUtil.mixin(Displayable,RectText);module.exports=Displayable}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var numberUtil=__webpack_require__(9);var textContain=__webpack_require__(5);var formatUtil={};formatUtil.addCommas=function(x){if(isNaN(x)){return'-'}x=(x+'').split('.');return x[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,'$1,')+(x.length>1?('.'+x[1]):'')};formatUtil.toCamelCase=function(str,upperCaseFirst){str=(str||'').toLowerCase().replace(/-(.)/g,function(match,group1){return group1.toUpperCase()});if(upperCaseFirst&&str){str=str.charAt(0).toUpperCase()+str.slice(1)}return str};formatUtil.normalizeCssArray=zrUtil.normalizeCssArray;var encodeHTML=formatUtil.encodeHTML=function(source){return String(source).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;')};var TPL_VAR_ALIAS=['a','b','c','d','e','f','g'];var wrapVar=function(varName,seriesIdx){return'{'+varName+(seriesIdx==null?'':seriesIdx)+'}'};formatUtil.formatTpl=function(tpl,paramsList,encode){if(!zrUtil.isArray(paramsList)){paramsList=[paramsList]}var seriesLen=paramsList.length;if(!seriesLen){return''}var $vars=paramsList[0].$vars||[];for(var i=0;i<$vars.length;i++){var alias=TPL_VAR_ALIAS[i];var val=wrapVar(alias,0);tpl=tpl.replace(wrapVar(alias),encode?encodeHTML(val):val)}for(var seriesIdx=0;seriesIdx<seriesLen;seriesIdx++){for(var k=0;k<$vars.length;k++){var val=paramsList[seriesIdx][$vars[k]];tpl=tpl.replace(wrapVar(TPL_VAR_ALIAS[k],seriesIdx),encode?encodeHTML(val):val)}}return tpl};formatUtil.formatTplSimple=function(tpl,param,encode){zrUtil.each(param,function(value,key){tpl=tpl.replace('{'+key+'}',encode?encodeHTML(value):value)});return tpl};formatUtil.getTooltipMarker=function(color,extraCssText){return color?'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:'+formatUtil.encodeHTML(color)+';'+(extraCssText||'')+'"></span>':''};var s2d=function(str){return str<10?('0'+str):str};formatUtil.formatTime=function(tpl,value,isUTC){if(tpl==='week'||tpl==='month'||tpl==='quarter'||tpl==='half-year'||tpl==='year'){tpl='MM-dd\nyyyy'}var date=numberUtil.parseDate(value);var utc=isUTC?'UTC':'';var y=date['get'+utc+'FullYear']();var M=date['get'+utc+'Month']()+1;var d=date['get'+utc+'Date']();var h=date['get'+utc+'Hours']();var m=date['get'+utc+'Minutes']();var s=date['get'+utc+'Seconds']();tpl=tpl.replace('MM',s2d(M)).replace('M',M).replace('yyyy',y).replace('yy',y%100).replace('dd',s2d(d)).replace('d',d).replace('hh',s2d(h)).replace('h',h).replace('mm',s2d(m)).replace('m',m).replace('ss',s2d(s)).replace('s',s);return tpl};formatUtil.capitalFirst=function(str){return str?str.charAt(0).toUpperCase()+str.substr(1):str};formatUtil.truncateText=textContain.truncateText;formatUtil.getTextRect=textContain.getBoundingRect;module.exports=formatUtil}),(function(module,exports){var LinkedList=function(){this.head=null;this.tail=null;this._len=0};var linkedListProto=LinkedList.prototype;linkedListProto.insert=function(val){var entry=new Entry(val);this.insertEntry(entry);return entry};linkedListProto.insertEntry=function(entry){if(!this.head){this.head=this.tail=entry}else{this.tail.next=entry;entry.prev=this.tail;entry.next=null;this.tail=entry}this._len++};linkedListProto.remove=function(entry){var prev=entry.prev;var next=entry.next;if(prev){prev.next=next}else{this.head=next}if(next){next.prev=prev}else{this.tail=prev}entry.next=entry.prev=null;this._len--};linkedListProto.len=function(){return this._len};linkedListProto.clear=function(){this.head=this.tail=null;this._len=0};var Entry=function(val){this.value=val;this.next;this.prev};var LRU=function(maxSize){this._list=new LinkedList();this._map={};this._maxSize=maxSize||10;this._lastRemovedEntry=null};var LRUProto=LRU.prototype;LRUProto.put=function(key,value){var list=this._list;var map=this._map;var removed=null;if(map[key]==null){var len=list.len();var entry=this._lastRemovedEntry;if(len>=this._maxSize&&len>0){var leastUsedEntry=list.head;list.remove(leastUsedEntry);delete map[leastUsedEntry.key];removed=leastUsedEntry.value;this._lastRemovedEntry=leastUsedEntry}if(entry){entry.value=value}else{entry=new Entry(value)}entry.key=key;list.insertEntry(entry);map[key]=entry}return removed};LRUProto.get=function(key){var entry=this._map[key];var list=this._list;if(entry!=null){if(entry!==list.tail){list.remove(entry);list.insertEntry(entry)}return entry.value}};LRUProto.clear=function(){this._list.clear();this._map={}};module.exports=LRU}),(function(module,exports){var env={};if(typeof navigator==='undefined'){env={browser:{},os:{},node:true,canvasSupported:true}}else{env=detect(navigator.userAgent)}module.exports=env;function detect(ua){var os={};var browser={};var firefox=ua.match(/Firefox\/([\d.]+)/);var ie=ua.match(/MSIE\s([\d.]+)/)||ua.match(/Trident\/.+?rv:(([\d.]+))/);var edge=ua.match(/Edge\/([\d.]+)/);var weChat=(/micromessenger/i).test(ua);if(firefox){browser.firefox=true;browser.version=firefox[1]}if(ie){browser.ie=true;browser.version=ie[1]}if(edge){browser.edge=true;browser.version=edge[1]}if(weChat){browser.weChat=true}return{browser:browser,os:os,node:false,canvasSupported:document.createElement('canvas').getContext?true:false,touchEventsSupported:'ontouchstart'in window&&!browser.ie&&!browser.edge,pointerEventsSupported:'onpointerdown'in window&&(browser.edge||(browser.ie&&browser.version>=11))}}}),(function(module,exports,__webpack_require__){"use strict";var guid=__webpack_require__(39);var Eventful=__webpack_require__(40);var Transformable=__webpack_require__(17);var Animatable=__webpack_require__(41);var zrUtil=__webpack_require__(0);var Element=function(opts){Transformable.call(this,opts);Eventful.call(this,opts);Animatable.call(this,opts);this.id=opts.id||guid()};Element.prototype={type:'element',name:'',__zr:null,ignore:false,clipPath:null,drift:function(dx,dy){switch(this.draggable){case'horizontal':dy=0;break;case'vertical':dx=0;break}var m=this.transform;if(!m){m=this.transform=[1,0,0,1,0,0]}m[4]+=dx;m[5]+=dy;this.decomposeTransform();this.dirty(false)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(cb,context){},attrKV:function(key,value){if(key==='position'||key==='scale'||key==='origin'){if(value){var target=this[key];if(!target){target=this[key]=[]}target[0]=value[0];target[1]=value[1]}}else{this[key]=value}},hide:function(){this.ignore=true;this.__zr&&this.__zr.refresh()},show:function(){this.ignore=false;this.__zr&&this.__zr.refresh()},attr:function(key,value){if(typeof key==='string'){this.attrKV(key,value)}else if(zrUtil.isObject(key)){for(var name in key){if(key.hasOwnProperty(name)){this.attrKV(name,key[name])}}}this.dirty(false);return this},setClipPath:function(clipPath){var zr=this.__zr;if(zr){clipPath.addSelfToZr(zr)}if(this.clipPath&&this.clipPath!==clipPath){this.removeClipPath()}this.clipPath=clipPath;clipPath.__zr=zr;clipPath.__clipTarget=this;this.dirty(false)},removeClipPath:function(){var clipPath=this.clipPath;if(clipPath){if(clipPath.__zr){clipPath.removeSelfFromZr(clipPath.__zr)}clipPath.__zr=null;clipPath.__clipTarget=null;this.clipPath=null;this.dirty(false)}},addSelfToZr:function(zr){this.__zr=zr;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.addAnimator(animators[i])}}if(this.clipPath){this.clipPath.addSelfToZr(zr)}},removeSelfFromZr:function(zr){this.__zr=null;var animators=this.animators;if(animators){for(var i=0;i<animators.length;i++){zr.animation.removeAnimator(animators[i])}}if(this.clipPath){this.clipPath.removeSelfFromZr(zr)}}};zrUtil.mixin(Element,Animatable);zrUtil.mixin(Element,Transformable);zrUtil.mixin(Element,Eventful);module.exports=Element}),(function(module,exports,__webpack_require__){"use strict";var matrix=__webpack_require__(8);var vector=__webpack_require__(2);var mIdentity=matrix.identity;var EPSILON=5e-5;function isNotAroundZero(val){return val>EPSILON||val<-EPSILON}var Transformable=function(opts){opts=opts||{};if(!opts.position){this.position=[0,0]}if(opts.rotation==null){this.rotation=0}if(!opts.scale){this.scale=[1,1]}this.origin=this.origin||null};var transformableProto=Transformable.prototype;transformableProto.transform=null;transformableProto.needLocalTransform=function(){return isNotAroundZero(this.rotation)||isNotAroundZero(this.position[0])||isNotAroundZero(this.position[1])||isNotAroundZero(this.scale[0]-1)||isNotAroundZero(this.scale[1]-1)};transformableProto.updateTransform=function(){var parent=this.parent;var parentHasTransform=parent&&parent.transform;var needLocalTransform=this.needLocalTransform();var m=this.transform;if(!(needLocalTransform||parentHasTransform)){m&&mIdentity(m);return}m=m||matrix.create();if(needLocalTransform){this.getLocalTransform(m)}else{mIdentity(m)}if(parentHasTransform){if(needLocalTransform){matrix.mul(m,parent.transform,m)}else{matrix.copy(m,parent.transform)}}this.transform=m;this.invTransform=this.invTransform||matrix.create();matrix.invert(this.invTransform,m)};transformableProto.getLocalTransform=function(m){return Transformable.getLocalTransform(this,m)};transformableProto.setTransform=function(ctx){var m=this.transform;var dpr=ctx.dpr||1;if(m){ctx.setTransform(dpr*m[0],dpr*m[1],dpr*m[2],dpr*m[3],dpr*m[4],dpr*m[5])}else{ctx.setTransform(dpr,0,0,dpr,0,0)}};transformableProto.restoreTransform=function(ctx){var dpr=ctx.dpr||1;ctx.setTransform(dpr,0,0,dpr,0,0)};var tmpTransform=[];transformableProto.decomposeTransform=function(){if(!this.transform){return}var parent=this.parent;var m=this.transform;if(parent&&parent.transform){matrix.mul(tmpTransform,parent.invTransform,m);m=tmpTransform}var sx=m[0]*m[0]+m[1]*m[1];var sy=m[2]*m[2]+m[3]*m[3];var position=this.position;var scale=this.scale;if(isNotAroundZero(sx-1)){sx=Math.sqrt(sx)}if(isNotAroundZero(sy-1)){sy=Math.sqrt(sy)}if(m[0]<0){sx=-sx}if(m[3]<0){sy=-sy}position[0]=m[4];position[1]=m[5];scale[0]=sx;scale[1]=sy;this.rotation=Math.atan2(-m[1]/sy,m[0]/sx)};transformableProto.getGlobalScale=function(){var m=this.transform;if(!m){return[1,1]}var sx=Math.sqrt(m[0]*m[0]+m[1]*m[1]);var sy=Math.sqrt(m[2]*m[2]+m[3]*m[3]);if(m[0]<0){sx=-sx}if(m[3]<0){sy=-sy}return[sx,sy]};transformableProto.transformCoordToLocal=function(x,y){var v2=[x,y];var invTransform=this.invTransform;if(invTransform){vector.applyTransform(v2,v2,invTransform)}return v2};transformableProto.transformCoordToGlobal=function(x,y){var v2=[x,y];var transform=this.transform;if(transform){vector.applyTransform(v2,v2,transform)}return v2};Transformable.getLocalTransform=function(target,m){m=m||[];mIdentity(m);var origin=target.origin;var scale=target.scale||[1,1];var rotation=target.rotation||0;var position=target.position||[0,0];if(origin){m[4]-=origin[0];m[5]-=origin[1]}matrix.scale(m,m,scale);if(rotation){matrix.rotate(m,m,rotation)}if(origin){m[4]+=origin[0];m[5]+=origin[1]}m[4]+=position[0];m[5]+=position[1];return m};module.exports=Transformable}),(function(module,exports,__webpack_require__){var LRU=__webpack_require__(14);var kCSSColorTable={'transparent':[0,0,0,0],'aliceblue':[240,248,255,1],'antiquewhite':[250,235,215,1],'aqua':[0,255,255,1],'aquamarine':[127,255,212,1],'azure':[240,255,255,1],'beige':[245,245,220,1],'bisque':[255,228,196,1],'black':[0,0,0,1],'blanchedalmond':[255,235,205,1],'blue':[0,0,255,1],'blueviolet':[138,43,226,1],'brown':[165,42,42,1],'burlywood':[222,184,135,1],'cadetblue':[95,158,160,1],'chartreuse':[127,255,0,1],'chocolate':[210,105,30,1],'coral':[255,127,80,1],'cornflowerblue':[100,149,237,1],'cornsilk':[255,248,220,1],'crimson':[220,20,60,1],'cyan':[0,255,255,1],'darkblue':[0,0,139,1],'darkcyan':[0,139,139,1],'darkgoldenrod':[184,134,11,1],'darkgray':[169,169,169,1],'darkgreen':[0,100,0,1],'darkgrey':[169,169,169,1],'darkkhaki':[189,183,107,1],'darkmagenta':[139,0,139,1],'darkolivegreen':[85,107,47,1],'darkorange':[255,140,0,1],'darkorchid':[153,50,204,1],'darkred':[139,0,0,1],'darksalmon':[233,150,122,1],'darkseagreen':[143,188,143,1],'darkslateblue':[72,61,139,1],'darkslategray':[47,79,79,1],'darkslategrey':[47,79,79,1],'darkturquoise':[0,206,209,1],'darkviolet':[148,0,211,1],'deeppink':[255,20,147,1],'deepskyblue':[0,191,255,1],'dimgray':[105,105,105,1],'dimgrey':[105,105,105,1],'dodgerblue':[30,144,255,1],'firebrick':[178,34,34,1],'floralwhite':[255,250,240,1],'forestgreen':[34,139,34,1],'fuchsia':[255,0,255,1],'gainsboro':[220,220,220,1],'ghostwhite':[248,248,255,1],'gold':[255,215,0,1],'goldenrod':[218,165,32,1],'gray':[128,128,128,1],'green':[0,128,0,1],'greenyellow':[173,255,47,1],'grey':[128,128,128,1],'honeydew':[240,255,240,1],'hotpink':[255,105,180,1],'indianred':[205,92,92,1],'indigo':[75,0,130,1],'ivory':[255,255,240,1],'khaki':[240,230,140,1],'lavender':[230,230,250,1],'lavenderblush':[255,240,245,1],'lawngreen':[124,252,0,1],'lemonchiffon':[255,250,205,1],'lightblue':[173,216,230,1],'lightcoral':[240,128,128,1],'lightcyan':[224,255,255,1],'lightgoldenrodyellow':[250,250,210,1],'lightgray':[211,211,211,1],'lightgreen':[144,238,144,1],'lightgrey':[211,211,211,1],'lightpink':[255,182,193,1],'lightsalmon':[255,160,122,1],'lightseagreen':[32,178,170,1],'lightskyblue':[135,206,250,1],'lightslategray':[119,136,153,1],'lightslategrey':[119,136,153,1],'lightsteelblue':[176,196,222,1],'lightyellow':[255,255,224,1],'lime':[0,255,0,1],'limegreen':[50,205,50,1],'linen':[250,240,230,1],'magenta':[255,0,255,1],'maroon':[128,0,0,1],'mediumaquamarine':[102,205,170,1],'mediumblue':[0,0,205,1],'mediumorchid':[186,85,211,1],'mediumpurple':[147,112,219,1],'mediumseagreen':[60,179,113,1],'mediumslateblue':[123,104,238,1],'mediumspringgreen':[0,250,154,1],'mediumturquoise':[72,209,204,1],'mediumvioletred':[199,21,133,1],'midnightblue':[25,25,112,1],'mintcream':[245,255,250,1],'mistyrose':[255,228,225,1],'moccasin':[255,228,181,1],'navajowhite':[255,222,173,1],'navy':[0,0,128,1],'oldlace':[253,245,230,1],'olive':[128,128,0,1],'olivedrab':[107,142,35,1],'orange':[255,165,0,1],'orangered':[255,69,0,1],'orchid':[218,112,214,1],'palegoldenrod':[238,232,170,1],'palegreen':[152,251,152,1],'paleturquoise':[175,238,238,1],'palevioletred':[219,112,147,1],'papayawhip':[255,239,213,1],'peachpuff':[255,218,185,1],'peru':[205,133,63,1],'pink':[255,192,203,1],'plum':[221,160,221,1],'powderblue':[176,224,230,1],'purple':[128,0,128,1],'red':[255,0,0,1],'rosybrown':[188,143,143,1],'royalblue':[65,105,225,1],'saddlebrown':[139,69,19,1],'salmon':[250,128,114,1],'sandybrown':[244,164,96,1],'seagreen':[46,139,87,1],'seashell':[255,245,238,1],'sienna':[160,82,45,1],'silver':[192,192,192,1],'skyblue':[135,206,235,1],'slateblue':[106,90,205,1],'slategray':[112,128,144,1],'slategrey':[112,128,144,1],'snow':[255,250,250,1],'springgreen':[0,255,127,1],'steelblue':[70,130,180,1],'tan':[210,180,140,1],'teal':[0,128,128,1],'thistle':[216,191,216,1],'tomato':[255,99,71,1],'turquoise':[64,224,208,1],'violet':[238,130,238,1],'wheat':[245,222,179,1],'white':[255,255,255,1],'whitesmoke':[245,245,245,1],'yellow':[255,255,0,1],'yellowgreen':[154,205,50,1]};function clampCssByte(i){i=Math.round(i);return i<0?0:i>255?255:i}function clampCssAngle(i){i=Math.round(i);return i<0?0:i>360?360:i}function clampCssFloat(f){return f<0?0:f>1?1:f}function parseCssInt(str){if(str.length&&str.charAt(str.length-1)==='%'){return clampCssByte(parseFloat(str)/100*255)}return clampCssByte(parseInt(str,10))}function parseCssFloat(str){if(str.length&&str.charAt(str.length-1)==='%'){return clampCssFloat(parseFloat(str)/100)}return clampCssFloat(parseFloat(str))}function cssHueToRgb(m1,m2,h){if(h<0){h+=1}else if(h>1){h-=1}if(h*6<1){return m1+(m2-m1)*h*6}if(h*2<1){return m2}if(h*3<2){return m1+(m2-m1)*(2/3-h)*6}return m1}function lerpNumber(a,b,p){return a+(b-a)*p}function setRgba(out,r,g,b,a){out[0]=r;out[1]=g;out[2]=b;out[3]=a;return out}function copyRgba(out,a){out[0]=a[0];out[1]=a[1];out[2]=a[2];out[3]=a[3];return out}var colorCache=new LRU(20);var lastRemovedArr=null;function putToCache(colorStr,rgbaArr){if(lastRemovedArr){copyRgba(lastRemovedArr,rgbaArr)}lastRemovedArr=colorCache.put(colorStr,lastRemovedArr||(rgbaArr.slice()))}function parse(colorStr,rgbaArr){if(!colorStr){return}rgbaArr=rgbaArr||[];var cached=colorCache.get(colorStr);if(cached){return copyRgba(rgbaArr,cached)}colorStr=colorStr+'';var str=colorStr.replace(/ /g,'').toLowerCase();if(str in kCSSColorTable){copyRgba(rgbaArr,kCSSColorTable[str]);putToCache(colorStr,rgbaArr);return rgbaArr}if(str.charAt(0)==='#'){if(str.length===4){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=0xfff)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,((iv&0xf00)>>4)|((iv&0xf00)>>8),(iv&0xf0)|((iv&0xf0)>>4),(iv&0xf)|((iv&0xf)<<4),1);putToCache(colorStr,rgbaArr);return rgbaArr}else if(str.length===7){var iv=parseInt(str.substr(1),16);if(!(iv>=0&&iv<=0xffffff)){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,(iv&0xff0000)>>16,(iv&0xff00)>>8,iv&0xff,1);putToCache(colorStr,rgbaArr);return rgbaArr}return}var op=str.indexOf('('),ep=str.indexOf(')');if(op!==-1&&ep+1===str.length){var fname=str.substr(0,op);var params=str.substr(op+1,ep-(op+1)).split(',');var alpha=1;switch(fname){case'rgba':if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}alpha=parseCssFloat(params.pop());case'rgb':if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}setRgba(rgbaArr,parseCssInt(params[0]),parseCssInt(params[1]),parseCssInt(params[2]),alpha);putToCache(colorStr,rgbaArr);return rgbaArr;case'hsla':if(params.length!==4){setRgba(rgbaArr,0,0,0,1);return}params[3]=parseCssFloat(params[3]);hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;case'hsl':if(params.length!==3){setRgba(rgbaArr,0,0,0,1);return}hsla2rgba(params,rgbaArr);putToCache(colorStr,rgbaArr);return rgbaArr;default:return}}setRgba(rgbaArr,0,0,0,1);return}function hsla2rgba(hsla,rgba){var h=(((parseFloat(hsla[0])%360)+360)%360)/360;var s=parseCssFloat(hsla[1]);var l=parseCssFloat(hsla[2]);var m2=l<=0.5?l*(s+1):l+s-l*s;var m1=l*2-m2;rgba=rgba||[];setRgba(rgba,clampCssByte(cssHueToRgb(m1,m2,h+1/3)*255),clampCssByte(cssHueToRgb(m1,m2,h)*255),clampCssByte(cssHueToRgb(m1,m2,h-1/3)*255),1);if(hsla.length===4){rgba[3]=hsla[3]}return rgba}function rgba2hsla(rgba){if(!rgba){return}var R=rgba[0]/255;var G=rgba[1]/255;var B=rgba[2]/255;var vMin=Math.min(R,G,B);var vMax=Math.max(R,G,B);var delta=vMax-vMin;var L=(vMax+vMin)/2;var H;var S;if(delta===0){H=0;S=0}else{if(L<0.5){S=delta/(vMax+vMin)}else{S=delta/(2-vMax-vMin)}var deltaR=(((vMax-R)/6)+(delta/2))/delta;var deltaG=(((vMax-G)/6)+(delta/2))/delta;var deltaB=(((vMax-B)/6)+(delta/2))/delta;if(R===vMax){H=deltaB-deltaG}else if(G===vMax){H=(1/3)+deltaR-deltaB}else if(B===vMax){H=(2/3)+deltaG-deltaR}if(H<0){H+=1}if(H>1){H-=1}}var hsla=[H*360,S,L];if(rgba[3]!=null){hsla.push(rgba[3])}return hsla}function lift(color,level){var colorArr=parse(color);if(colorArr){for(var i=0;i<3;i++){if(level<0){colorArr[i]=colorArr[i]*(1-level)|0}else{colorArr[i]=((255-colorArr[i])*level+colorArr[i])|0}}return stringify(colorArr,colorArr.length===4?'rgba':'rgb')}}function toHex(color,level){var colorArr=parse(color);if(colorArr){return((1<<24)+(colorArr[0]<<16)+(colorArr[1]<<8)+(+colorArr[2])).toString(16).slice(1)}}function fastLerp(normalizedValue,colors,out){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}out=out||[];var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=colors[leftIndex];var rightColor=colors[rightIndex];var dv=value-leftIndex;out[0]=clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv));out[1]=clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv));out[2]=clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv));out[3]=clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv));return out}function lerp(normalizedValue,colors,fullOutput){if(!(colors&&colors.length)||!(normalizedValue>=0&&normalizedValue<=1)){return}var value=normalizedValue*(colors.length-1);var leftIndex=Math.floor(value);var rightIndex=Math.ceil(value);var leftColor=parse(colors[leftIndex]);var rightColor=parse(colors[rightIndex]);var dv=value-leftIndex;var color=stringify([clampCssByte(lerpNumber(leftColor[0],rightColor[0],dv)),clampCssByte(lerpNumber(leftColor[1],rightColor[1],dv)),clampCssByte(lerpNumber(leftColor[2],rightColor[2],dv)),clampCssFloat(lerpNumber(leftColor[3],rightColor[3],dv))],'rgba');return fullOutput?{color:color,leftIndex:leftIndex,rightIndex:rightIndex,value:value}:color}function modifyHSL(color,h,s,l){color=parse(color);if(color){color=rgba2hsla(color);h!=null&&(color[0]=clampCssAngle(h));s!=null&&(color[1]=parseCssFloat(s));l!=null&&(color[2]=parseCssFloat(l));return stringify(hsla2rgba(color),'rgba')}}function modifyAlpha(color,alpha){color=parse(color);if(color&&alpha!=null){color[3]=clampCssFloat(alpha);return stringify(color,'rgba')}}function stringify(arrColor,type){if(!arrColor||!arrColor.length){return}var colorStr=arrColor[0]+','+arrColor[1]+','+arrColor[2];if(type==='rgba'||type==='hsva'||type==='hsla'){colorStr+=','+arrColor[3]}return type+'('+colorStr+')'}module.exports={parse:parse,lift:lift,toHex:toHex,fastLerp:fastLerp,fastMapToColor:fastLerp,lerp:lerp,mapToColor:lerp,modifyHSL:modifyHSL,modifyAlpha:modifyAlpha,stringify:stringify}}),(function(module,exports){var dpr=1;if(typeof window!=='undefined'){dpr=Math.max(window.devicePixelRatio||1,1)}var config={debugMode:0,devicePixelRatio:dpr};module.exports=config}),(function(module,exports,__webpack_require__){var textContain=__webpack_require__(5);var util=__webpack_require__(0);var roundRectHelper=__webpack_require__(21);var imageHelper=__webpack_require__(10);var retrieve3=util.retrieve3;var retrieve2=util.retrieve2;var VALID_TEXT_ALIGN={left:1,right:1,center:1};var VALID_TEXT_VERTICAL_ALIGN={top:1,bottom:1,middle:1};var helper={};helper.normalizeTextStyle=function(style){normalizeStyle(style);util.each(style.rich,normalizeStyle);return style};function normalizeStyle(style){if(style){style.font=textContain.makeFont(style);var textAlign=style.textAlign;textAlign==='middle'&&(textAlign='center');style.textAlign=(textAlign==null||VALID_TEXT_ALIGN[textAlign])?textAlign:'left';var textVerticalAlign=style.textVerticalAlign||style.textBaseline;textVerticalAlign==='center'&&(textVerticalAlign='middle');style.textVerticalAlign=(textVerticalAlign==null||VALID_TEXT_VERTICAL_ALIGN[textVerticalAlign])?textVerticalAlign:'top';var textPadding=style.textPadding;if(textPadding){style.textPadding=util.normalizeCssArray(style.textPadding)}}}helper.renderText=function(hostEl,ctx,text,style,rect){style.rich?renderRichText(hostEl,ctx,text,style,rect):renderPlainText(hostEl,ctx,text,style,rect)};function renderPlainText(hostEl,ctx,text,style,rect){var font=setCtx(ctx,'font',style.font||textContain.DEFAULT_FONT);var textPadding=style.textPadding;var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirty){contentBlock=hostEl.__textCotentBlock=textContain.parsePlainText(text,font,textPadding,style.truncate)}var outerHeight=contentBlock.outerHeight;var textLines=contentBlock.lines;var lineHeight=contentBlock.lineHeight;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign;var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxY=textContain.adjustTextY(baseY,outerHeight,textVerticalAlign);var textX=baseX;var textY=boxY;var needDrawBg=needDrawBackground(style);if(needDrawBg||textPadding){var textWidth=textContain.getWidth(text,font);var outerWidth=textWidth;textPadding&&(outerWidth+=textPadding[1]+textPadding[3]);var boxX=textContain.adjustTextX(baseX,outerWidth,textAlign);needDrawBg&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);if(textPadding){textX=getTextXForPadding(baseX,textAlign,textPadding);textY+=textPadding[0]}}setCtx(ctx,'textAlign',textAlign||'left');setCtx(ctx,'textBaseline','middle');setCtx(ctx,'shadowBlur',style.textShadowBlur||0);setCtx(ctx,'shadowColor',style.textShadowColor||'transparent');setCtx(ctx,'shadowOffsetX',style.textShadowOffsetX||0);setCtx(ctx,'shadowOffsetY',style.textShadowOffsetY||0);textY+=lineHeight/2;var textStrokeWidth=style.textStrokeWidth;var textStroke=getStroke(style.textStroke,textStrokeWidth);var textFill=getFill(style.textFill);if(textStroke){setCtx(ctx,'lineWidth',textStrokeWidth);setCtx(ctx,'strokeStyle',textStroke)}if(textFill){setCtx(ctx,'fillStyle',textFill)}for(var i=0;i<textLines.length;i++){textStroke&&ctx.strokeText(textLines[i],textX,textY);textFill&&ctx.fillText(textLines[i],textX,textY);textY+=lineHeight}}function renderRichText(hostEl,ctx,text,style,rect){var contentBlock=hostEl.__textCotentBlock;if(!contentBlock||hostEl.__dirty){contentBlock=hostEl.__textCotentBlock=textContain.parseRichText(text,style)}drawRichText(hostEl,ctx,contentBlock,style,rect)}function drawRichText(hostEl,ctx,contentBlock,style,rect){var contentWidth=contentBlock.width;var outerWidth=contentBlock.outerWidth;var outerHeight=contentBlock.outerHeight;var textPadding=style.textPadding;var boxPos=getBoxPosition(outerHeight,style,rect);var baseX=boxPos.baseX;var baseY=boxPos.baseY;var textAlign=boxPos.textAlign;var textVerticalAlign=boxPos.textVerticalAlign;applyTextRotation(ctx,style,rect,baseX,baseY);var boxX=textContain.adjustTextX(baseX,outerWidth,textAlign);var boxY=textContain.adjustTextY(baseY,outerHeight,textVerticalAlign);var xLeft=boxX;var lineTop=boxY;if(textPadding){xLeft+=textPadding[3];lineTop+=textPadding[0]}var xRight=xLeft+contentWidth;needDrawBackground(style)&&drawBackground(hostEl,ctx,style,boxX,boxY,outerWidth,outerHeight);for(var i=0;i<contentBlock.lines.length;i++){var line=contentBlock.lines[i];var tokens=line.tokens;var tokenCount=tokens.length;var lineHeight=line.lineHeight;var usedWidth=line.width;var leftIndex=0;var lineXLeft=xLeft;var lineXRight=xRight;var rightIndex=tokenCount-1;var token;while(leftIndex<tokenCount&&(token=tokens[leftIndex],!token.textAlign||token.textAlign==='left')){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft,'left');usedWidth-=token.width;lineXLeft+=token.width;leftIndex++}while(rightIndex>=0&&(token=tokens[rightIndex],token.textAlign==='right')){placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXRight,'right');usedWidth-=token.width;lineXRight-=token.width;rightIndex--}lineXLeft+=(contentWidth-(lineXLeft-xLeft)-(xRight-lineXRight)-usedWidth)/2;while(leftIndex<=rightIndex){token=tokens[leftIndex];placeToken(hostEl,ctx,token,style,lineHeight,lineTop,lineXLeft+token.width/2,'center');lineXLeft+=token.width;leftIndex++}lineTop+=lineHeight}}function applyTextRotation(ctx,style,rect,x,y){if(rect&&style.textRotation){var origin=style.textOrigin;if(origin==='center'){x=rect.width/2+rect.x;y=rect.height/2+rect.y}else if(origin){x=origin[0]+rect.x;y=origin[1]+rect.y}ctx.translate(x,y);ctx.rotate(-style.textRotation);ctx.translate(-x,-y)}}function placeToken(hostEl,ctx,token,style,lineHeight,lineTop,x,textAlign){var tokenStyle=style.rich[token.styleName]||{};var textVerticalAlign=token.textVerticalAlign;var y=lineTop+lineHeight/2;if(textVerticalAlign==='top'){y=lineTop+token.height/2}else if(textVerticalAlign==='bottom'){y=lineTop+lineHeight-token.height/2}!token.isLineHolder&&needDrawBackground(tokenStyle)&&drawBackground(hostEl,ctx,tokenStyle,textAlign==='right'?x-token.width:textAlign==='center'?x-token.width/2:x,y-token.height/2,token.width,token.height);var textPadding=token.textPadding;if(textPadding){x=getTextXForPadding(x,textAlign,textPadding);y-=token.height/2-textPadding[2]-token.textHeight/2}setCtx(ctx,'shadowBlur',retrieve3(tokenStyle.textShadowBlur,style.textShadowBlur,0));setCtx(ctx,'shadowColor',tokenStyle.textShadowColor||style.textShadowColor||'transparent');setCtx(ctx,'shadowOffsetX',retrieve3(tokenStyle.textShadowOffsetX,style.textShadowOffsetX,0));setCtx(ctx,'shadowOffsetY',retrieve3(tokenStyle.textShadowOffsetY,style.textShadowOffsetY,0));setCtx(ctx,'textAlign',textAlign);setCtx(ctx,'textBaseline','middle');setCtx(ctx,'font',token.font||textContain.DEFAULT_FONT);var textStroke=getStroke(tokenStyle.textStroke||style.textStroke,textStrokeWidth);var textFill=getFill(tokenStyle.textFill||style.textFill);var textStrokeWidth=retrieve2(tokenStyle.textStrokeWidth,style.textStrokeWidth);if(textStroke){setCtx(ctx,'lineWidth',textStrokeWidth);setCtx(ctx,'strokeStyle',textStroke);ctx.strokeText(token.text,x,y)}if(textFill){setCtx(ctx,'fillStyle',textFill);ctx.fillText(token.text,x,y)}}function needDrawBackground(style){return style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor)}function drawBackground(hostEl,ctx,style,x,y,width,height){var textBackgroundColor=style.textBackgroundColor;var textBorderWidth=style.textBorderWidth;var textBorderColor=style.textBorderColor;var isPlainBg=util.isString(textBackgroundColor);setCtx(ctx,'shadowBlur',style.textBoxShadowBlur||0);setCtx(ctx,'shadowColor',style.textBoxShadowColor||'transparent');setCtx(ctx,'shadowOffsetX',style.textBoxShadowOffsetX||0);setCtx(ctx,'shadowOffsetY',style.textBoxShadowOffsetY||0);if(isPlainBg||(textBorderWidth&&textBorderColor)){ctx.beginPath();var textBorderRadius=style.textBorderRadius;if(!textBorderRadius){ctx.rect(x,y,width,height)}else{roundRectHelper.buildPath(ctx,{x:x,y:y,width:width,height:height,r:textBorderRadius})}ctx.closePath()}if(isPlainBg){setCtx(ctx,'fillStyle',textBackgroundColor);ctx.fill()}else if(util.isObject(textBackgroundColor)){var image=textBackgroundColor.image;image=imageHelper.createOrUpdateImage(image,null,hostEl,onBgImageLoaded,textBackgroundColor);if(image&&imageHelper.isImageReady(image)){ctx.drawImage(image,x,y,width,height)}}if(textBorderWidth&&textBorderColor){setCtx(ctx,'lineWidth',textBorderWidth);setCtx(ctx,'strokeStyle',textBorderColor);ctx.stroke()}}function onBgImageLoaded(image,textBackgroundColor){textBackgroundColor.image=image}function getBoxPosition(blockHeiht,style,rect){var baseX=style.x||0;var baseY=style.y||0;var textAlign=style.textAlign;var textVerticalAlign=style.textVerticalAlign;if(rect){var textPosition=style.textPosition;if(textPosition instanceof Array){baseX=rect.x+parsePercent(textPosition[0],rect.width);baseY=rect.y+parsePercent(textPosition[1],rect.height)}else{var res=textContain.adjustTextPositionOnRect(textPosition,rect,style.textDistance);baseX=res.x;baseY=res.y;textAlign=textAlign||res.textAlign;textVerticalAlign=textVerticalAlign||res.textVerticalAlign}var textOffset=style.textOffset;if(textOffset){baseX+=textOffset[0];baseY+=textOffset[1]}}return{baseX:baseX,baseY:baseY,textAlign:textAlign,textVerticalAlign:textVerticalAlign}}function setCtx(ctx,prop,value){ctx[prop]=value;return ctx[prop]}var getStroke=helper.getStroke=function(stroke,lineWidth){return(stroke==null||lineWidth<=0||stroke==='transparent'||stroke==='none')?null:(stroke.image||stroke.colorStops)?'#000':stroke};var getFill=helper.getFill=function(fill){return(fill==null||fill==='none')?null:(fill.image||fill.colorStops)?'#000':fill};function parsePercent(value,maxValue){if(typeof value==='string'){if(value.lastIndexOf('%')>=0){return parseFloat(value)/100*maxValue}return parseFloat(value)}return value}function getTextXForPadding(x,textAlign,textPadding){return textAlign==='right'?(x-textPadding[1]):textAlign==='center'?(x+textPadding[3]/2-textPadding[1]/2):(x+textPadding[3])}helper.needDrawText=function(text,style){return text!=null&&(text||style.textBackgroundColor||(style.textBorderWidth&&style.textBorderColor)||style.textPadding)};module.exports=helper}),(function(module,exports){module.exports={buildPath:function(ctx,shape){var x=shape.x;var y=shape.y;var width=shape.width;var height=shape.height;var r=shape.r;var r1;var r2;var r3;var r4;if(width<0){x=x+width;width=-width}if(height<0){y=y+height;height=-height}if(typeof r==='number'){r1=r2=r3=r4=r}else if(r instanceof Array){if(r.length===1){r1=r2=r3=r4=r[0]}else if(r.length===2){r1=r3=r[0];r2=r4=r[1]}else if(r.length===3){r1=r[0];r2=r4=r[1];r3=r[2]}else{r1=r[0];r2=r[1];r3=r[2];r4=r[3]}}else{r1=r2=r3=r4=0}var total;if(r1+r2>width){total=r1+r2;r1*=width/total;r2*=width/total}if(r3+r4>width){total=r3+r4;r3*=width/total;r4*=width/total}if(r2+r3>height){total=r2+r3;r2*=height/total;r3*=height/total}if(r1+r4>height){total=r1+r4;r1*=height/total;r4*=height/total}ctx.moveTo(x+r1,y);ctx.lineTo(x+width-r2,y);r2!==0&&ctx.quadraticCurveTo(x+width,y,x+width,y+r2);ctx.lineTo(x+width,y+height-r3);r3!==0&&ctx.quadraticCurveTo(x+width,y+height,x+width-r3,y+height);ctx.lineTo(x+r4,y+height);r4!==0&&ctx.quadraticCurveTo(x,y+height,x,y+height-r4);ctx.lineTo(x,y+r1);r1!==0&&ctx.quadraticCurveTo(x,y,x+r1,y)}}}),(function(module,exports){var PI2=Math.PI*2;module.exports={normalizeRadian:function(angle){angle%=PI2;if(angle<0){angle+=PI2}return angle}}}),(function(module,exports,__webpack_require__){var smoothSpline=__webpack_require__(64);var smoothBezier=__webpack_require__(65);module.exports={buildPath:function(ctx,shape,closePath){var points=shape.points;var smooth=shape.smooth;if(points&&points.length>=2){if(smooth&&smooth!=='spline'){var controlPoints=smoothBezier(points,smooth,closePath,shape.smoothConstraint);ctx.moveTo(points[0][0],points[0][1]);var len=points.length;for(var i=0;i<(closePath?len:len-1);i++){var cp1=controlPoints[i*2];var cp2=controlPoints[i*2+1];var p=points[(i+1)%len];ctx.bezierCurveTo(cp1[0],cp1[1],cp2[0],cp2[1],p[0],p[1])}}else{if(smooth==='spline'){points=smoothSpline(points,closePath)}ctx.moveTo(points[0][0],points[0][1]);for(var i=1,l=points.length;i<l;i++){ctx.lineTo(points[i][0],points[i][1])}}closePath&&ctx.closePath()}}}}),(function(module,exports){var Gradient=function(colorStops){this.colorStops=colorStops||[]};Gradient.prototype={constructor:Gradient,addColorStop:function(offset,color){this.colorStops.push({offset:offset,color:color})}};module.exports=Gradient}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(26)}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(7);var layoutUtil=__webpack_require__(27);__webpack_require__(28);__webpack_require__(75);var wordCloudLayoutHelper=__webpack_require__(76);if(!wordCloudLayoutHelper.isSupported){throw new Error('Sorry your browser not support wordCloud');}function updateCanvasMask(maskCanvas){var ctx=maskCanvas.getContext('2d');var imageData=ctx.getImageData(0,0,maskCanvas.width,maskCanvas.height);var newImageData=ctx.createImageData(imageData);var toneSum=0;var toneCnt=0;for(var i=0;i<imageData.data.length;i+=4){var alpha=imageData.data[i+3];if(alpha>128){var tone=imageData.data[i]+imageData.data[i+1]+imageData.data[i+2];toneSum+=tone;++toneCnt}}var threshold=toneSum/toneCnt;for(var i=0;i<imageData.data.length;i+=4){var tone=imageData.data[i]+imageData.data[i+1]+imageData.data[i+2];var alpha=imageData.data[i+3];if(alpha<128||tone>threshold){newImageData.data[i]=0;newImageData.data[i+1]=0;newImageData.data[i+2]=0;newImageData.data[i+3]=0}else{newImageData.data[i]=255;newImageData.data[i+1]=255;newImageData.data[i+2]=255;newImageData.data[i+3]=255}}ctx.putImageData(newImageData,0,0)}echarts.registerLayout(function(ecModel,api){ecModel.eachSeriesByType('wordCloud',function(seriesModel){var gridRect=layoutUtil.getLayoutRect(seriesModel.getBoxLayoutParams(),{width:api.getWidth(),height:api.getHeight()});var data=seriesModel.getData();var canvas=document.createElement('canvas');canvas.width=gridRect.width;canvas.height=gridRect.height;var ctx=canvas.getContext('2d');var maskImage=seriesModel.get('maskImage');if(maskImage){try{ctx.drawImage(maskImage,0,0,canvas.width,canvas.height);updateCanvasMask(canvas)}catch(e){console.error('Invalid mask image');console.error(e.toString())}}var sizeRange=seriesModel.get('sizeRange');var rotationRange=seriesModel.get('rotationRange');var valueExtent=data.getDataExtent('value');var DEGREE_TO_RAD=Math.PI/180;var gridSize=seriesModel.get('gridSize');wordCloudLayoutHelper(canvas,{list:data.mapArray('value',function(value,idx){var itemModel=data.getItemModel(idx);return[data.getName(idx),itemModel.get('textStyle.normal.textSize',true)||echarts.number.linearMap(value,valueExtent,sizeRange),idx]}).sort(function(a,b){return b[1]-a[1]}),fontFamily:seriesModel.get('textStyle.normal.fontFamily')||seriesModel.get('textStyle.emphasis.fontFamily')||ecModel.get('textStyle.fontFamily'),fontWeight:seriesModel.get('textStyle.normal.fontWeight')||seriesModel.get('textStyle.emphasis.fontWeight')||ecModel.get('textStyle.fontWeight'),gridSize:gridSize,ellipticity:gridRect.height/gridRect.width,minRotation:rotationRange[0]*DEGREE_TO_RAD,maxRotation:rotationRange[1]*DEGREE_TO_RAD,clearCanvas:!maskImage,rotateRatio:1,rotationStep:seriesModel.get('rotationStep')*DEGREE_TO_RAD,drawOutOfBound:seriesModel.get('drawOutOfBound'),shuffle:false,shape:seriesModel.get('shape')});function onWordCloudDrawn(e){var item=e.detail.item;if(e.detail.drawn&&seriesModel.layoutInstance.ondraw){e.detail.drawn.gx+=gridRect.x/gridSize;e.detail.drawn.gy+=gridRect.y/gridSize;seriesModel.layoutInstance.ondraw(item[0],item[1],item[2],e.detail.drawn)}}canvas.addEventListener('wordclouddrawn',onWordCloudDrawn);if(seriesModel.layoutInstance){seriesModel.layoutInstance.dispose()}seriesModel.layoutInstance={ondraw:null,dispose:function(){canvas.removeEventListener('wordclouddrawn',onWordCloudDrawn);canvas.addEventListener('wordclouddrawn',function(e){e.preventDefault()})}}})});echarts.registerPreprocessor(function(option){var series=(option||{}).series;!echarts.util.isArray(series)&&(series=series?[series]:[]);var compats=['shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY'];echarts.util.each(series,function(seriesItem){if(seriesItem&&seriesItem.type==='wordCloud'){var textStyle=seriesItem.textStyle||{};compatTextStyle(textStyle.normal);compatTextStyle(textStyle.emphasis)}});function compatTextStyle(textStyle){textStyle&&echarts.util.each(compats,function(key){if(textStyle.hasOwnProperty(key)){textStyle['text'+echarts.format.capitalFirst(key)]=textStyle[key]}})}})}),(function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(0);var BoundingRect=__webpack_require__(3);var numberUtil=__webpack_require__(9);var formatUtil=__webpack_require__(13);var parsePercent=numberUtil.parsePercent;var each=zrUtil.each;var layout={};var LOCATION_PARAMS=layout.LOCATION_PARAMS=['left','right','top','bottom','width','height'];var HV_NAMES=layout.HV_NAMES=[['width','left','right'],['height','top','bottom']];function boxLayout(orient,group,gap,maxWidth,maxHeight){var x=0;var y=0;if(maxWidth==null){maxWidth=Infinity}if(maxHeight==null){maxHeight=Infinity}var currentLineMaxSize=0;group.eachChild(function(child,idx){var position=child.position;var rect=child.getBoundingRect();var nextChild=group.childAt(idx+1);var nextChildRect=nextChild&&nextChild.getBoundingRect();var nextX;var nextY;if(orient==='horizontal'){var moveX=rect.width+(nextChildRect?(-nextChildRect.x+rect.x):0);nextX=x+moveX;if(nextX>maxWidth||child.newline){x=0;nextX=moveX;y+=currentLineMaxSize+gap;currentLineMaxSize=rect.height}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.height)}}else{var moveY=rect.height+(nextChildRect?(-nextChildRect.y+rect.y):0);nextY=y+moveY;if(nextY>maxHeight||child.newline){x+=currentLineMaxSize+gap;y=0;nextY=moveY;currentLineMaxSize=rect.width}else{currentLineMaxSize=Math.max(currentLineMaxSize,rect.width)}}if(child.newline){return}position[0]=x;position[1]=y;orient==='horizontal'?(x=nextX+gap):(y=nextY+gap)})}layout.box=boxLayout;layout.vbox=zrUtil.curry(boxLayout,'vertical');layout.hbox=zrUtil.curry(boxLayout,'horizontal');layout.getAvailableSize=function(positionInfo,containerRect,margin){var containerWidth=containerRect.width;var containerHeight=containerRect.height;var x=parsePercent(positionInfo.x,containerWidth);var y=parsePercent(positionInfo.y,containerHeight);var x2=parsePercent(positionInfo.x2,containerWidth);var y2=parsePercent(positionInfo.y2,containerHeight);(isNaN(x)||isNaN(parseFloat(positionInfo.x)))&&(x=0);(isNaN(x2)||isNaN(parseFloat(positionInfo.x2)))&&(x2=containerWidth);(isNaN(y)||isNaN(parseFloat(positionInfo.y)))&&(y=0);(isNaN(y2)||isNaN(parseFloat(positionInfo.y2)))&&(y2=containerHeight);margin=formatUtil.normalizeCssArray(margin||0);return{width:Math.max(x2-x-margin[1]-margin[3],0),height:Math.max(y2-y-margin[0]-margin[2],0)}};layout.getLayoutRect=function(positionInfo,containerRect,margin){margin=formatUtil.normalizeCssArray(margin||0);var containerWidth=containerRect.width;var containerHeight=containerRect.height;var left=parsePercent(positionInfo.left,containerWidth);var top=parsePercent(positionInfo.top,containerHeight);var right=parsePercent(positionInfo.right,containerWidth);var bottom=parsePercent(positionInfo.bottom,containerHeight);var width=parsePercent(positionInfo.width,containerWidth);var height=parsePercent(positionInfo.height,containerHeight);var verticalMargin=margin[2]+margin[0];var horizontalMargin=margin[1]+margin[3];var aspect=positionInfo.aspect;if(isNaN(width)){width=containerWidth-right-horizontalMargin-left}if(isNaN(height)){height=containerHeight-bottom-verticalMargin-top}if(aspect!=null){if(isNaN(width)&&isNaN(height)){if(aspect>containerWidth/containerHeight){width=containerWidth*0.8}else{height=containerHeight*0.8}}if(isNaN(width)){width=aspect*height}if(isNaN(height)){height=width/aspect}}if(isNaN(left)){left=containerWidth-right-width-horizontalMargin}if(isNaN(top)){top=containerHeight-bottom-height-verticalMargin}switch(positionInfo.left||positionInfo.right){case'center':left=containerWidth/2-width/2-margin[3];break;case'right':left=containerWidth-width-horizontalMargin;break}switch(positionInfo.top||positionInfo.bottom){case'middle':case'center':top=containerHeight/2-height/2-margin[0];break;case'bottom':top=containerHeight-height-verticalMargin;break}left=left||0;top=top||0;if(isNaN(width)){width=containerWidth-horizontalMargin-left-(right||0)}if(isNaN(height)){height=containerHeight-verticalMargin-top-(bottom||0)}var rect=new BoundingRect(left+margin[3],top+margin[0],width,height);rect.margin=margin;return rect};layout.positionElement=function(el,positionInfo,containerRect,margin,opt){var h=!opt||!opt.hv||opt.hv[0];var v=!opt||!opt.hv||opt.hv[1];var boundingMode=opt&&opt.boundingMode||'all';if(!h&&!v){return}var rect;if(boundingMode==='raw'){rect=el.type==='group'?new BoundingRect(0,0,+positionInfo.width||0,+positionInfo.height||0):el.getBoundingRect()}else{rect=el.getBoundingRect();if(el.needLocalTransform()){var transform=el.getLocalTransform();rect=rect.clone();rect.applyTransform(transform)}}positionInfo=layout.getLayoutRect(zrUtil.defaults({width:rect.width,height:rect.height},positionInfo),containerRect,margin);var elPos=el.position;var dx=h?positionInfo.x-rect.x:0;var dy=v?positionInfo.y-rect.y:0;el.attr('position',boundingMode==='raw'?[dx,dy]:[elPos[0]+dx,elPos[1]+dy])};layout.sizeCalculable=function(option,hvIdx){return option[HV_NAMES[hvIdx][0]]!=null||(option[HV_NAMES[hvIdx][1]]!=null&&option[HV_NAMES[hvIdx][2]]!=null)};layout.mergeLayoutParam=function(targetOption,newOption,opt){!zrUtil.isObject(opt)&&(opt={});var ignoreSize=opt.ignoreSize;!zrUtil.isArray(ignoreSize)&&(ignoreSize=[ignoreSize,ignoreSize]);var hResult=merge(HV_NAMES[0],0);var vResult=merge(HV_NAMES[1],1);copy(HV_NAMES[0],targetOption,hResult);copy(HV_NAMES[1],targetOption,vResult);function merge(names,hvIdx){var newParams={};var newValueCount=0;var merged={};var mergedValueCount=0;var enoughParamNumber=2;each(names,function(name){merged[name]=targetOption[name]});each(names,function(name){hasProp(newOption,name)&&(newParams[name]=merged[name]=newOption[name]);hasValue(newParams,name)&&newValueCount++;hasValue(merged,name)&&mergedValueCount++});if(ignoreSize[hvIdx]){if(hasValue(newOption,names[1])){merged[names[2]]=null}else if(hasValue(newOption,names[2])){merged[names[1]]=null}return merged}if(mergedValueCount===enoughParamNumber||!newValueCount){return merged}else if(newValueCount>=enoughParamNumber){return newParams}else{for(var i=0;i<names.length;i++){var name=names[i];if(!hasProp(newParams,name)&&hasProp(targetOption,name)){newParams[name]=targetOption[name];break}}return newParams}}function hasProp(obj,name){return obj.hasOwnProperty(name)}function hasValue(obj,name){return obj[name]!=null&&obj[name]!=='auto'}function copy(names,target,source){each(names,function(name){target[name]=source[name]})}};layout.getLayoutParams=function(source){return layout.copyLayoutParams({},source)};layout.copyLayoutParams=function(target,source){source&&target&&each(LOCATION_PARAMS,function(name){source.hasOwnProperty(name)&&(target[name]=source[name])});return target};module.exports=layout}),(function(module,exports,__webpack_require__){var completeDimensions=__webpack_require__(29);var echarts=__webpack_require__(7);echarts.extendSeriesModel({type:'series.wordCloud',visualColorAccessPath:'textStyle.normal.color',optionUpdated:function(){var option=this.option;option.gridSize=Math.max(Math.floor(option.gridSize),4)},getInitialData:function(option,ecModel){var dimensions=completeDimensions(['value'],option.data);var list=new echarts.List(dimensions,this);list.initData(option.data);return list},defaultOption:{maskImage:null,shape:'circle',left:'center',top:'center',width:'70%',height:'80%',sizeRange:[12,60],rotationRange:[-90,90],rotationStep:45,gridSize:8,drawOutOfBound:false,textStyle:{normal:{fontWeight:'normal'}}}})}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var modelUtil=__webpack_require__(30);var each=zrUtil.each;var isString=zrUtil.isString;var defaults=zrUtil.defaults;var normalizeToArray=modelUtil.normalizeToArray;var OTHER_DIMS={tooltip:1,label:1,itemName:1};function completeDimensions(sysDims,data,opt){data=data||[];opt=opt||{};sysDims=(sysDims||[]).slice();var dimsDef=(opt.dimsDef||[]).slice();var encodeDef=zrUtil.createHashMap(opt.encodeDef);var dataDimNameMap=zrUtil.createHashMap();var coordDimNameMap=zrUtil.createHashMap();var result=[];var dimCount=opt.dimCount;if(dimCount==null){var value0=retrieveValue(data[0]);dimCount=Math.max(zrUtil.isArray(value0)&&value0.length||1,sysDims.length,dimsDef.length);each(sysDims,function(sysDimItem){var sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemDimsDef&&(dimCount=Math.max(dimCount,sysDimItemDimsDef.length))})}for(var i=0;i<dimCount;i++){var dimDefItem=isString(dimsDef[i])?{name:dimsDef[i]}:(dimsDef[i]||{});var userDimName=dimDefItem.name;var resultItem=result[i]={otherDims:{}};if(userDimName!=null&&dataDimNameMap.get(userDimName)==null){resultItem.name=resultItem.tooltipName=userDimName;dataDimNameMap.set(userDimName,i)}dimDefItem.type!=null&&(resultItem.type=dimDefItem.type)}encodeDef.each(function(dataDims,coordDim){dataDims=encodeDef.set(coordDim,normalizeToArray(dataDims).slice());each(dataDims,function(resultDimIdx,coordDimIndex){isString(resultDimIdx)&&(resultDimIdx=dataDimNameMap.get(resultDimIdx));if(resultDimIdx!=null&&resultDimIdx<dimCount){dataDims[coordDimIndex]=resultDimIdx;applyDim(result[resultDimIdx],coordDim,coordDimIndex)}})});var availDimIdx=0;each(sysDims,function(sysDimItem,sysDimIndex){var coordDim;var sysDimItem;var sysDimItemDimsDef;var sysDimItemOtherDims;if(isString(sysDimItem)){coordDim=sysDimItem;sysDimItem={}}else{coordDim=sysDimItem.name;sysDimItem=zrUtil.clone(sysDimItem);sysDimItemDimsDef=sysDimItem.dimsDef;sysDimItemOtherDims=sysDimItem.otherDims;sysDimItem.name=sysDimItem.coordDim=sysDimItem.coordDimIndex=sysDimItem.dimsDef=sysDimItem.otherDims=null}var dataDims=normalizeToArray(encodeDef.get(coordDim));if(!dataDims.length){for(var i=0;i<(sysDimItemDimsDef&&sysDimItemDimsDef.length||1);i++){while(availDimIdx<result.length&&result[availDimIdx].coordDim!=null){availDimIdx++}availDimIdx<result.length&&dataDims.push(availDimIdx++)}}each(dataDims,function(resultDimIdx,coordDimIndex){var resultItem=result[resultDimIdx];applyDim(defaults(resultItem,sysDimItem),coordDim,coordDimIndex);if(resultItem.name==null&&sysDimItemDimsDef){resultItem.name=resultItem.tooltipName=sysDimItemDimsDef[coordDimIndex]}sysDimItemOtherDims&&defaults(resultItem.otherDims,sysDimItemOtherDims)})});var extra=opt.extraPrefix||'value';for(var resultDimIdx=0;resultDimIdx<dimCount;resultDimIdx++){var resultItem=result[resultDimIdx]=result[resultDimIdx]||{};var coordDim=resultItem.coordDim;coordDim==null&&(resultItem.coordDim=genName(extra,coordDimNameMap,opt.extraFromZero),resultItem.coordDimIndex=0,resultItem.isExtraCoord=true);resultItem.name==null&&(resultItem.name=genName(resultItem.coordDim,dataDimNameMap));resultItem.type==null&&guessOrdinal(data,resultDimIdx)&&(resultItem.type='ordinal')}return result;function applyDim(resultItem,coordDim,coordDimIndex){if(OTHER_DIMS[coordDim]){resultItem.otherDims[coordDim]=coordDimIndex}else{resultItem.coordDim=coordDim;resultItem.coordDimIndex=coordDimIndex;coordDimNameMap.set(coordDim,true)}}function genName(name,map,fromZero){if(fromZero||map.get(name)!=null){var i=0;while(map.get(name+i)!=null){i++}name+=i}map.set(name,true);return name}}var guessOrdinal=completeDimensions.guessOrdinal=function(data,dimIndex){for(var i=0,len=data.length;i<len;i++){var value=retrieveValue(data[i]);if(!zrUtil.isArray(value)){return false}var value=value[dimIndex];if(value!=null&&isFinite(value)&&value!==''){return false}else if(isString(value)&&value!=='-'){return true}}return false};function retrieveValue(o){return zrUtil.isArray(o)?o:zrUtil.isObject(o)?o.value:o}module.exports=completeDimensions}),(function(module,exports,__webpack_require__){var formatUtil=__webpack_require__(13);var nubmerUtil=__webpack_require__(9);var Model=__webpack_require__(31);var zrUtil=__webpack_require__(0);var each=zrUtil.each;var isObject=zrUtil.isObject;var modelUtil={};modelUtil.normalizeToArray=function(value){return value instanceof Array?value:value==null?[]:[value]};modelUtil.defaultEmphasis=function(opt,subOpts){if(opt){var emphasisOpt=opt.emphasis=opt.emphasis||{};var normalOpt=opt.normal=opt.normal||{};for(var i=0,len=subOpts.length;i<len;i++){var subOptName=subOpts[i];if(!emphasisOpt.hasOwnProperty(subOptName)&&normalOpt.hasOwnProperty(subOptName)){emphasisOpt[subOptName]=normalOpt[subOptName]}}}};modelUtil.TEXT_STYLE_OPTIONS=['fontStyle','fontWeight','fontSize','fontFamily','rich','tag','color','textBorderColor','textBorderWidth','width','height','lineHeight','align','verticalAlign','baseline','shadowColor','shadowBlur','shadowOffsetX','shadowOffsetY','textShadowColor','textShadowBlur','textShadowOffsetX','textShadowOffsetY','backgroundColor','borderColor','borderWidth','borderRadius','padding'];modelUtil.getDataItemValue=function(dataItem){return dataItem&&(dataItem.value==null?dataItem:dataItem.value)};modelUtil.isDataItemOption=function(dataItem){return isObject(dataItem)&&!(dataItem instanceof Array)};modelUtil.converDataValue=function(value,dimInfo){var dimType=dimInfo&&dimInfo.type;if(dimType==='ordinal'){return value}if(dimType==='time'&&typeof value!=='number'&&value!=null&&value!=='-'){value=+nubmerUtil.parseDate(value)}return(value==null||value==='')?NaN:+value};modelUtil.createDataFormatModel=function(data,opt){var model=new Model();zrUtil.mixin(model,modelUtil.dataFormatMixin);model.seriesIndex=opt.seriesIndex;model.name=opt.name||'';model.mainType=opt.mainType;model.subType=opt.subType;model.getData=function(){return data};return model};modelUtil.dataFormatMixin={getDataParams:function(dataIndex,dataType){var data=this.getData(dataType);var rawValue=this.getRawValue(dataIndex,dataType);var rawDataIndex=data.getRawIndex(dataIndex);var name=data.getName(dataIndex,true);var itemOpt=data.getRawDataItem(dataIndex);var color=data.getItemVisual(dataIndex,'color');return{componentType:this.mainType,componentSubType:this.subType,seriesType:this.mainType==='series'?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:name,dataIndex:rawDataIndex,data:itemOpt,dataType:dataType,value:rawValue,color:color,marker:formatUtil.getTooltipMarker(color),$vars:['seriesName','name','value']}},getFormattedLabel:function(dataIndex,status,dataType,dimIndex,labelProp){status=status||'normal';var data=this.getData(dataType);var itemModel=data.getItemModel(dataIndex);var params=this.getDataParams(dataIndex,dataType);if(dimIndex!=null&&(params.value instanceof Array)){params.value=params.value[dimIndex]}var formatter=itemModel.get([labelProp||'label',status,'formatter']);if(typeof formatter==='function'){params.status=status;return formatter(params)}else if(typeof formatter==='string'){return formatUtil.formatTpl(formatter,params)}},getRawValue:function(idx,dataType){var data=this.getData(dataType);var dataItem=data.getRawDataItem(idx);if(dataItem!=null){return(isObject(dataItem)&&!(dataItem instanceof Array))?dataItem.value:dataItem}},formatTooltip:zrUtil.noop};modelUtil.mappingToExists=function(exists,newCptOptions){newCptOptions=(newCptOptions||[]).slice();var result=zrUtil.map(exists||[],function(obj,index){return{exist:obj}});each(newCptOptions,function(cptOption,index){if(!isObject(cptOption)){return}for(var i=0;i<result.length;i++){if(!result[i].option&&cptOption.id!=null&&result[i].exist.id===cptOption.id+''){result[i].option=cptOption;newCptOptions[index]=null;return}}for(var i=0;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&(exist.id==null||cptOption.id==null)&&cptOption.name!=null&&!modelUtil.isIdInner(cptOption)&&!modelUtil.isIdInner(exist)&&exist.name===cptOption.name+''){result[i].option=cptOption;newCptOptions[index]=null;return}}});each(newCptOptions,function(cptOption,index){if(!isObject(cptOption)){return}var i=0;for(;i<result.length;i++){var exist=result[i].exist;if(!result[i].option&&!modelUtil.isIdInner(exist)&&cptOption.id==null){result[i].option=cptOption;break}}if(i>=result.length){result.push({option:cptOption})}});return result};modelUtil.makeIdAndName=function(mapResult){var idMap=zrUtil.createHashMap();each(mapResult,function(item,index){var existCpt=item.exist;existCpt&&idMap.set(existCpt.id,item)});each(mapResult,function(item,index){var opt=item.option;zrUtil.assert(!opt||opt.id==null||!idMap.get(opt.id)||idMap.get(opt.id)===item,'id duplicates: '+(opt&&opt.id));opt&&opt.id!=null&&idMap.set(opt.id,item);!item.keyInfo&&(item.keyInfo={})});each(mapResult,function(item,index){var existCpt=item.exist;var opt=item.option;var keyInfo=item.keyInfo;if(!isObject(opt)){return}keyInfo.name=opt.name!=null?opt.name+'':existCpt?existCpt.name:'\0-';if(existCpt){keyInfo.id=existCpt.id}else if(opt.id!=null){keyInfo.id=opt.id+''}else{var idNum=0;do{keyInfo.id='\0'+keyInfo.name+'\0'+idNum++}while(idMap.get(keyInfo.id))}idMap.set(keyInfo.id,item)})};modelUtil.isIdInner=function(cptOption){return isObject(cptOption)&&cptOption.id&&(cptOption.id+'').indexOf('\0_ec_\0')===0};modelUtil.compressBatches=function(batchA,batchB){var mapA={};var mapB={};makeMap(batchA||[],mapA);makeMap(batchB||[],mapB,mapA);return[mapToArray(mapA),mapToArray(mapB)];function makeMap(sourceBatch,map,otherMap){for(var i=0,len=sourceBatch.length;i<len;i++){var seriesId=sourceBatch[i].seriesId;var dataIndices=modelUtil.normalizeToArray(sourceBatch[i].dataIndex);var otherDataIndices=otherMap&&otherMap[seriesId];for(var j=0,lenj=dataIndices.length;j<lenj;j++){var dataIndex=dataIndices[j];if(otherDataIndices&&otherDataIndices[dataIndex]){otherDataIndices[dataIndex]=null}else{(map[seriesId]||(map[seriesId]={}))[dataIndex]=1}}}}function mapToArray(map,isData){var result=[];for(var i in map){if(map.hasOwnProperty(i)&&map[i]!=null){if(isData){result.push(+i)}else{var dataIndices=mapToArray(map[i],true);dataIndices.length&&result.push({seriesId:i,dataIndex:dataIndices})}}}return result}};modelUtil.queryDataIndex=function(data,payload){if(payload.dataIndexInside!=null){return payload.dataIndexInside}else if(payload.dataIndex!=null){return zrUtil.isArray(payload.dataIndex)?zrUtil.map(payload.dataIndex,function(value){return data.indexOfRawIndex(value)}):data.indexOfRawIndex(payload.dataIndex)}else if(payload.name!=null){return zrUtil.isArray(payload.name)?zrUtil.map(payload.name,function(value){return data.indexOfName(value)}):data.indexOfName(payload.name)}};modelUtil.makeGetter=(function(){var index=0;return function(){var key='\0__ec_prop_getter_'+index++;return function(hostObj){return hostObj[key]||(hostObj[key]={})}}})();modelUtil.parseFinder=function(ecModel,finder,opt){if(zrUtil.isString(finder)){var obj={};obj[finder+'Index']=0;finder=obj}var defaultMainType=opt&&opt.defaultMainType;if(defaultMainType&&!has(finder,defaultMainType+'Index')&&!has(finder,defaultMainType+'Id')&&!has(finder,defaultMainType+'Name')){finder[defaultMainType+'Index']=0}var result={};each(finder,function(value,key){var value=finder[key];if(key==='dataIndex'||key==='dataIndexInside'){result[key]=value;return}var parsedKey=key.match(/^(\w+)(Index|Id|Name)$/)||[];var mainType=parsedKey[1];var queryType=(parsedKey[2]||'').toLowerCase();if(!mainType||!queryType||value==null||(queryType==='index'&&value==='none')||(opt&&opt.includeMainTypes&&zrUtil.indexOf(opt.includeMainTypes,mainType)<0)){return}var queryParam={mainType:mainType};if(queryType!=='index'||value!=='all'){queryParam[queryType]=value}var models=ecModel.queryComponents(queryParam);result[mainType+'Models']=models;result[mainType+'Model']=models[0]});return result};modelUtil.dataDimToCoordDim=function(data,dataDim){var dimensions=data.dimensions;dataDim=data.getDimension(dataDim);for(var i=0;i<dimensions.length;i++){var dimItem=data.getDimensionInfo(dimensions[i]);if(dimItem.name===dataDim){return dimItem.coordDim}}};modelUtil.coordDimToDataDim=function(data,coordDim){var dataDim=[];each(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName);if(dimItem.coordDim===coordDim){dataDim[dimItem.coordDimIndex]=dimItem.name}});return dataDim};modelUtil.otherDimToDataDim=function(data,otherDim){var dataDim=[];each(data.dimensions,function(dimName){var dimItem=data.getDimensionInfo(dimName);var otherDims=dimItem.otherDims;var dimIndex=otherDims[otherDim];if(dimIndex!=null&&dimIndex!==false){dataDim[dimIndex]=dimItem.name}});return dataDim};function has(obj,prop){return obj&&obj.hasOwnProperty(prop)}module.exports=modelUtil}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var clazzUtil=__webpack_require__(32);var env=__webpack_require__(15);function Model(option,parentModel,ecModel){this.parentModel=parentModel;this.ecModel=ecModel;this.option=option}Model.prototype={constructor:Model,init:null,mergeOption:function(option){zrUtil.merge(this.option,option,true)},get:function(path,ignoreParent){if(path==null){return this.option}return doGet(this.option,this.parsePath(path),!ignoreParent&&getParent(this,path))},getShallow:function(key,ignoreParent){var option=this.option;var val=option==null?option:option[key];var parentModel=!ignoreParent&&getParent(this,key);if(val==null&&parentModel){val=parentModel.getShallow(key)}return val},getModel:function(path,parentModel){var obj=path==null?this.option:doGet(this.option,path=this.parsePath(path));var thisParentModel;parentModel=parentModel||((thisParentModel=getParent(this,path))&&thisParentModel.getModel(path));return new Model(obj,parentModel,this.ecModel)},isEmpty:function(){return this.option==null},restoreData:function(){},clone:function(){var Ctor=this.constructor;return new Ctor(zrUtil.clone(this.option))},setReadOnly:function(properties){clazzUtil.setReadOnly(this,properties)},parsePath:function(path){if(typeof path==='string'){path=path.split('.')}return path},customizeGetParent:function(getParentMethod){clazzUtil.set(this,'getParent',getParentMethod)},isAnimationEnabled:function(){if(!env.node){if(this.option.animation!=null){return!!this.option.animation}else if(this.parentModel){return this.parentModel.isAnimationEnabled()}}}};function doGet(obj,pathArr,parentModel){for(var i=0;i<pathArr.length;i++){if(!pathArr[i]){continue}obj=(obj&&typeof obj==='object')?obj[pathArr[i]]:null;if(obj==null){break}}if(obj==null&&parentModel){obj=parentModel.get(pathArr)}return obj}function getParent(model,path){var getParentMethod=clazzUtil.get(model,'getParent');return getParentMethod?getParentMethod.call(model,path):model.parentModel}clazzUtil.enableClassExtend(Model);var mixin=zrUtil.mixin;mixin(Model,__webpack_require__(33));mixin(Model,__webpack_require__(34));mixin(Model,__webpack_require__(35));mixin(Model,__webpack_require__(74));module.exports=Model}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var clazz={};var TYPE_DELIMITER='.';var IS_CONTAINER='___EC__COMPONENT__CONTAINER___';var MEMBER_PRIFIX='\0ec_\0';clazz.set=function(host,name,value){return(host[MEMBER_PRIFIX+name]=value)};clazz.get=function(host,name){return host[MEMBER_PRIFIX+name]};clazz.hasOwn=function(host,name){return host.hasOwnProperty(MEMBER_PRIFIX+name)};var parseClassType=clazz.parseClassType=function(componentType){var ret={main:'',sub:''};if(componentType){componentType=componentType.split(TYPE_DELIMITER);ret.main=componentType[0]||'';ret.sub=componentType[1]||''}return ret};function checkClassType(componentType){zrUtil.assert(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(componentType),'componentType "'+componentType+'" illegal')}clazz.enableClassExtend=function(RootClass,mandatoryMethods){RootClass.$constructor=RootClass;RootClass.extend=function(proto){if(__DEV__){zrUtil.each(mandatoryMethods,function(method){if(!proto[method]){console.warn('Method `'+method+'` should be implemented'+(proto.type?' in '+proto.type:'')+'.')}})}var superClass=this;var ExtendedClass=function(){if(!proto.$constructor){superClass.apply(this,arguments)}else{proto.$constructor.apply(this,arguments)}};zrUtil.extend(ExtendedClass.prototype,proto);ExtendedClass.extend=this.extend;ExtendedClass.superCall=superCall;ExtendedClass.superApply=superApply;zrUtil.inherits(ExtendedClass,this);ExtendedClass.superClass=superClass;return ExtendedClass}};function superCall(context,methodName){var args=zrUtil.slice(arguments,2);return this.superClass.prototype[methodName].apply(context,args)}function superApply(context,methodName,args){return this.superClass.prototype[methodName].apply(context,args)}clazz.enableClassManagement=function(entity,options){options=options||{};var storage={};entity.registerClass=function(Clazz,componentType){if(componentType){checkClassType(componentType);componentType=parseClassType(componentType);if(!componentType.sub){if(__DEV__){if(storage[componentType.main]){console.warn(componentType.main+' exists.')}}storage[componentType.main]=Clazz}else if(componentType.sub!==IS_CONTAINER){var container=makeContainer(componentType);container[componentType.sub]=Clazz}}return Clazz};entity.getClass=function(componentMainType,subType,throwWhenNotFound){var Clazz=storage[componentMainType];if(Clazz&&Clazz[IS_CONTAINER]){Clazz=subType?Clazz[subType]:null}if(throwWhenNotFound&&!Clazz){throw new Error(!subType?componentMainType+'.type should be specified.':'Component '+componentMainType+'.'+(subType||'')+' not exists. Load it first.');}return Clazz};entity.getClassesByMainType=function(componentType){componentType=parseClassType(componentType);var result=[];var obj=storage[componentType.main];if(obj&&obj[IS_CONTAINER]){zrUtil.each(obj,function(o,type){type!==IS_CONTAINER&&result.push(o)})}else{result.push(obj)}return result};entity.hasClass=function(componentType){componentType=parseClassType(componentType);return!!storage[componentType.main]};entity.getAllClassMainTypes=function(){var types=[];zrUtil.each(storage,function(obj,type){types.push(type)});return types};entity.hasSubTypes=function(componentType){componentType=parseClassType(componentType);var obj=storage[componentType.main];return obj&&obj[IS_CONTAINER]};entity.parseClassType=parseClassType;function makeContainer(componentType){var container=storage[componentType.main];if(!container||!container[IS_CONTAINER]){container=storage[componentType.main]={};container[IS_CONTAINER]=true}return container}if(options.registerWhenExtend){var originalExtend=entity.extend;if(originalExtend){entity.extend=function(proto){var ExtendedClass=originalExtend.call(this,proto);return entity.registerClass(ExtendedClass,proto.type)}}}return entity};clazz.setReadOnly=function(obj,properties){};module.exports=clazz}),(function(module,exports,__webpack_require__){var getLineStyle=__webpack_require__(11)([['lineWidth','width'],['stroke','color'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor']]);module.exports={getLineStyle:function(excludes){var style=getLineStyle.call(this,excludes);var lineDash=this.getLineDash(style.lineWidth);lineDash&&(style.lineDash=lineDash);return style},getLineDash:function(lineWidth){if(lineWidth==null){lineWidth=1}var lineType=this.get('type');var dotSize=Math.max(lineWidth,2);var dashSize=lineWidth*4;return(lineType==='solid'||lineType==null)?null:(lineType==='dashed'?[dashSize,dashSize]:[dotSize,dotSize])}}}),(function(module,exports,__webpack_require__){module.exports={getAreaStyle:__webpack_require__(11)([['fill','color'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['opacity'],['shadowColor']])}}),(function(module,exports,__webpack_require__){var textContain=__webpack_require__(5);var graphicUtil=__webpack_require__(36);var PATH_COLOR=['textStyle','color'];module.exports={getTextColor:function(isEmphasis){var ecModel=this.ecModel;return this.getShallow('color')||((!isEmphasis&&ecModel)?ecModel.get(PATH_COLOR):null)},getFont:function(){return graphicUtil.getFont({fontStyle:this.getShallow('fontStyle'),fontWeight:this.getShallow('fontWeight'),fontSize:this.getShallow('fontSize'),fontFamily:this.getShallow('fontFamily')},this.ecModel)},getTextRect:function(text){return textContain.getBoundingRect(text,this.getFont(),this.getShallow('align'),this.getShallow('verticalAlign')||this.getShallow('baseline'),this.getShallow('padding'),this.getShallow('rich'),this.getShallow('truncateText'))}}}),(function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(0);var pathTool=__webpack_require__(37);var Path=__webpack_require__(1);var colorTool=__webpack_require__(18);var matrix=__webpack_require__(8);var vector=__webpack_require__(2);var Transformable=__webpack_require__(17);var BoundingRect=__webpack_require__(3);var round=Math.round;var mathMax=Math.max;var mathMin=Math.min;var EMPTY_OBJ={};var graphic={};graphic.Group=__webpack_require__(56);graphic.Image=__webpack_require__(57);graphic.Text=__webpack_require__(58);graphic.Circle=__webpack_require__(59);graphic.Sector=__webpack_require__(60);graphic.Ring=__webpack_require__(62);graphic.Polygon=__webpack_require__(63);graphic.Polyline=__webpack_require__(66);graphic.Rect=__webpack_require__(67);graphic.Line=__webpack_require__(68);graphic.BezierCurve=__webpack_require__(69);graphic.Arc=__webpack_require__(70);graphic.CompoundPath=__webpack_require__(71);graphic.LinearGradient=__webpack_require__(72);graphic.RadialGradient=__webpack_require__(73);graphic.BoundingRect=BoundingRect;graphic.extendShape=function(opts){return Path.extend(opts)};graphic.extendPath=function(pathData,opts){return pathTool.extendFromString(pathData,opts)};graphic.makePath=function(pathData,opts,rect,layout){var path=pathTool.createFromString(pathData,opts);var boundingRect=path.getBoundingRect();if(rect){var aspect=boundingRect.width/boundingRect.height;if(layout==='center'){var width=rect.height*aspect;var height;if(width<=rect.width){height=rect.height}else{width=rect.width;height=width/aspect}var cx=rect.x+rect.width/2;var cy=rect.y+rect.height/2;rect.x=cx-width/2;rect.y=cy-height/2;rect.width=width;rect.height=height}graphic.resizePath(path,rect)}return path};graphic.mergePath=pathTool.mergePath,graphic.resizePath=function(path,rect){if(!path.applyTransform){return}var pathRect=path.getBoundingRect();var m=pathRect.calculateTransform(rect);path.applyTransform(m)};graphic.subPixelOptimizeLine=function(param){var shape=param.shape;var lineWidth=param.style.lineWidth;if(round(shape.x1*2)===round(shape.x2*2)){shape.x1=shape.x2=subPixelOptimize(shape.x1,lineWidth,true)}if(round(shape.y1*2)===round(shape.y2*2)){shape.y1=shape.y2=subPixelOptimize(shape.y1,lineWidth,true)}return param};graphic.subPixelOptimizeRect=function(param){var shape=param.shape;var lineWidth=param.style.lineWidth;var originX=shape.x;var originY=shape.y;var originWidth=shape.width;var originHeight=shape.height;shape.x=subPixelOptimize(shape.x,lineWidth,true);shape.y=subPixelOptimize(shape.y,lineWidth,true);shape.width=Math.max(subPixelOptimize(originX+originWidth,lineWidth,false)-shape.x,originWidth===0?0:1);shape.height=Math.max(subPixelOptimize(originY+originHeight,lineWidth,false)-shape.y,originHeight===0?0:1);return param};var subPixelOptimize=graphic.subPixelOptimize=function(position,lineWidth,positiveOrNegative){var doubledPosition=round(position*2);return(doubledPosition+round(lineWidth))%2===0?doubledPosition/2:(doubledPosition+(positiveOrNegative?1:-1))/2};function hasFillOrStroke(fillOrStroke){return fillOrStroke!=null&&fillOrStroke!='none'}function liftColor(color){return typeof color==='string'?colorTool.lift(color,-0.1):color}function cacheElementStl(el){if(el.__hoverStlDirty){var stroke=el.style.stroke;var fill=el.style.fill;var hoverStyle=el.__hoverStl;hoverStyle.fill=hoverStyle.fill||(hasFillOrStroke(fill)?liftColor(fill):null);hoverStyle.stroke=hoverStyle.stroke||(hasFillOrStroke(stroke)?liftColor(stroke):null);var normalStyle={};for(var name in hoverStyle){if(hoverStyle[name]!=null){normalStyle[name]=el.style[name]}}el.__normalStl=normalStyle;el.__hoverStlDirty=false}}function doSingleEnterHover(el){if(el.__isHover){return}cacheElementStl(el);if(el.useHoverLayer){el.__zr&&el.__zr.addHover(el,el.__hoverStl)}else{var style=el.style;var insideRollbackOpt=style.insideRollbackOpt;insideRollbackOpt&&rollbackInsideStyle(style);style.extendFrom(el.__hoverStl);if(insideRollbackOpt){applyInsideStyle(style,style.insideOriginalTextPosition,insideRollbackOpt);if(style.textFill==null){style.textFill=insideRollbackOpt.autoColor}}el.dirty(false);el.z2+=1}el.__isHover=true}function doSingleLeaveHover(el){if(!el.__isHover){return}var normalStl=el.__normalStl;if(el.useHoverLayer){el.__zr&&el.__zr.removeHover(el)}else{normalStl&&el.setStyle(normalStl);el.z2-=1}el.__isHover=false}function doEnterHover(el){el.type==='group'?el.traverse(function(child){if(child.type!=='group'){doSingleEnterHover(child)}}):doSingleEnterHover(el)}function doLeaveHover(el){el.type==='group'?el.traverse(function(child){if(child.type!=='group'){doSingleLeaveHover(child)}}):doSingleLeaveHover(el)}function setElementHoverStl(el,hoverStl){el.__hoverStl=el.hoverStyle||hoverStl||{};el.__hoverStlDirty=true;if(el.__isHover){cacheElementStl(el)}}function onElementMouseOver(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasis&&doEnterHover(this)}function onElementMouseOut(e){if(this.__hoverSilentOnTouch&&e.zrByTouch){return}!this.__isEmphasis&&doLeaveHover(this)}function enterEmphasis(){this.__isEmphasis=true;doEnterHover(this)}function leaveEmphasis(){this.__isEmphasis=false;doLeaveHover(this)}graphic.setHoverStyle=function(el,hoverStyle,opt){el.__hoverSilentOnTouch=opt&&opt.hoverSilentOnTouch;el.type==='group'?el.traverse(function(child){if(child.type!=='group'){setElementHoverStl(child,hoverStyle)}}):setElementHoverStl(el,hoverStyle);el.on('mouseover',onElementMouseOver).on('mouseout',onElementMouseOut);el.on('emphasis',enterEmphasis).on('normal',leaveEmphasis)};graphic.setLabelStyle=function(normalStyle,emphasisStyle,normalModel,emphasisModel,opt,normalSpecified,emphasisSpecified){opt=opt||EMPTY_OBJ;var labelFetcher=opt.labelFetcher;var labelDataIndex=opt.labelDataIndex;var labelDimIndex=opt.labelDimIndex;var showNormal=normalModel.getShallow('show');var showEmphasis=emphasisModel.getShallow('show');var baseText=(showNormal||showEmphasis)?zrUtil.retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,'normal',null,labelDimIndex):null,opt.defaultText):null;var normalStyleText=showNormal?baseText:null;var emphasisStyleText=showEmphasis?zrUtil.retrieve2(labelFetcher?labelFetcher.getFormattedLabel(labelDataIndex,'emphasis',null,labelDimIndex):null,baseText):null;if(normalStyleText!=null||emphasisStyleText!=null){setTextStyle(normalStyle,normalModel,normalSpecified,opt);setTextStyle(emphasisStyle,emphasisModel,emphasisSpecified,opt,true)}normalStyle.text=normalStyleText;emphasisStyle.text=emphasisStyleText};var setTextStyle=graphic.setTextStyle=function(textStyle,textStyleModel,specifiedTextStyle,opt,isEmphasis){setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis);specifiedTextStyle&&zrUtil.extend(textStyle,specifiedTextStyle);textStyle.host&&textStyle.host.dirty&&textStyle.host.dirty(false);return textStyle};graphic.setText=function(textStyle,labelModel,defaultColor){var opt={isRectText:true};var isEmphasis;if(defaultColor===false){isEmphasis=true}else{opt.autoColor=defaultColor}setTextStyleCommon(textStyle,labelModel,opt,isEmphasis);textStyle.host&&textStyle.host.dirty&&textStyle.host.dirty(false)};function setTextStyleCommon(textStyle,textStyleModel,opt,isEmphasis){opt=opt||EMPTY_OBJ;if(opt.isRectText){var textPosition=textStyleModel.getShallow('position')||(isEmphasis?null:'inside');textPosition==='outside'&&(textPosition='top');textStyle.textPosition=textPosition;textStyle.textOffset=textStyleModel.getShallow('offset');var labelRotate=textStyleModel.getShallow('rotate');labelRotate!=null&&(labelRotate*=Math.PI/180);textStyle.textRotation=labelRotate;textStyle.textDistance=zrUtil.retrieve2(textStyleModel.getShallow('distance'),isEmphasis?null:5)}var ecModel=textStyleModel.ecModel;var globalTextStyle=ecModel&&ecModel.option.textStyle;var richItemNames=getRichItemNames(textStyleModel);var richResult;if(richItemNames){richResult={};for(var name in richItemNames){if(richItemNames.hasOwnProperty(name)){var richTextStyle=textStyleModel.getModel(['rich',name]);setTokenTextStyle(richResult[name]={},richTextStyle,globalTextStyle,opt,isEmphasis)}}}textStyle.rich=richResult;setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,true);if(opt.forceRich&&!opt.textStyle){opt.textStyle={}}return textStyle}function getRichItemNames(textStyleModel){var richItemNameMap;while(textStyleModel&&textStyleModel!==textStyleModel.ecModel){var rich=(textStyleModel.option||EMPTY_OBJ).rich;if(rich){richItemNameMap=richItemNameMap||{};for(var name in rich){if(rich.hasOwnProperty(name)){richItemNameMap[name]=1}}}textStyleModel=textStyleModel.parentModel}return richItemNameMap}function setTokenTextStyle(textStyle,textStyleModel,globalTextStyle,opt,isEmphasis,isBlock){globalTextStyle=!isEmphasis&&globalTextStyle||EMPTY_OBJ;textStyle.textFill=getAutoColor(textStyleModel.getShallow('color'),opt)||globalTextStyle.color;textStyle.textStroke=getAutoColor(textStyleModel.getShallow('textBorderColor'),opt)||globalTextStyle.textBorderColor;textStyle.textStrokeWidth=zrUtil.retrieve2(textStyleModel.getShallow('textBorderWidth'),globalTextStyle.textBorderWidth);if(!isEmphasis){if(isBlock){var originalTextPosition=textStyle.textPosition;textStyle.insideRollback=applyInsideStyle(textStyle,originalTextPosition,opt);textStyle.insideOriginalTextPosition=originalTextPosition;textStyle.insideRollbackOpt=opt}if(textStyle.textFill==null){textStyle.textFill=opt.autoColor}}textStyle.fontStyle=textStyleModel.getShallow('fontStyle')||globalTextStyle.fontStyle;textStyle.fontWeight=textStyleModel.getShallow('fontWeight')||globalTextStyle.fontWeight;textStyle.fontSize=textStyleModel.getShallow('fontSize')||globalTextStyle.fontSize;textStyle.fontFamily=textStyleModel.getShallow('fontFamily')||globalTextStyle.fontFamily;textStyle.textAlign=textStyleModel.getShallow('align');textStyle.textVerticalAlign=textStyleModel.getShallow('verticalAlign')||textStyleModel.getShallow('baseline');textStyle.textLineHeight=textStyleModel.getShallow('lineHeight');textStyle.textWidth=textStyleModel.getShallow('width');textStyle.textHeight=textStyleModel.getShallow('height');textStyle.textTag=textStyleModel.getShallow('tag');if(!isBlock||!opt.disableBox){textStyle.textBackgroundColor=getAutoColor(textStyleModel.getShallow('backgroundColor'),opt);textStyle.textPadding=textStyleModel.getShallow('padding');textStyle.textBorderColor=getAutoColor(textStyleModel.getShallow('borderColor'),opt);textStyle.textBorderWidth=textStyleModel.getShallow('borderWidth');textStyle.textBorderRadius=textStyleModel.getShallow('borderRadius');textStyle.textBoxShadowColor=textStyleModel.getShallow('shadowColor');textStyle.textBoxShadowBlur=textStyleModel.getShallow('shadowBlur');textStyle.textBoxShadowOffsetX=textStyleModel.getShallow('shadowOffsetX');textStyle.textBoxShadowOffsetY=textStyleModel.getShallow('shadowOffsetY')}textStyle.textShadowColor=textStyleModel.getShallow('textShadowColor')||globalTextStyle.textShadowColor;textStyle.textShadowBlur=textStyleModel.getShallow('textShadowBlur')||globalTextStyle.textShadowBlur;textStyle.textShadowOffsetX=textStyleModel.getShallow('textShadowOffsetX')||globalTextStyle.textShadowOffsetX;textStyle.textShadowOffsetY=textStyleModel.getShallow('textShadowOffsetY')||globalTextStyle.textShadowOffsetY}function getAutoColor(color,opt){return color!=='auto'?color:(opt&&opt.autoColor)?opt.autoColor:null}function applyInsideStyle(textStyle,textPosition,opt){var useInsideStyle=opt.useInsideStyle;var insideRollback;if(textStyle.textFill==null&&useInsideStyle!==false&&(useInsideStyle===true||(opt.isRectText&&textPosition&&typeof textPosition==='string'&&textPosition.indexOf('inside')>=0))){insideRollback={textFill:null,textStroke:textStyle.textStroke,textStrokeWidth:textStyle.textStrokeWidth};textStyle.textFill='#fff';if(textStyle.textStroke==null){textStyle.textStroke=opt.autoColor;textStyle.textStrokeWidth==null&&(textStyle.textStrokeWidth=2)}}return insideRollback}function rollbackInsideStyle(style){var insideRollback=style.insideRollback;if(insideRollback){style.textFill=insideRollback.textFill;style.textStroke=insideRollback.textStroke;style.textStrokeWidth=insideRollback.textStrokeWidth}}graphic.getFont=function(opt,ecModel){var gTextStyleModel=ecModel||ecModel.getModel('textStyle');return[opt.fontStyle||gTextStyleModel&&gTextStyleModel.getShallow('fontStyle')||'',opt.fontWeight||gTextStyleModel&&gTextStyleModel.getShallow('fontWeight')||'',(opt.fontSize||gTextStyleModel&&gTextStyleModel.getShallow('fontSize')||12)+'px',opt.fontFamily||gTextStyleModel&&gTextStyleModel.getShallow('fontFamily')||'sans-serif'].join(' ')};function animateOrSetProps(isUpdate,el,props,animatableModel,dataIndex,cb){if(typeof dataIndex==='function'){cb=dataIndex;dataIndex=null}var animationEnabled=animatableModel&&animatableModel.isAnimationEnabled();if(animationEnabled){var postfix=isUpdate?'Update':'';var duration=animatableModel.getShallow('animationDuration'+postfix);var animationEasing=animatableModel.getShallow('animationEasing'+postfix);var animationDelay=animatableModel.getShallow('animationDelay'+postfix);if(typeof animationDelay==='function'){animationDelay=animationDelay(dataIndex,animatableModel.getAnimationDelayParams?animatableModel.getAnimationDelayParams(el,dataIndex):null)}if(typeof duration==='function'){duration=duration(dataIndex)}duration>0?el.animateTo(props,duration,animationDelay||0,animationEasing,cb,!!cb):(el.stopAnimation(),el.attr(props),cb&&cb())}else{el.stopAnimation();el.attr(props);cb&&cb()}}graphic.updateProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(true,el,props,animatableModel,dataIndex,cb)};graphic.initProps=function(el,props,animatableModel,dataIndex,cb){animateOrSetProps(false,el,props,animatableModel,dataIndex,cb)};graphic.getTransform=function(target,ancestor){var mat=matrix.identity([]);while(target&&target!==ancestor){matrix.mul(mat,target.getLocalTransform(),mat);target=target.parent}return mat};graphic.applyTransform=function(target,transform,invert){if(transform&&!zrUtil.isArrayLike(transform)){transform=Transformable.getLocalTransform(transform)}if(invert){transform=matrix.invert([],transform)}return vector.applyTransform([],target,transform)};graphic.transformDirection=function(direction,transform,invert){var hBase=(transform[4]===0||transform[5]===0||transform[0]===0)?1:Math.abs(2*transform[4]/transform[0]);var vBase=(transform[4]===0||transform[5]===0||transform[2]===0)?1:Math.abs(2*transform[4]/transform[2]);var vertex=[direction==='left'?-hBase:direction==='right'?hBase:0,direction==='top'?-vBase:direction==='bottom'?vBase:0];vertex=graphic.applyTransform(vertex,transform,invert);return Math.abs(vertex[0])>Math.abs(vertex[1])?(vertex[0]>0?'right':'left'):(vertex[1]>0?'bottom':'top')};graphic.groupTransition=function(g1,g2,animatableModel,cb){if(!g1||!g2){return}function getElMap(g){var elMap={};g.traverse(function(el){if(!el.isGroup&&el.anid){elMap[el.anid]=el}});return elMap}function getAnimatableProps(el){var obj={position:vector.clone(el.position),rotation:el.rotation};if(el.shape){obj.shape=zrUtil.extend({},el.shape)}return obj}var elMap1=getElMap(g1);g2.traverse(function(el){if(!el.isGroup&&el.anid){var oldEl=elMap1[el.anid];if(oldEl){var newProp=getAnimatableProps(el);el.attr(getAnimatableProps(oldEl));graphic.updateProps(el,newProp,animatableModel,el.dataIndex)}}})};graphic.clipPointsByRect=function(points,rect){return zrUtil.map(points,function(point){var x=point[0];x=mathMax(x,rect.x);x=mathMin(x,rect.x+rect.width);var y=point[1];y=mathMax(y,rect.y);y=mathMin(y,rect.y+rect.height);return[x,y]})};graphic.clipRectByRect=function(targetRect,rect){var x=mathMax(targetRect.x,rect.x);var x2=mathMin(targetRect.x+targetRect.width,rect.x+rect.width);var y=mathMax(targetRect.y,rect.y);var y2=mathMin(targetRect.y+targetRect.height,rect.y+rect.height);if(x2>=x&&y2>=y){return{x:x,y:y,width:x2-x,height:y2-y}}};graphic.createIcon=function(iconStr,opt,rect){opt=zrUtil.extend({rectHover:true},opt);var style=opt.style={strokeNoScale:true};rect=rect||{x:-1,y:-1,width:2,height:2};if(iconStr){return iconStr.indexOf('image://')===0?(style.image=iconStr.slice(8),zrUtil.defaults(style,rect),new graphic.Image(opt)):(graphic.makePath(iconStr.replace('path://',''),opt,rect,'center'))}};module.exports=graphic}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(1);var PathProxy=__webpack_require__(6);var transformPath=__webpack_require__(55);var cc=['m','M','l','L','v','V','h','H','z','Z','c','C','q','Q','t','T','s','S','a','A'];var mathSqrt=Math.sqrt;var mathSin=Math.sin;var mathCos=Math.cos;var PI=Math.PI;var vMag=function(v){return Math.sqrt(v[0]*v[0]+v[1]*v[1])};var vRatio=function(u,v){return(u[0]*v[0]+u[1]*v[1])/(vMag(u)*vMag(v))};var vAngle=function(u,v){return(u[0]*v[1]<u[1]*v[0]?-1:1)*Math.acos(vRatio(u,v))};function processArc(x1,y1,x2,y2,fa,fs,rx,ry,psiDeg,cmd,path){var psi=psiDeg*(PI/180.0);var xp=mathCos(psi)*(x1-x2)/2.0+mathSin(psi)*(y1-y2)/2.0;var yp=-1*mathSin(psi)*(x1-x2)/2.0+mathCos(psi)*(y1-y2)/2.0;var lambda=(xp*xp)/(rx*rx)+(yp*yp)/(ry*ry);if(lambda>1){rx*=mathSqrt(lambda);ry*=mathSqrt(lambda)}var f=(fa===fs?-1:1)*mathSqrt((((rx*rx)*(ry*ry))-((rx*rx)*(yp*yp))-((ry*ry)*(xp*xp)))/((rx*rx)*(yp*yp)+(ry*ry)*(xp*xp)))||0;var cxp=f*rx*yp/ry;var cyp=f*-ry*xp/rx;var cx=(x1+x2)/2.0+mathCos(psi)*cxp-mathSin(psi)*cyp;var cy=(y1+y2)/2.0+mathSin(psi)*cxp+mathCos(psi)*cyp;var theta=vAngle([1,0],[(xp-cxp)/rx,(yp-cyp)/ry]);var u=[(xp-cxp)/rx,(yp-cyp)/ry];var v=[(-1*xp-cxp)/rx,(-1*yp-cyp)/ry];var dTheta=vAngle(u,v);if(vRatio(u,v)<=-1){dTheta=PI}if(vRatio(u,v)>=1){dTheta=0}if(fs===0&&dTheta>0){dTheta=dTheta-2*PI}if(fs===1&&dTheta<0){dTheta=dTheta+2*PI}path.addData(cmd,cx,cy,rx,ry,theta,dTheta,psi,fs)}function createPathProxyFromString(data){if(!data){return[]}var cs=data.replace(/-/g,' -').replace(/  /g,' ').replace(/ /g,',').replace(/,,/g,',');var n;for(n=0;n<cc.length;n++){cs=cs.replace(new RegExp(cc[n],'g'),'|'+cc[n])}var arr=cs.split('|');var cpx=0;var cpy=0;var path=new PathProxy();var CMD=PathProxy.CMD;var prevCmd;for(n=1;n<arr.length;n++){var str=arr[n];var c=str.charAt(0);var off=0;var p=str.slice(1).replace(/e,-/g,'e-').split(',');var cmd;if(p.length>0&&p[0]===''){p.shift()}for(var i=0;i<p.length;i++){p[i]=parseFloat(p[i])}while(off<p.length&&!isNaN(p[off])){if(isNaN(p[0])){break}var ctlPtx;var ctlPty;var rx;var ry;var psi;var fa;var fs;var x1=cpx;var y1=cpy;switch(c){case'l':cpx+=p[off++];cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'L':cpx=p[off++];cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'm':cpx+=p[off++];cpy+=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);c='l';break;case'M':cpx=p[off++];cpy=p[off++];cmd=CMD.M;path.addData(cmd,cpx,cpy);c='L';break;case'h':cpx+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'H':cpx=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'v':cpy+=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'V':cpy=p[off++];cmd=CMD.L;path.addData(cmd,cpx,cpy);break;case'C':cmd=CMD.C;path.addData(cmd,p[off++],p[off++],p[off++],p[off++],p[off++],p[off++]);cpx=p[off-2];cpy=p[off-1];break;case'c':cmd=CMD.C;path.addData(cmd,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy,p[off++]+cpx,p[off++]+cpy);cpx+=p[off-2];cpy+=p[off-1];break;case'S':ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case's':ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.C){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cmd=CMD.C;x1=cpx+p[off++];y1=cpy+p[off++];cpx+=p[off++];cpy+=p[off++];path.addData(cmd,ctlPtx,ctlPty,x1,y1,cpx,cpy);break;case'Q':x1=p[off++];y1=p[off++];cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case'q':x1=p[off++]+cpx;y1=p[off++]+cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,x1,y1,cpx,cpy);break;case'T':ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx=p[off++];cpy=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case't':ctlPtx=cpx;ctlPty=cpy;var len=path.len();var pathData=path.data;if(prevCmd===CMD.Q){ctlPtx+=cpx-pathData[len-4];ctlPty+=cpy-pathData[len-3]}cpx+=p[off++];cpy+=p[off++];cmd=CMD.Q;path.addData(cmd,ctlPtx,ctlPty,cpx,cpy);break;case'A':rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx=p[off++];cpy=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break;case'a':rx=p[off++];ry=p[off++];psi=p[off++];fa=p[off++];fs=p[off++];x1=cpx,y1=cpy;cpx+=p[off++];cpy+=p[off++];cmd=CMD.A;processArc(x1,y1,cpx,cpy,fa,fs,rx,ry,psi,cmd,path);break}}if(c==='z'||c==='Z'){cmd=CMD.Z;path.addData(cmd)}prevCmd=cmd}path.toStatic();return path}function createPathOptions(str,opts){var pathProxy=createPathProxyFromString(str);opts=opts||{};opts.buildPath=function(path){if(path.setData){path.setData(pathProxy.data);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}}else{var ctx=path;pathProxy.rebuildPath(ctx)}};opts.applyTransform=function(m){transformPath(pathProxy,m);this.dirty(true)};return opts}module.exports={createFromString:function(str,opts){return new Path(createPathOptions(str,opts))},extendFromString:function(str,opts){return Path.extend(createPathOptions(str,opts))},mergePath:function(pathEls,opts){var pathList=[];var len=pathEls.length;for(var i=0;i<len;i++){var pathEl=pathEls[i];if(!pathEl.path){pathEl.createPathProxy()}if(pathEl.__dirtyPath){pathEl.buildPath(pathEl.path,pathEl.shape,true)}pathList.push(pathEl.path)}var pathBundle=new Path(opts);pathBundle.createPathProxy();pathBundle.buildPath=function(path){path.appendPath(pathList);var ctx=path.getContext();if(ctx){path.rebuildPath(ctx)}};return pathBundle}}}),(function(module,exports){var STYLE_COMMON_PROPS=[['shadowBlur',0],['shadowOffsetX',0],['shadowOffsetY',0],['shadowColor','#000'],['lineCap','butt'],['lineJoin','miter'],['miterLimit',10]];var Style=function(opts,host){this.extendFrom(opts,false);this.host=host};function createLinearGradient(ctx,obj,rect){var x=obj.x==null?0:obj.x;var x2=obj.x2==null?1:obj.x2;var y=obj.y==null?0:obj.y;var y2=obj.y2==null?0:obj.y2;if(!obj.global){x=x*rect.width+rect.x;x2=x2*rect.width+rect.x;y=y*rect.height+rect.y;y2=y2*rect.height+rect.y}var canvasGradient=ctx.createLinearGradient(x,y,x2,y2);return canvasGradient}function createRadialGradient(ctx,obj,rect){var width=rect.width;var height=rect.height;var min=Math.min(width,height);var x=obj.x==null?0.5:obj.x;var y=obj.y==null?0.5:obj.y;var r=obj.r==null?0.5:obj.r;if(!obj.global){x=x*width+rect.x;y=y*height+rect.y;r=r*min}var canvasGradient=ctx.createRadialGradient(x,y,0,x,y,r);return canvasGradient}Style.prototype={constructor:Style,host:null,fill:'#000',stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:false,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:'#000',textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:'inside',textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:'transparent',textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:'transparent',textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:false,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(ctx,el,prevEl){var style=this;var prevStyle=prevEl&&prevEl.style;var firstDraw=!prevStyle;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];var styleName=prop[0];if(firstDraw||style[styleName]!==prevStyle[styleName]){ctx[styleName]=style[styleName]||prop[1]}}if((firstDraw||style.fill!==prevStyle.fill)){ctx.fillStyle=style.fill}if((firstDraw||style.stroke!==prevStyle.stroke)){ctx.strokeStyle=style.stroke}if((firstDraw||style.opacity!==prevStyle.opacity)){ctx.globalAlpha=style.opacity==null?1:style.opacity}if((firstDraw||style.blend!==prevStyle.blend)){ctx.globalCompositeOperation=style.blend||'source-over'}if(this.hasStroke()){var lineWidth=style.lineWidth;ctx.lineWidth=lineWidth/((this.strokeNoScale&&el&&el.getLineScale)?el.getLineScale():1)}},hasFill:function(){var fill=this.fill;return fill!=null&&fill!=='none'},hasStroke:function(){var stroke=this.stroke;return stroke!=null&&stroke!=='none'&&this.lineWidth>0},extendFrom:function(otherStyle,overwrite){if(otherStyle){for(var name in otherStyle){if(otherStyle.hasOwnProperty(name)&&(overwrite===true||(overwrite===false?!this.hasOwnProperty(name):otherStyle[name]!=null))){this[name]=otherStyle[name]}}}},set:function(obj,value){if(typeof obj==='string'){this[obj]=value}else{this.extendFrom(obj,true)}},clone:function(){var newStyle=new this.constructor();newStyle.extendFrom(this,true);return newStyle},getGradient:function(ctx,obj,rect){var method=obj.type==='radial'?createRadialGradient:createLinearGradient;var canvasGradient=method(ctx,obj,rect);var colorStops=obj.colorStops;for(var i=0;i<colorStops.length;i++){canvasGradient.addColorStop(colorStops[i].offset,colorStops[i].color)}return canvasGradient}};var styleProto=Style.prototype;for(var i=0;i<STYLE_COMMON_PROPS.length;i++){var prop=STYLE_COMMON_PROPS[i];if(!(prop[0]in styleProto)){styleProto[prop[0]]=prop[1]}}Style.getGradient=styleProto.getGradient;module.exports=Style}),(function(module,exports){var idStart=0x0907;module.exports=function(){return idStart++}}),(function(module,exports){var arrySlice=Array.prototype.slice;var Eventful=function(){this._$handlers={}};Eventful.prototype={constructor:Eventful,one:function(event,handler,context){var _h=this._$handlers;if(!handler||!event){return this}if(!_h[event]){_h[event]=[]}for(var i=0;i<_h[event].length;i++){if(_h[event][i].h===handler){return this}}_h[event].push({h:handler,one:true,ctx:context||this});return this},on:function(event,handler,context){var _h=this._$handlers;if(!handler||!event){return this}if(!_h[event]){_h[event]=[]}for(var i=0;i<_h[event].length;i++){if(_h[event][i].h===handler){return this}}_h[event].push({h:handler,one:false,ctx:context||this});return this},isSilent:function(event){var _h=this._$handlers;return _h[event]&&_h[event].length},off:function(event,handler){var _h=this._$handlers;if(!event){this._$handlers={};return this}if(handler){if(_h[event]){var newList=[];for(var i=0,l=_h[event].length;i<l;i++){if(_h[event][i]['h']!=handler){newList.push(_h[event][i])}}_h[event]=newList}if(_h[event]&&_h[event].length===0){delete _h[event]}}else{delete _h[event]}return this},trigger:function(type){if(this._$handlers[type]){var args=arguments;var argLen=args.length;if(argLen>3){args=arrySlice.call(args,1)}var _h=this._$handlers[type];var len=_h.length;for(var i=0;i<len;){switch(argLen){case 1:_h[i]['h'].call(_h[i]['ctx']);break;case 2:_h[i]['h'].call(_h[i]['ctx'],args[1]);break;case 3:_h[i]['h'].call(_h[i]['ctx'],args[1],args[2]);break;default:_h[i]['h'].apply(_h[i]['ctx'],args);break}if(_h[i]['one']){_h.splice(i,1);len--}else{i++}}}return this},triggerWithContext:function(type){if(this._$handlers[type]){var args=arguments;var argLen=args.length;if(argLen>4){args=arrySlice.call(args,1,args.length-1)}var ctx=args[args.length-1];var _h=this._$handlers[type];var len=_h.length;for(var i=0;i<len;){switch(argLen){case 1:_h[i]['h'].call(ctx);break;case 2:_h[i]['h'].call(ctx,args[1]);break;case 3:_h[i]['h'].call(ctx,args[1],args[2]);break;default:_h[i]['h'].apply(ctx,args);break}if(_h[i]['one']){_h.splice(i,1);len--}else{i++}}}return this}};module.exports=Eventful}),(function(module,exports,__webpack_require__){"use strict";var Animator=__webpack_require__(42);var util=__webpack_require__(0);var isString=util.isString;var isFunction=util.isFunction;var isObject=util.isObject;var log=__webpack_require__(45);var Animatable=function(){this.animators=[]};Animatable.prototype={constructor:Animatable,animate:function(path,loop){var target;var animatingShape=false;var el=this;var zr=this.__zr;if(path){var pathSplitted=path.split('.');var prop=el;animatingShape=pathSplitted[0]==='shape';for(var i=0,l=pathSplitted.length;i<l;i++){if(!prop){continue}prop=prop[pathSplitted[i]]}if(prop){target=prop}}else{target=el}if(!target){log('Property "'+path+'" is not existed in element '+el.id);return}var animators=el.animators;var animator=new Animator(target,loop);animator.during(function(target){el.dirty(animatingShape)}).done(function(){animators.splice(util.indexOf(animators,animator),1)});animators.push(animator);if(zr){zr.animation.addAnimator(animator)}return animator},stopAnimation:function(forwardToLast){var animators=this.animators;var len=animators.length;for(var i=0;i<len;i++){animators[i].stop(forwardToLast)}animators.length=0;return this},animateTo:function(target,time,delay,easing,callback,forceAnimate){if(isString(delay)){callback=easing;easing=delay;delay=0}else if(isFunction(easing)){callback=easing;easing='linear';delay=0}else if(isFunction(delay)){callback=delay;delay=0}else if(isFunction(time)){callback=time;time=500}else if(!time){time=500}this.stopAnimation();this._animateToShallow('',this,target,time,delay,easing,callback);var animators=this.animators.slice();var count=animators.length;function done(){count--;if(!count){callback&&callback()}}if(!count){callback&&callback()}for(var i=0;i<animators.length;i++){animators[i].done(done).start(easing,forceAnimate)}},_animateToShallow:function(path,source,target,time,delay){var objShallow={};var propertyCount=0;for(var name in target){if(!target.hasOwnProperty(name)){continue}if(source[name]!=null){if(isObject(target[name])&&!util.isArrayLike(target[name])){this._animateToShallow(path?path+'.'+name:name,source[name],target[name],time,delay)}else{objShallow[name]=target[name];propertyCount++}}else if(target[name]!=null){if(!path){this.attr(name,target[name])}else{var props={};props[path]={};props[path][name]=target[name];this.attr(props)}}}if(propertyCount>0){this.animate(path,false).when(time==null?500:time,objShallow).delay(delay||0)}return this}};module.exports=Animatable}),(function(module,exports,__webpack_require__){var Clip=__webpack_require__(43);var color=__webpack_require__(18);var util=__webpack_require__(0);var isArrayLike=util.isArrayLike;var arraySlice=Array.prototype.slice;function defaultGetter(target,key){return target[key]}function defaultSetter(target,key,value){target[key]=value}function interpolateNumber(p0,p1,percent){return(p1-p0)*percent+p0}function interpolateString(p0,p1,percent){return percent>0.5?p1:p0}function interpolateArray(p0,p1,percent,out,arrDim){var len=p0.length;if(arrDim==1){for(var i=0;i<len;i++){out[i]=interpolateNumber(p0[i],p1[i],percent)}}else{var len2=len&&p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=interpolateNumber(p0[i][j],p1[i][j],percent)}}}}function fillArr(arr0,arr1,arrDim){var arr0Len=arr0.length;var arr1Len=arr1.length;if(arr0Len!==arr1Len){var isPreviousLarger=arr0Len>arr1Len;if(isPreviousLarger){arr0.length=arr1Len}else{for(var i=arr0Len;i<arr1Len;i++){arr0.push(arrDim===1?arr1[i]:arraySlice.call(arr1[i]))}}}var len2=arr0[0]&&arr0[0].length;for(var i=0;i<arr0.length;i++){if(arrDim===1){if(isNaN(arr0[i])){arr0[i]=arr1[i]}}else{for(var j=0;j<len2;j++){if(isNaN(arr0[i][j])){arr0[i][j]=arr1[i][j]}}}}}function isArraySame(arr0,arr1,arrDim){if(arr0===arr1){return true}var len=arr0.length;if(len!==arr1.length){return false}if(arrDim===1){for(var i=0;i<len;i++){if(arr0[i]!==arr1[i]){return false}}}else{var len2=arr0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){if(arr0[i][j]!==arr1[i][j]){return false}}}}return true}function catmullRomInterpolateArray(p0,p1,p2,p3,t,t2,t3,out,arrDim){var len=p0.length;if(arrDim==1){for(var i=0;i<len;i++){out[i]=catmullRomInterpolate(p0[i],p1[i],p2[i],p3[i],t,t2,t3)}}else{var len2=p0[0].length;for(var i=0;i<len;i++){for(var j=0;j<len2;j++){out[i][j]=catmullRomInterpolate(p0[i][j],p1[i][j],p2[i][j],p3[i][j],t,t2,t3)}}}}function catmullRomInterpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}function cloneValue(value){if(isArrayLike(value)){var len=value.length;if(isArrayLike(value[0])){var ret=[];for(var i=0;i<len;i++){ret.push(arraySlice.call(value[i]))}return ret}return arraySlice.call(value)}return value}function rgba2String(rgba){rgba[0]=Math.floor(rgba[0]);rgba[1]=Math.floor(rgba[1]);rgba[2]=Math.floor(rgba[2]);return'rgba('+rgba.join(',')+')'}function getArrayDim(keyframes){var lastValue=keyframes[keyframes.length-1].value;return isArrayLike(lastValue&&lastValue[0])?2:1}function createTrackClip(animator,easing,oneTrackDone,keyframes,propName,forceAnimate){var getter=animator._getter;var setter=animator._setter;var useSpline=easing==='spline';var trackLen=keyframes.length;if(!trackLen){return}var firstVal=keyframes[0].value;var isValueArray=isArrayLike(firstVal);var isValueColor=false;var isValueString=false;var arrDim=isValueArray?getArrayDim(keyframes):0;var trackMaxTime;keyframes.sort(function(a,b){return a.time-b.time});trackMaxTime=keyframes[trackLen-1].time;var kfPercents=[];var kfValues=[];var prevValue=keyframes[0].value;var isAllValueEqual=true;for(var i=0;i<trackLen;i++){kfPercents.push(keyframes[i].time/trackMaxTime);var value=keyframes[i].value;if(!((isValueArray&&isArraySame(value,prevValue,arrDim))||(!isValueArray&&value===prevValue))){isAllValueEqual=false}prevValue=value;if(typeof value=='string'){var colorArray=color.parse(value);if(colorArray){value=colorArray;isValueColor=true}else{isValueString=true}}kfValues.push(value)}if(!forceAnimate&&isAllValueEqual){return}var lastValue=kfValues[trackLen-1];for(var i=0;i<trackLen-1;i++){if(isValueArray){fillArr(kfValues[i],lastValue,arrDim)}else{if(isNaN(kfValues[i])&&!isNaN(lastValue)&&!isValueString&&!isValueColor){kfValues[i]=lastValue}}}isValueArray&&fillArr(getter(animator._target,propName),lastValue,arrDim);var lastFrame=0;var lastFramePercent=0;var start;var w;var p0;var p1;var p2;var p3;if(isValueColor){var rgba=[0,0,0,0]}var onframe=function(target,percent){var frame;if(percent<0){frame=0}else if(percent<lastFramePercent){start=Math.min(lastFrame+1,trackLen-1);for(frame=start;frame>=0;frame--){if(kfPercents[frame]<=percent){break}}frame=Math.min(frame,trackLen-2)}else{for(frame=lastFrame;frame<trackLen;frame++){if(kfPercents[frame]>percent){break}}frame=Math.min(frame-1,trackLen-2)}lastFrame=frame;lastFramePercent=percent;var range=(kfPercents[frame+1]-kfPercents[frame]);if(range===0){return}else{w=(percent-kfPercents[frame])/range}if(useSpline){p1=kfValues[frame];p0=kfValues[frame===0?frame:frame-1];p2=kfValues[frame>trackLen-2?trackLen-1:frame+1];p3=kfValues[frame>trackLen-3?trackLen-1:frame+2];if(isValueArray){catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,getter(target,propName),arrDim)}else{var value;if(isValueColor){value=catmullRomInterpolateArray(p0,p1,p2,p3,w,w*w,w*w*w,rgba,1);value=rgba2String(rgba)}else if(isValueString){return interpolateString(p1,p2,w)}else{value=catmullRomInterpolate(p0,p1,p2,p3,w,w*w,w*w*w)}setter(target,propName,value)}}else{if(isValueArray){interpolateArray(kfValues[frame],kfValues[frame+1],w,getter(target,propName),arrDim)}else{var value;if(isValueColor){interpolateArray(kfValues[frame],kfValues[frame+1],w,rgba,1);value=rgba2String(rgba)}else if(isValueString){return interpolateString(kfValues[frame],kfValues[frame+1],w)}else{value=interpolateNumber(kfValues[frame],kfValues[frame+1],w)}setter(target,propName,value)}}};var clip=new Clip({target:animator._target,life:trackMaxTime,loop:animator._loop,delay:animator._delay,onframe:onframe,ondestroy:oneTrackDone});if(easing&&easing!=='spline'){clip.easing=easing}return clip}var Animator=function(target,loop,getter,setter){this._tracks={};this._target=target;this._loop=loop||false;this._getter=getter||defaultGetter;this._setter=setter||defaultSetter;this._clipCount=0;this._delay=0;this._doneList=[];this._onframeList=[];this._clipList=[]};Animator.prototype={when:function(time,props){var tracks=this._tracks;for(var propName in props){if(!props.hasOwnProperty(propName)){continue}if(!tracks[propName]){tracks[propName]=[];var value=this._getter(this._target,propName);if(value==null){continue}if(time!==0){tracks[propName].push({time:0,value:cloneValue(value)})}}tracks[propName].push({time:time,value:props[propName]})}return this},during:function(callback){this._onframeList.push(callback);return this},pause:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].pause()}this._paused=true},resume:function(){for(var i=0;i<this._clipList.length;i++){this._clipList[i].resume()}this._paused=false},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={};this._clipList.length=0;var doneList=this._doneList;var len=doneList.length;for(var i=0;i<len;i++){doneList[i].call(this)}},start:function(easing,forceAnimate){var self=this;var clipCount=0;var oneTrackDone=function(){clipCount--;if(!clipCount){self._doneCallback()}};var lastClip;for(var propName in this._tracks){if(!this._tracks.hasOwnProperty(propName)){continue}var clip=createTrackClip(this,easing,oneTrackDone,this._tracks[propName],propName,forceAnimate);if(clip){this._clipList.push(clip);clipCount++;if(this.animation){this.animation.addClip(clip)}lastClip=clip}}if(lastClip){var oldOnFrame=lastClip.onframe;lastClip.onframe=function(target,percent){oldOnFrame(target,percent);for(var i=0;i<self._onframeList.length;i++){self._onframeList[i](target,percent)}}}if(!clipCount){this._doneCallback()}return this},stop:function(forwardToLast){var clipList=this._clipList;var animation=this.animation;for(var i=0;i<clipList.length;i++){var clip=clipList[i];if(forwardToLast){clip.onframe(this._target,1)}animation&&animation.removeClip(clip)}clipList.length=0},delay:function(time){this._delay=time;return this},done:function(cb){if(cb){this._doneList.push(cb)}return this},getClips:function(){return this._clipList}};module.exports=Animator}),(function(module,exports,__webpack_require__){var easingFuncs=__webpack_require__(44);function Clip(options){this._target=options.target;this._life=options.life||1000;this._delay=options.delay||0;this._initialized=false;this.loop=options.loop==null?false:options.loop;this.gap=options.gap||0;this.easing=options.easing||'Linear';this.onframe=options.onframe;this.ondestroy=options.ondestroy;this.onrestart=options.onrestart;this._pausedTime=0;this._paused=false}Clip.prototype={constructor:Clip,step:function(globalTime,deltaTime){if(!this._initialized){this._startTime=globalTime+this._delay;this._initialized=true}if(this._paused){this._pausedTime+=deltaTime;return}var percent=(globalTime-this._startTime-this._pausedTime)/this._life;if(percent<0){return}percent=Math.min(percent,1);var easing=this.easing;var easingFunc=typeof easing=='string'?easingFuncs[easing]:easing;var schedule=typeof easingFunc==='function'?easingFunc(percent):percent;this.fire('frame',schedule);if(percent==1){if(this.loop){this.restart(globalTime);return'restart'}this._needsRemove=true;return'destroy'}return null},restart:function(globalTime){var remainder=(globalTime-this._startTime-this._pausedTime)%this._life;this._startTime=globalTime-remainder+this.gap;this._pausedTime=0;this._needsRemove=false},fire:function(eventType,arg){eventType='on'+eventType;if(this[eventType]){this[eventType](this._target,arg)}},pause:function(){this._paused=true},resume:function(){this._paused=false}};module.exports=Clip}),(function(module,exports){var easing={linear:function(k){return k},quadraticIn:function(k){return k*k},quadraticOut:function(k){return k*(2-k)},quadraticInOut:function(k){if((k*=2)<1){return 0.5*k*k}return-0.5*(--k*(k-2)-1)},cubicIn:function(k){return k*k*k},cubicOut:function(k){return--k*k*k+1},cubicInOut:function(k){if((k*=2)<1){return 0.5*k*k*k}return 0.5*((k-=2)*k*k+2)},quarticIn:function(k){return k*k*k*k},quarticOut:function(k){return 1-(--k*k*k*k)},quarticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k}return-0.5*((k-=2)*k*k*k-2)},quinticIn:function(k){return k*k*k*k*k},quinticOut:function(k){return--k*k*k*k*k+1},quinticInOut:function(k){if((k*=2)<1){return 0.5*k*k*k*k*k}return 0.5*((k-=2)*k*k*k*k+2)},sinusoidalIn:function(k){return 1-Math.cos(k*Math.PI/2)},sinusoidalOut:function(k){return Math.sin(k*Math.PI/2)},sinusoidalInOut:function(k){return 0.5*(1-Math.cos(Math.PI*k))},exponentialIn:function(k){return k===0?0:Math.pow(1024,k-1)},exponentialOut:function(k){return k===1?1:1-Math.pow(2,-10*k)},exponentialInOut:function(k){if(k===0){return 0}if(k===1){return 1}if((k*=2)<1){return 0.5*Math.pow(1024,k-1)}return 0.5*(-Math.pow(2,-10*(k-1))+2)},circularIn:function(k){return 1-Math.sqrt(1-k*k)},circularOut:function(k){return Math.sqrt(1-(--k*k))},circularInOut:function(k){if((k*=2)<1){return-0.5*(Math.sqrt(1-k*k)-1)}return 0.5*(Math.sqrt(1-(k-=2)*k)+1)},elasticIn:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return-(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))},elasticOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}return(a*Math.pow(2,-10*k)*Math.sin((k-s)*(2*Math.PI)/p)+1)},elasticInOut:function(k){var s;var a=0.1;var p=0.4;if(k===0){return 0}if(k===1){return 1}if(!a||a<1){a=1;s=p/4}else{s=p*Math.asin(1/a)/(2*Math.PI)}if((k*=2)<1){return-0.5*(a*Math.pow(2,10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p))}return a*Math.pow(2,-10*(k-=1))*Math.sin((k-s)*(2*Math.PI)/p)*0.5+1},backIn:function(k){var s=1.70158;return k*k*((s+1)*k-s)},backOut:function(k){var s=1.70158;return--k*k*((s+1)*k+s)+1},backInOut:function(k){var s=1.70158*1.525;if((k*=2)<1){return 0.5*(k*k*((s+1)*k-s))}return 0.5*((k-=2)*k*((s+1)*k+s)+2)},bounceIn:function(k){return 1-easing.bounceOut(1-k)},bounceOut:function(k){if(k<(1/2.75)){return 7.5625*k*k}else if(k<(2/2.75)){return 7.5625*(k-=(1.5/2.75))*k+0.75}else if(k<(2.5/2.75)){return 7.5625*(k-=(2.25/2.75))*k+0.9375}else{return 7.5625*(k-=(2.625/2.75))*k+0.984375}},bounceInOut:function(k){if(k<0.5){return easing.bounceIn(k*2)*0.5}return easing.bounceOut(k*2-1)*0.5+0.5}};module.exports=easing}),(function(module,exports,__webpack_require__){var config=__webpack_require__(19);module.exports=function(){if(config.debugMode===0){return}else if(config.debugMode==1){for(var k in arguments){throw new Error(arguments[k]);}}else if(config.debugMode>1){for(var k in arguments){console.log(arguments[k])}}}}),(function(module,exports,__webpack_require__){var textHelper=__webpack_require__(20);var BoundingRect=__webpack_require__(3);var tmpRect=new BoundingRect();var RectText=function(){};RectText.prototype={constructor:RectText,drawRectText:function(ctx,rect){var style=this.style;rect=style.textRect||rect;this.__dirty&&textHelper.normalizeTextStyle(style,true);var text=style.text;text!=null&&(text+='');if(!textHelper.needDrawText(text,style)){return}ctx.save();var transform=this.transform;if(!style.transformText){if(transform){tmpRect.copy(rect);tmpRect.applyTransform(transform);rect=tmpRect}}else{this.setTransform(ctx)}textHelper.renderText(this,ctx,text,style,rect);ctx.restore()}};module.exports=RectText}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(2);var curve=__webpack_require__(4);var bbox={};var mathMin=Math.min;var mathMax=Math.max;var mathSin=Math.sin;var mathCos=Math.cos;var start=vec2.create();var end=vec2.create();var extremity=vec2.create();var PI2=Math.PI*2;bbox.fromPoints=function(points,min,max){if(points.length===0){return}var p=points[0];var left=p[0];var right=p[0];var top=p[1];var bottom=p[1];var i;for(i=1;i<points.length;i++){p=points[i];left=mathMin(left,p[0]);right=mathMax(right,p[0]);top=mathMin(top,p[1]);bottom=mathMax(bottom,p[1])}min[0]=left;min[1]=top;max[0]=right;max[1]=bottom};bbox.fromLine=function(x0,y0,x1,y1,min,max){min[0]=mathMin(x0,x1);min[1]=mathMin(y0,y1);max[0]=mathMax(x0,x1);max[1]=mathMax(y0,y1)};var xDim=[];var yDim=[];bbox.fromCubic=function(x0,y0,x1,y1,x2,y2,x3,y3,min,max){var cubicExtrema=curve.cubicExtrema;var cubicAt=curve.cubicAt;var i;var n=cubicExtrema(x0,x1,x2,x3,xDim);min[0]=Infinity;min[1]=Infinity;max[0]=-Infinity;max[1]=-Infinity;for(i=0;i<n;i++){var x=cubicAt(x0,x1,x2,x3,xDim[i]);min[0]=mathMin(x,min[0]);max[0]=mathMax(x,max[0])}n=cubicExtrema(y0,y1,y2,y3,yDim);for(i=0;i<n;i++){var y=cubicAt(y0,y1,y2,y3,yDim[i]);min[1]=mathMin(y,min[1]);max[1]=mathMax(y,max[1])}min[0]=mathMin(x0,min[0]);max[0]=mathMax(x0,max[0]);min[0]=mathMin(x3,min[0]);max[0]=mathMax(x3,max[0]);min[1]=mathMin(y0,min[1]);max[1]=mathMax(y0,max[1]);min[1]=mathMin(y3,min[1]);max[1]=mathMax(y3,max[1])};bbox.fromQuadratic=function(x0,y0,x1,y1,x2,y2,min,max){var quadraticExtremum=curve.quadraticExtremum;var quadraticAt=curve.quadraticAt;var tx=mathMax(mathMin(quadraticExtremum(x0,x1,x2),1),0);var ty=mathMax(mathMin(quadraticExtremum(y0,y1,y2),1),0);var x=quadraticAt(x0,x1,x2,tx);var y=quadraticAt(y0,y1,y2,ty);min[0]=mathMin(x0,x2,x);min[1]=mathMin(y0,y2,y);max[0]=mathMax(x0,x2,x);max[1]=mathMax(y0,y2,y)};bbox.fromArc=function(x,y,rx,ry,startAngle,endAngle,anticlockwise,min,max){var vec2Min=vec2.min;var vec2Max=vec2.max;var diff=Math.abs(startAngle-endAngle);if(diff%PI2<1e-4&&diff>1e-4){min[0]=x-rx;min[1]=y-ry;max[0]=x+rx;max[1]=y+ry;return}start[0]=mathCos(startAngle)*rx+x;start[1]=mathSin(startAngle)*ry+y;end[0]=mathCos(endAngle)*rx+x;end[1]=mathSin(endAngle)*ry+y;vec2Min(min,start,end);vec2Max(max,start,end);startAngle=startAngle%(PI2);if(startAngle<0){startAngle=startAngle+PI2}endAngle=endAngle%(PI2);if(endAngle<0){endAngle=endAngle+PI2}if(startAngle>endAngle&&!anticlockwise){endAngle+=PI2}else if(startAngle<endAngle&&anticlockwise){startAngle+=PI2}if(anticlockwise){var tmp=endAngle;endAngle=startAngle;startAngle=tmp}for(var angle=0;angle<endAngle;angle+=Math.PI/2){if(angle>startAngle){extremity[0]=mathCos(angle)*rx+x;extremity[1]=mathSin(angle)*ry+y;vec2Min(min,extremity,min);vec2Max(max,extremity,max)}}};module.exports=bbox}),(function(module,exports,__webpack_require__){"use strict";var CMD=__webpack_require__(6).CMD;var line=__webpack_require__(49);var cubic=__webpack_require__(50);var quadratic=__webpack_require__(51);var arc=__webpack_require__(52);var normalizeRadian=__webpack_require__(22).normalizeRadian;var curve=__webpack_require__(4);var windingLine=__webpack_require__(53);var containStroke=line.containStroke;var PI2=Math.PI*2;var EPSILON=1e-4;function isAroundEqual(a,b){return Math.abs(a-b)<EPSILON}var roots=[-1,-1,-1];var extrema=[-1,-1];function swapExtrema(){var tmp=extrema[0];extrema[0]=extrema[1];extrema[1]=tmp}function windingCubic(x0,y0,x1,y1,x2,y2,x3,y3,x,y){if((y>y0&&y>y1&&y>y2&&y>y3)||(y<y0&&y<y1&&y<y2&&y<y3)){return 0}var nRoots=curve.cubicRootAt(y0,y1,y2,y3,y,roots);if(nRoots===0){return 0}else{var w=0;var nExtrema=-1;var y0_,y1_;for(var i=0;i<nRoots;i++){var t=roots[i];var unit=(t===0||t===1)?0.5:1;var x_=curve.cubicAt(x0,x1,x2,x3,t);if(x_<x){continue}if(nExtrema<0){nExtrema=curve.cubicExtrema(y0,y1,y2,y3,extrema);if(extrema[1]<extrema[0]&&nExtrema>1){swapExtrema()}y0_=curve.cubicAt(y0,y1,y2,y3,extrema[0]);if(nExtrema>1){y1_=curve.cubicAt(y0,y1,y2,y3,extrema[1])}}if(nExtrema==2){if(t<extrema[0]){w+=y0_<y0?unit:-unit}else if(t<extrema[1]){w+=y1_<y0_?unit:-unit}else{w+=y3<y1_?unit:-unit}}else{if(t<extrema[0]){w+=y0_<y0?unit:-unit}else{w+=y3<y0_?unit:-unit}}}return w}}function windingQuadratic(x0,y0,x1,y1,x2,y2,x,y){if((y>y0&&y>y1&&y>y2)||(y<y0&&y<y1&&y<y2)){return 0}var nRoots=curve.quadraticRootAt(y0,y1,y2,y,roots);if(nRoots===0){return 0}else{var t=curve.quadraticExtremum(y0,y1,y2);if(t>=0&&t<=1){var w=0;var y_=curve.quadraticAt(y0,y1,y2,t);for(var i=0;i<nRoots;i++){var unit=(roots[i]===0||roots[i]===1)?0.5:1;var x_=curve.quadraticAt(x0,x1,x2,roots[i]);if(x_<x){continue}if(roots[i]<t){w+=y_<y0?unit:-unit}else{w+=y2<y_?unit:-unit}}return w}else{var unit=(roots[0]===0||roots[0]===1)?0.5:1;var x_=curve.quadraticAt(x0,x1,x2,roots[0]);if(x_<x){return 0}return y2<y0?unit:-unit}}}function windingArc(cx,cy,r,startAngle,endAngle,anticlockwise,x,y){y-=cy;if(y>r||y<-r){return 0}var tmp=Math.sqrt(r*r-y*y);roots[0]=-tmp;roots[1]=tmp;var diff=Math.abs(startAngle-endAngle);if(diff<1e-4){return 0}if(diff%PI2<1e-4){startAngle=0;endAngle=PI2;var dir=anticlockwise?1:-1;if(x>=roots[0]+cx&&x<=roots[1]+cx){return dir}else{return 0}}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2}var w=0;for(var i=0;i<2;i++){var x_=roots[i];if(x_+cx>x){var angle=Math.atan2(y,x_);var dir=anticlockwise?1:-1;if(angle<0){angle=PI2+angle}if((angle>=startAngle&&angle<=endAngle)||(angle+PI2>=startAngle&&angle+PI2<=endAngle)){if(angle>Math.PI/2&&angle<Math.PI*1.5){dir=-dir}w+=dir}}}return w}function containPath(data,lineWidth,isStroke,x,y){var w=0;var xi=0;var yi=0;var x0=0;var y0=0;for(var i=0;i<data.length;){var cmd=data[i++];if(cmd===CMD.M&&i>1){if(!isStroke){w+=windingLine(xi,yi,x0,y0,x,y)}}if(i==1){xi=data[i];yi=data[i+1];x0=xi;y0=yi}switch(cmd){case CMD.M:x0=data[i++];y0=data[i++];xi=x0;yi=y0;break;case CMD.L:if(isStroke){if(containStroke(xi,yi,data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.C:if(isStroke){if(cubic.containStroke(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingCubic(xi,yi,data[i++],data[i++],data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.Q:if(isStroke){if(quadratic.containStroke(xi,yi,data[i++],data[i++],data[i],data[i+1],lineWidth,x,y)){return true}}else{w+=windingQuadratic(xi,yi,data[i++],data[i++],data[i],data[i+1],x,y)||0}xi=data[i++];yi=data[i++];break;case CMD.A:var cx=data[i++];var cy=data[i++];var rx=data[i++];var ry=data[i++];var theta=data[i++];var dTheta=data[i++];var psi=data[i++];var anticlockwise=1-data[i++];var x1=Math.cos(theta)*rx+cx;var y1=Math.sin(theta)*ry+cy;if(i>1){w+=windingLine(xi,yi,x1,y1,x,y)}else{x0=x1;y0=y1}var _x=(x-cx)*ry/rx+cx;if(isStroke){if(arc.containStroke(cx,cy,ry,theta,theta+dTheta,anticlockwise,lineWidth,_x,y)){return true}}else{w+=windingArc(cx,cy,ry,theta,theta+dTheta,anticlockwise,_x,y)}xi=Math.cos(theta+dTheta)*rx+cx;yi=Math.sin(theta+dTheta)*ry+cy;break;case CMD.R:x0=xi=data[i++];y0=yi=data[i++];var width=data[i++];var height=data[i++];var x1=x0+width;var y1=y0+height;if(isStroke){if(containStroke(x0,y0,x1,y0,lineWidth,x,y)||containStroke(x1,y0,x1,y1,lineWidth,x,y)||containStroke(x1,y1,x0,y1,lineWidth,x,y)||containStroke(x0,y1,x0,y0,lineWidth,x,y)){return true}}else{w+=windingLine(x1,y0,x1,y1,x,y);w+=windingLine(x0,y1,x0,y0,x,y)}break;case CMD.Z:if(isStroke){if(containStroke(xi,yi,x0,y0,lineWidth,x,y)){return true}}else{w+=windingLine(xi,yi,x0,y0,x,y)}xi=x0;yi=y0;break}}if(!isStroke&&!isAroundEqual(yi,y0)){w+=windingLine(xi,yi,x0,y0,x,y)||0}return w!==0}module.exports={contain:function(pathData,x,y){return containPath(pathData,0,false,x,y)},containStroke:function(pathData,lineWidth,x,y){return containPath(pathData,lineWidth,true,x,y)}}}),(function(module,exports){module.exports={containStroke:function(x0,y0,x1,y1,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;var _a=0;var _b=x0;if((y>y0+_l&&y>y1+_l)||(y<y0-_l&&y<y1-_l)||(x>x0+_l&&x>x1+_l)||(x<x0-_l&&x<x1-_l)){return false}if(x0!==x1){_a=(y0-y1)/(x0-x1);_b=(x0*y1-x1*y0)/(x0-x1)}else{return Math.abs(x-x0)<=_l/2}var tmp=_a*x-y+_b;var _s=tmp*tmp/(_a*_a+1);return _s<=_l/2*_l/2}}}),(function(module,exports,__webpack_require__){var curve=__webpack_require__(4);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,x3,y3,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l&&y>y3+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l&&y<y3-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l&&x>x3+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l&&x<x3-_l)){return false}var d=curve.cubicProjectPoint(x0,y0,x1,y1,x2,y2,x3,y3,x,y,null);return d<=_l/2}}}),(function(module,exports,__webpack_require__){var curve=__webpack_require__(4);module.exports={containStroke:function(x0,y0,x1,y1,x2,y2,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;if((y>y0+_l&&y>y1+_l&&y>y2+_l)||(y<y0-_l&&y<y1-_l&&y<y2-_l)||(x>x0+_l&&x>x1+_l&&x>x2+_l)||(x<x0-_l&&x<x1-_l&&x<x2-_l)){return false}var d=curve.quadraticProjectPoint(x0,y0,x1,y1,x2,y2,x,y,null);return d<=_l/2}}}),(function(module,exports,__webpack_require__){var normalizeRadian=__webpack_require__(22).normalizeRadian;var PI2=Math.PI*2;module.exports={containStroke:function(cx,cy,r,startAngle,endAngle,anticlockwise,lineWidth,x,y){if(lineWidth===0){return false}var _l=lineWidth;x-=cx;y-=cy;var d=Math.sqrt(x*x+y*y);if((d-_l>r)||(d+_l<r)){return false}if(Math.abs(startAngle-endAngle)%PI2<1e-4){return true}if(anticlockwise){var tmp=startAngle;startAngle=normalizeRadian(endAngle);endAngle=normalizeRadian(tmp)}else{startAngle=normalizeRadian(startAngle);endAngle=normalizeRadian(endAngle)}if(startAngle>endAngle){endAngle+=PI2}var angle=Math.atan2(y,x);if(angle<0){angle+=PI2}return(angle>=startAngle&&angle<=endAngle)||(angle+PI2>=startAngle&&angle+PI2<=endAngle)}}}),(function(module,exports){module.exports=function windingLine(x0,y0,x1,y1,x,y){if((y>y0&&y>y1)||(y<y0&&y<y1)){return 0}if(y1===y0){return 0}var dir=y1<y0?1:-1;var t=(y-y0)/(y1-y0);if(t===1||t===0){dir=y1<y0?0.5:-0.5}var x_=t*(x1-x0)+x0;return x_>x?dir:0}}),(function(module,exports){var Pattern=function(image,repeat){this.image=image;this.repeat=repeat;this.type='pattern'};Pattern.prototype.getCanvasPattern=function(ctx){return ctx.createPattern(this.image,this.repeat||'repeat')};module.exports=Pattern}),(function(module,exports,__webpack_require__){var CMD=__webpack_require__(6).CMD;var vec2=__webpack_require__(2);var v2ApplyTransform=vec2.applyTransform;var points=[[],[],[]];var mathSqrt=Math.sqrt;var mathAtan2=Math.atan2;function transformPath(path,m){var data=path.data;var cmd;var nPoint;var i;var j;var k;var p;var M=CMD.M;var C=CMD.C;var L=CMD.L;var R=CMD.R;var A=CMD.A;var Q=CMD.Q;for(i=0,j=0;i<data.length;){cmd=data[i++];j=i;nPoint=0;switch(cmd){case M:nPoint=1;break;case L:nPoint=1;break;case C:nPoint=3;break;case Q:nPoint=2;break;case A:var x=m[4];var y=m[5];var sx=mathSqrt(m[0]*m[0]+m[1]*m[1]);var sy=mathSqrt(m[2]*m[2]+m[3]*m[3]);var angle=mathAtan2(-m[1]/sy,m[0]/sx);data[i]*=sx;data[i++]+=x;data[i]*=sy;data[i++]+=y;data[i++]*=sx;data[i++]*=sy;data[i++]+=angle;data[i++]+=angle;i+=2;j=i;break;case R:p[0]=data[i++];p[1]=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1];p[0]+=data[i++];p[1]+=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}for(k=0;k<nPoint;k++){var p=points[k];p[0]=data[i++];p[1]=data[i++];v2ApplyTransform(p,p,m);data[j++]=p[0];data[j++]=p[1]}}}module.exports=transformPath}),(function(module,exports,__webpack_require__){var zrUtil=__webpack_require__(0);var Element=__webpack_require__(16);var BoundingRect=__webpack_require__(3);var Group=function(opts){opts=opts||{};Element.call(this,opts);for(var key in opts){if(opts.hasOwnProperty(key)){this[key]=opts[key]}}this._children=[];this.__storage=null;this.__dirty=true};Group.prototype={constructor:Group,isGroup:true,type:'group',silent:false,children:function(){return this._children.slice()},childAt:function(idx){return this._children[idx]},childOfName:function(name){var children=this._children;for(var i=0;i<children.length;i++){if(children[i].name===name){return children[i]}}},childCount:function(){return this._children.length},add:function(child){if(child&&child!==this&&child.parent!==this){this._children.push(child);this._doAdd(child)}return this},addBefore:function(child,nextSibling){if(child&&child!==this&&child.parent!==this&&nextSibling&&nextSibling.parent===this){var children=this._children;var idx=children.indexOf(nextSibling);if(idx>=0){children.splice(idx,0,child);this._doAdd(child)}}return this},_doAdd:function(child){if(child.parent){child.parent.remove(child)}child.parent=this;var storage=this.__storage;var zr=this.__zr;if(storage&&storage!==child.__storage){storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}zr&&zr.refresh()},remove:function(child){var zr=this.__zr;var storage=this.__storage;var children=this._children;var idx=zrUtil.indexOf(children,child);if(idx<0){return this}children.splice(idx,1);child.parent=null;if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}zr&&zr.refresh();return this},removeAll:function(){var children=this._children;var storage=this.__storage;var child;var i;for(i=0;i<children.length;i++){child=children[i];if(storage){storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}child.parent=null}children.length=0;return this},eachChild:function(cb,context){var children=this._children;for(var i=0;i<children.length;i++){var child=children[i];cb.call(context,child,i)}return this},traverse:function(cb,context){for(var i=0;i<this._children.length;i++){var child=this._children[i];cb.call(context,child);if(child.type==='group'){child.traverse(cb,context)}}return this},addChildrenToStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.addToStorage(child);if(child instanceof Group){child.addChildrenToStorage(storage)}}},delChildrenFromStorage:function(storage){for(var i=0;i<this._children.length;i++){var child=this._children[i];storage.delFromStorage(child);if(child instanceof Group){child.delChildrenFromStorage(storage)}}},dirty:function(){this.__dirty=true;this.__zr&&this.__zr.refresh();return this},getBoundingRect:function(includeChildren){var rect=null;var tmpRect=new BoundingRect(0,0,0,0);var children=includeChildren||this._children;var tmpMat=[];for(var i=0;i<children.length;i++){var child=children[i];if(child.ignore||child.invisible){continue}var childRect=child.getBoundingRect();var transform=child.getLocalTransform(tmpMat);if(transform){tmpRect.copy(childRect);tmpRect.applyTransform(transform);rect=rect||tmpRect.clone();rect.union(tmpRect)}else{rect=rect||childRect.clone();rect.union(childRect)}}return rect||tmpRect}};zrUtil.inherits(Group,Element);module.exports=Group}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(12);var BoundingRect=__webpack_require__(3);var zrUtil=__webpack_require__(0);var imageHelper=__webpack_require__(10);function ZImage(opts){Displayable.call(this,opts)}ZImage.prototype={constructor:ZImage,type:'image',brush:function(ctx,prevEl){var style=this.style;var src=style.image;style.bind(ctx,this,prevEl);var image=this._image=imageHelper.createOrUpdateImage(src,this._image,this);if(!image||!imageHelper.isImageReady(image)){return}var x=style.x||0;var y=style.y||0;var width=style.width;var height=style.height;var aspect=image.width/image.height;if(width==null&&height!=null){width=height*aspect}else if(height==null&&width!=null){height=width/aspect}else if(width==null&&height==null){width=image.width;height=image.height}this.setTransform(ctx);if(style.sWidth&&style.sHeight){var sx=style.sx||0;var sy=style.sy||0;ctx.drawImage(image,sx,sy,style.sWidth,style.sHeight,x,y,width,height)}else if(style.sx&&style.sy){var sx=style.sx;var sy=style.sy;var sWidth=width-sx;var sHeight=height-sy;ctx.drawImage(image,sx,sy,sWidth,sHeight,x,y,width,height)}else{ctx.drawImage(image,x,y,width,height)}this.restoreTransform(ctx);if(style.text!=null){this.drawRectText(ctx,this.getBoundingRect())}},getBoundingRect:function(){var style=this.style;if(!this._rect){this._rect=new BoundingRect(style.x||0,style.y||0,style.width||0,style.height||0)}return this._rect}};zrUtil.inherits(ZImage,Displayable);module.exports=ZImage}),(function(module,exports,__webpack_require__){var Displayable=__webpack_require__(12);var zrUtil=__webpack_require__(0);var textContain=__webpack_require__(5);var textHelper=__webpack_require__(20);var Text=function(opts){Displayable.call(this,opts)};Text.prototype={constructor:Text,type:'text',brush:function(ctx,prevEl){var style=this.style;this.__dirty&&textHelper.normalizeTextStyle(style,true);style.fill=style.stroke=style.shadowBlur=style.shadowColor=style.shadowOffsetX=style.shadowOffsetY=null;var text=style.text;text!=null&&(text+='');style.bind(ctx,this,prevEl);if(!textHelper.needDrawText(text,style)){return}this.setTransform(ctx);textHelper.renderText(this,ctx,text,style);this.restoreTransform(ctx)},getBoundingRect:function(){var style=this.style;this.__dirty&&textHelper.normalizeTextStyle(style,true);if(!this._rect){var text=style.text;text!=null?(text+=''):(text='');var rect=textContain.getBoundingRect(style.text+'',style.font,style.textAlign,style.textVerticalAlign,style.textPadding,style.rich);rect.x+=style.x||0;rect.y+=style.y||0;if(textHelper.getStroke(style.textStroke,style.textStrokeWidth)){var w=style.textStrokeWidth;rect.x-=w/2;rect.y-=w/2;rect.width+=w;rect.height+=w}this._rect=rect}return this._rect}};zrUtil.inherits(Text,Displayable);module.exports=Text}),(function(module,exports,__webpack_require__){"use strict";module.exports=__webpack_require__(1).extend({type:'circle',shape:{cx:0,cy:0,r:0},buildPath:function(ctx,shape,inBundle){if(inBundle){ctx.moveTo(shape.cx+shape.r,shape.cy)}ctx.arc(shape.cx,shape.cy,shape.r,0,Math.PI*2,true)}})}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(1);var fixClipWithShadow=__webpack_require__(61);module.exports=Path.extend({type:'sector',shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},brush:fixClipWithShadow(Path.prototype.brush),buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var r0=Math.max(shape.r0||0,0);var r=Math.max(shape.r,0);var startAngle=shape.startAngle;var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r0+x,unitY*r0+y);ctx.lineTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise);ctx.lineTo(Math.cos(endAngle)*r0+x,Math.sin(endAngle)*r0+y);if(r0!==0){ctx.arc(x,y,r0,endAngle,startAngle,clockwise)}ctx.closePath()}})}),(function(module,exports,__webpack_require__){var env=__webpack_require__(15);var shadowTemp=[['shadowBlur',0],['shadowColor','#000'],['shadowOffsetX',0],['shadowOffsetY',0]];module.exports=function(orignalBrush){return(env.browser.ie&&env.browser.version>=11)?function(){var clipPaths=this.__clipPaths;var style=this.style;var modified;if(clipPaths){for(var i=0;i<clipPaths.length;i++){var clipPath=clipPaths[i];var shape=clipPath&&clipPath.shape;var type=clipPath&&clipPath.type;if(shape&&((type==='sector'&&shape.startAngle===shape.endAngle)||(type==='rect'&&(!shape.width||!shape.height)))){for(var j=0;j<shadowTemp.length;j++){shadowTemp[j][2]=style[shadowTemp[j][0]];style[shadowTemp[j][0]]=shadowTemp[j][1]}modified=true;break}}}orignalBrush.apply(this,arguments);if(modified){for(var j=0;j<shadowTemp.length;j++){style[shadowTemp[j][0]]=shadowTemp[j][2]}}}:orignalBrush}}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(1).extend({type:'ring',shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var PI2=Math.PI*2;ctx.moveTo(x+shape.r,y);ctx.arc(x,y,shape.r,0,PI2,false);ctx.moveTo(x+shape.r0,y);ctx.arc(x,y,shape.r0,0,PI2,true)}})}),(function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(23);module.exports=__webpack_require__(1).extend({type:'polygon',shape:{points:null,smooth:false,smoothConstraint:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,true)}})}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(2);function interpolate(p0,p1,p2,p3,t,t2,t3){var v0=(p2-p0)*0.5;var v1=(p3-p1)*0.5;return(2*(p1-p2)+v0+v1)*t3+(-3*(p1-p2)-2*v0-v1)*t2+v0*t+p1}module.exports=function(points,isLoop){var len=points.length;var ret=[];var distance=0;for(var i=1;i<len;i++){distance+=vec2.distance(points[i-1],points[i])}var segs=distance/2;segs=segs<len?len:segs;for(var i=0;i<segs;i++){var pos=i/(segs-1)*(isLoop?len:len-1);var idx=Math.floor(pos);var w=pos-idx;var p0;var p1=points[idx%len];var p2;var p3;if(!isLoop){p0=points[idx===0?idx:idx-1];p2=points[idx>len-2?len-1:idx+1];p3=points[idx>len-3?len-1:idx+2]}else{p0=points[(idx-1+len)%len];p2=points[(idx+1)%len];p3=points[(idx+2)%len]}var w2=w*w;var w3=w*w2;ret.push([interpolate(p0[0],p1[0],p2[0],p3[0],w,w2,w3),interpolate(p0[1],p1[1],p2[1],p3[1],w,w2,w3)])}return ret}}),(function(module,exports,__webpack_require__){var vec2=__webpack_require__(2);var v2Min=vec2.min;var v2Max=vec2.max;var v2Scale=vec2.scale;var v2Distance=vec2.distance;var v2Add=vec2.add;module.exports=function(points,smooth,isLoop,constraint){var cps=[];var v=[];var v1=[];var v2=[];var prevPoint;var nextPoint;var min,max;if(constraint){min=[Infinity,Infinity];max=[-Infinity,-Infinity];for(var i=0,len=points.length;i<len;i++){v2Min(min,min,points[i]);v2Max(max,max,points[i])}v2Min(min,min,constraint[0]);v2Max(max,max,constraint[1])}for(var i=0,len=points.length;i<len;i++){var point=points[i];if(isLoop){prevPoint=points[i?i-1:len-1];nextPoint=points[(i+1)%len]}else{if(i===0||i===len-1){cps.push(vec2.clone(points[i]));continue}else{prevPoint=points[i-1];nextPoint=points[i+1]}}vec2.sub(v,nextPoint,prevPoint);v2Scale(v,v,smooth);var d0=v2Distance(point,prevPoint);var d1=v2Distance(point,nextPoint);var sum=d0+d1;if(sum!==0){d0/=sum;d1/=sum}v2Scale(v1,v,-d0);v2Scale(v2,v,d1);var cp0=v2Add([],point,v1);var cp1=v2Add([],point,v2);if(constraint){v2Max(cp0,cp0,min);v2Min(cp0,cp0,max);v2Max(cp1,cp1,min);v2Min(cp1,cp1,max)}cps.push(cp0);cps.push(cp1)}if(isLoop){cps.push(cps.shift())}return cps}}),(function(module,exports,__webpack_require__){var polyHelper=__webpack_require__(23);module.exports=__webpack_require__(1).extend({type:'polyline',shape:{points:null,smooth:false,smoothConstraint:null},style:{stroke:'#000',fill:null},buildPath:function(ctx,shape){polyHelper.buildPath(ctx,shape,false)}})}),(function(module,exports,__webpack_require__){var roundRectHelper=__webpack_require__(21);module.exports=__webpack_require__(1).extend({type:'rect',shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(ctx,shape){var x=shape.x;var y=shape.y;var width=shape.width;var height=shape.height;if(!shape.r){ctx.rect(x,y,width,height)}else{roundRectHelper.buildPath(ctx,shape)}ctx.closePath();return}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(1).extend({type:'line',shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(ctx,shape){var x1=shape.x1;var y1=shape.y1;var x2=shape.x2;var y2=shape.y2;var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(percent<1){x2=x1*(1-percent)+x2*percent;y2=y1*(1-percent)+y2*percent}ctx.lineTo(x2,y2)},pointAt:function(p){var shape=this.shape;return[shape.x1*(1-p)+shape.x2*p,shape.y1*(1-p)+shape.y2*p]}})}),(function(module,exports,__webpack_require__){"use strict";var curveTool=__webpack_require__(4);var vec2=__webpack_require__(2);var quadraticSubdivide=curveTool.quadraticSubdivide;var cubicSubdivide=curveTool.cubicSubdivide;var quadraticAt=curveTool.quadraticAt;var cubicAt=curveTool.cubicAt;var quadraticDerivativeAt=curveTool.quadraticDerivativeAt;var cubicDerivativeAt=curveTool.cubicDerivativeAt;var out=[];function someVectorAt(shape,t,isTangent){var cpx2=shape.cpx2;var cpy2=shape.cpy2;if(cpx2===null||cpy2===null){return[(isTangent?cubicDerivativeAt:cubicAt)(shape.x1,shape.cpx1,shape.cpx2,shape.x2,t),(isTangent?cubicDerivativeAt:cubicAt)(shape.y1,shape.cpy1,shape.cpy2,shape.y2,t)]}else{return[(isTangent?quadraticDerivativeAt:quadraticAt)(shape.x1,shape.cpx1,shape.x2,t),(isTangent?quadraticDerivativeAt:quadraticAt)(shape.y1,shape.cpy1,shape.y2,t)]}}module.exports=__webpack_require__(1).extend({type:'bezier-curve',shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:'#000',fill:null},buildPath:function(ctx,shape){var x1=shape.x1;var y1=shape.y1;var x2=shape.x2;var y2=shape.y2;var cpx1=shape.cpx1;var cpy1=shape.cpy1;var cpx2=shape.cpx2;var cpy2=shape.cpy2;var percent=shape.percent;if(percent===0){return}ctx.moveTo(x1,y1);if(cpx2==null||cpy2==null){if(percent<1){quadraticSubdivide(x1,cpx1,x2,percent,out);cpx1=out[1];x2=out[2];quadraticSubdivide(y1,cpy1,y2,percent,out);cpy1=out[1];y2=out[2]}ctx.quadraticCurveTo(cpx1,cpy1,x2,y2)}else{if(percent<1){cubicSubdivide(x1,cpx1,cpx2,x2,percent,out);cpx1=out[1];cpx2=out[2];x2=out[3];cubicSubdivide(y1,cpy1,cpy2,y2,percent,out);cpy1=out[1];cpy2=out[2];y2=out[3]}ctx.bezierCurveTo(cpx1,cpy1,cpx2,cpy2,x2,y2)}},pointAt:function(t){return someVectorAt(this.shape,t,false)},tangentAt:function(t){var p=someVectorAt(this.shape,t,true);return vec2.normalize(p,p)}})}),(function(module,exports,__webpack_require__){module.exports=__webpack_require__(1).extend({type:'arc',shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:Math.PI*2,clockwise:true},style:{stroke:'#000',fill:null},buildPath:function(ctx,shape){var x=shape.cx;var y=shape.cy;var r=Math.max(shape.r,0);var startAngle=shape.startAngle;var endAngle=shape.endAngle;var clockwise=shape.clockwise;var unitX=Math.cos(startAngle);var unitY=Math.sin(startAngle);ctx.moveTo(unitX*r+x,unitY*r+y);ctx.arc(x,y,r,startAngle,endAngle,!clockwise)}})}),(function(module,exports,__webpack_require__){var Path=__webpack_require__(1);module.exports=Path.extend({type:'compound',shape:{paths:null},_updatePathDirty:function(){var dirtyPath=this.__dirtyPath;var paths=this.shape.paths;for(var i=0;i<paths.length;i++){dirtyPath=dirtyPath||paths[i].__dirtyPath}this.__dirtyPath=dirtyPath;this.__dirty=this.__dirty||dirtyPath},beforeBrush:function(){this._updatePathDirty();var paths=this.shape.paths||[];var scale=this.getGlobalScale();for(var i=0;i<paths.length;i++){if(!paths[i].path){paths[i].createPathProxy()}paths[i].path.setScale(scale[0],scale[1])}},buildPath:function(ctx,shape){var paths=shape.paths||[];for(var i=0;i<paths.length;i++){paths[i].buildPath(ctx,paths[i].shape,true)}},afterBrush:function(){var paths=this.shape.paths;for(var i=0;i<paths.length;i++){paths[i].__dirtyPath=false}},getBoundingRect:function(){this._updatePathDirty();return Path.prototype.getBoundingRect.call(this)}})}),(function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(0);var Gradient=__webpack_require__(24);var LinearGradient=function(x,y,x2,y2,colorStops,globalCoord){this.x=x==null?0:x;this.y=y==null?0:y;this.x2=x2==null?1:x2;this.y2=y2==null?0:y2;this.type='linear';this.global=globalCoord||false;Gradient.call(this,colorStops)};LinearGradient.prototype={constructor:LinearGradient};zrUtil.inherits(LinearGradient,Gradient);module.exports=LinearGradient}),(function(module,exports,__webpack_require__){"use strict";var zrUtil=__webpack_require__(0);var Gradient=__webpack_require__(24);var RadialGradient=function(x,y,r,colorStops,globalCoord){this.x=x==null?0.5:x;this.y=y==null?0.5:y;this.r=r==null?0.5:r;this.type='radial';this.global=globalCoord||false;Gradient.call(this,colorStops)};RadialGradient.prototype={constructor:RadialGradient};zrUtil.inherits(RadialGradient,Gradient);module.exports=RadialGradient}),(function(module,exports,__webpack_require__){var getItemStyle=__webpack_require__(11)([['fill','color'],['stroke','borderColor'],['lineWidth','borderWidth'],['opacity'],['shadowBlur'],['shadowOffsetX'],['shadowOffsetY'],['shadowColor'],['textPosition'],['textAlign']]);module.exports={getItemStyle:function(excludes,includes){var style=getItemStyle.call(this,excludes,includes);var lineDash=this.getBorderLineDash();lineDash&&(style.lineDash=lineDash);return style},getBorderLineDash:function(){var lineType=this.get('borderType');return(lineType==='solid'||lineType==null)?null:(lineType==='dashed'?[5,5]:[1,1])}}}),(function(module,exports,__webpack_require__){var echarts=__webpack_require__(7);function getShallow(model,path){return model&&model.getShallow(path)}echarts.extendChartView({type:'wordCloud',render:function(seriesModel,ecModel,api){var group=this.group;group.removeAll();var data=seriesModel.getData();var gridSize=seriesModel.get('gridSize');seriesModel.layoutInstance.ondraw=function(text,size,dataIdx,drawn){var itemModel=data.getItemModel(dataIdx);var textStyleModel=itemModel.getModel('textStyle.normal');var emphasisTextStyleModel=itemModel.getModel('textStyle.emphasis');var textEl=new echarts.graphic.Text({style:echarts.graphic.setTextStyle({},textStyleModel,{x:drawn.info.fillTextOffsetX,y:drawn.info.fillTextOffsetY+size*0.5,text:text,textBaseline:'middle',textFill:data.getItemVisual(dataIdx,'color'),fontSize:size}),scale:[1/drawn.info.mu,1/drawn.info.mu],position:[(drawn.gx+drawn.info.gw/2)*gridSize,(drawn.gy+drawn.info.gh/2)*gridSize],rotation:drawn.rot});group.add(textEl);data.setItemGraphicEl(dataIdx,textEl);echarts.graphic.setHoverStyle(textEl,echarts.graphic.setTextStyle({},emphasisTextStyleModel,null,{forMerge:true},true))};this._model=seriesModel},remove:function(){this.group.removeAll();this._model.layoutInstance.dispose()},dispose:function(){this._model.layoutInstance.dispose()}})}),(function(module,exports,__webpack_require__){"use strict";var __WEBPACK_AMD_DEFINE_ARRAY__,__WEBPACK_AMD_DEFINE_RESULT__;if(!window.setImmediate){window.setImmediate=(function setupSetImmediate(){return window.msSetImmediate||window.webkitSetImmediate||window.mozSetImmediate||window.oSetImmediate||(function setupSetZeroTimeout(){if(!window.postMessage||!window.addEventListener){return null}var callbacks=[undefined];var message='zero-timeout-message';var setZeroTimeout=function setZeroTimeout(callback){var id=callbacks.length;callbacks.push(callback);window.postMessage(message+id.toString(36),'*');return id};window.addEventListener('message',function setZeroTimeoutMessage(evt){if(typeof evt.data!=='string'||evt.data.substr(0,message.length)!==message){return}evt.stopImmediatePropagation();var id=parseInt(evt.data.substr(message.length),36);if(!callbacks[id]){return}callbacks[id]();callbacks[id]=undefined},true);window.clearImmediate=function clearZeroTimeout(id){if(!callbacks[id]){return}callbacks[id]=undefined};return setZeroTimeout})()||function setImmediateFallback(fn){window.setTimeout(fn,0)}})()}if(!window.clearImmediate){window.clearImmediate=(function setupClearImmediate(){return window.msClearImmediate||window.webkitClearImmediate||window.mozClearImmediate||window.oClearImmediate||function clearImmediateFallback(timer){window.clearTimeout(timer)}})()}(function(global){var isSupported=(function isSupported(){var canvas=document.createElement('canvas');if(!canvas||!canvas.getContext){return false}var ctx=canvas.getContext('2d');if(!ctx.getImageData){return false}if(!ctx.fillText){return false}if(!Array.prototype.some){return false}if(!Array.prototype.push){return false}return true}());var minFontSize=(function getMinFontSize(){if(!isSupported){return}var ctx=document.createElement('canvas').getContext('2d');var size=20;var hanWidth,mWidth;while(size){ctx.font=size.toString(10)+'px sans-serif';if((ctx.measureText('\uFF37').width===hanWidth)&&(ctx.measureText('m').width)===mWidth){return(size+1)}hanWidth=ctx.measureText('\uFF37').width;mWidth=ctx.measureText('m').width;size--}return 0})();var shuffleArray=function shuffleArray(arr){for(var j,x,i=arr.length;i;j=Math.floor(Math.random()*i),x=arr[--i],arr[i]=arr[j],arr[j]=x){}return arr};var WordCloud=function WordCloud(elements,options){if(!isSupported){return}if(!Array.isArray(elements)){elements=[elements]}elements.forEach(function(el,i){if(typeof el==='string'){elements[i]=document.getElementById(el);if(!elements[i]){throw'The element id specified is not found.';}}else if(!el.tagName&&!el.appendChild){throw'You must pass valid HTML elements, or ID of the element.';}});var settings={list:[],fontFamily:'"Trebuchet MS", "Heiti TC", "微軟正黑體", "Arial Unicode MS", "Droid Fallback Sans", sans-serif',fontWeight:'normal',color:'random-dark',minSize:0,weightFactor:1,clearCanvas:true,backgroundColor:'#fff',gridSize:8,drawOutOfBound:false,origin:null,drawMask:false,maskColor:'rgba(255,0,0,0.3)',maskGapWidth:0.3,wait:0,abortThreshold:0,abort:function noop(){},minRotation:-Math.PI/2,maxRotation:Math.PI/2,rotationStep:0.1,shuffle:true,rotateRatio:0.1,shape:'circle',ellipticity:0.65,classes:null,hover:null,click:null};if(options){for(var key in options){if(key in settings){settings[key]=options[key]}}}if(typeof settings.weightFactor!=='function'){var factor=settings.weightFactor;settings.weightFactor=function weightFactor(pt){return pt*factor}}if(typeof settings.shape!=='function'){switch(settings.shape){case'circle':default:settings.shape='circle';break;case'cardioid':settings.shape=function shapeCardioid(theta){return 1-Math.sin(theta)};break;case'diamond':case'square':settings.shape=function shapeSquare(theta){var thetaPrime=theta%(2*Math.PI/4);return 1/(Math.cos(thetaPrime)+Math.sin(thetaPrime))};break;case'triangle-forward':settings.shape=function shapeTriangle(theta){var thetaPrime=theta%(2*Math.PI/3);return 1/(Math.cos(thetaPrime)+Math.sqrt(3)*Math.sin(thetaPrime))};break;case'triangle':case'triangle-upright':settings.shape=function shapeTriangle(theta){var thetaPrime=(theta+Math.PI*3/2)%(2*Math.PI/3);return 1/(Math.cos(thetaPrime)+Math.sqrt(3)*Math.sin(thetaPrime))};break;case'pentagon':settings.shape=function shapePentagon(theta){var thetaPrime=(theta+0.955)%(2*Math.PI/5);return 1/(Math.cos(thetaPrime)+0.726543*Math.sin(thetaPrime))};break;case'star':settings.shape=function shapeStar(theta){var thetaPrime=(theta+0.955)%(2*Math.PI/10);if((theta+0.955)%(2*Math.PI/5)-(2*Math.PI/10)>=0){return 1/(Math.cos((2*Math.PI/10)-thetaPrime)+3.07768*Math.sin((2*Math.PI/10)-thetaPrime))}else{return 1/(Math.cos(thetaPrime)+3.07768*Math.sin(thetaPrime))}};break}}settings.gridSize=Math.max(Math.floor(settings.gridSize),4);var g=settings.gridSize;var maskRectWidth=g-settings.maskGapWidth;var rotationRange=Math.abs(settings.maxRotation-settings.minRotation);var minRotation=Math.min(settings.maxRotation,settings.minRotation);var rotationStep=settings.rotationStep;var grid,ngx,ngy,center,maxRadius;var escapeTime;var getTextColor;function random_hsl_color(min,max){return'hsl('+(Math.random()*360).toFixed()+','+(Math.random()*30+70).toFixed()+'%,'+(Math.random()*(max-min)+min).toFixed()+'%)'}switch(settings.color){case'random-dark':getTextColor=function getRandomDarkColor(){return random_hsl_color(10,50)};break;case'random-light':getTextColor=function getRandomLightColor(){return random_hsl_color(50,90)};break;default:if(typeof settings.color==='function'){getTextColor=settings.color}break}var getTextClasses=null;if(typeof settings.classes==='function'){getTextClasses=settings.classes}var interactive=false;var infoGrid=[];var hovered;var getInfoGridFromMouseTouchEvent=function getInfoGridFromMouseTouchEvent(evt){var canvas=evt.currentTarget;var rect=canvas.getBoundingClientRect();var clientX;var clientY;if(evt.touches){clientX=evt.touches[0].clientX;clientY=evt.touches[0].clientY}else{clientX=evt.clientX;clientY=evt.clientY}var eventX=clientX-rect.left;var eventY=clientY-rect.top;var x=Math.floor(eventX*((canvas.width/rect.width)||1)/g);var y=Math.floor(eventY*((canvas.height/rect.height)||1)/g);return infoGrid[x][y]};var wordcloudhover=function wordcloudhover(evt){var info=getInfoGridFromMouseTouchEvent(evt);if(hovered===info){return}hovered=info;if(!info){settings.hover(undefined,undefined,evt);return}settings.hover(info.item,info.dimension,evt)};var wordcloudclick=function wordcloudclick(evt){var info=getInfoGridFromMouseTouchEvent(evt);if(!info){return}settings.click(info.item,info.dimension,evt);evt.preventDefault()};var pointsAtRadius=[];var getPointsAtRadius=function getPointsAtRadius(radius){if(pointsAtRadius[radius]){return pointsAtRadius[radius]}var T=radius*8;var t=T;var points=[];if(radius===0){points.push([center[0],center[1],0])}while(t--){var rx=1;if(settings.shape!=='circle'){rx=settings.shape(t/T*2*Math.PI)}points.push([center[0]+radius*rx*Math.cos(-t/T*2*Math.PI),center[1]+radius*rx*Math.sin(-t/T*2*Math.PI)*settings.ellipticity,t/T*2*Math.PI])}pointsAtRadius[radius]=points;return points};var exceedTime=function exceedTime(){return((settings.abortThreshold>0)&&((new Date()).getTime()-escapeTime>settings.abortThreshold))};var getRotateDeg=function getRotateDeg(){if(settings.rotateRatio===0){return 0}if(Math.random()>settings.rotateRatio){return 0}if(rotationRange===0){return minRotation}return minRotation+Math.round(Math.random()*rotationRange/rotationStep)*rotationStep};var getTextInfo=function getTextInfo(word,weight,rotateDeg){var debug=false;var fontSize=settings.weightFactor(weight);if(fontSize<=settings.minSize){return false}var mu=1;if(fontSize<minFontSize){mu=(function calculateScaleFactor(){var mu=2;while(mu*fontSize<minFontSize){mu+=2}return mu})()}var fcanvas=document.createElement('canvas');var fctx=fcanvas.getContext('2d',{willReadFrequently:true});fctx.font=settings.fontWeight+' '+(fontSize*mu).toString(10)+'px '+settings.fontFamily;var fw=fctx.measureText(word).width/mu;var fh=Math.max(fontSize*mu,fctx.measureText('m').width,fctx.measureText('\uFF37').width)/mu;var boxWidth=fw+fh*2;var boxHeight=fh*3;var fgw=Math.ceil(boxWidth/g);var fgh=Math.ceil(boxHeight/g);boxWidth=fgw*g;boxHeight=fgh*g;var fillTextOffsetX=-fw/2;var fillTextOffsetY=-fh*0.4;var cgh=Math.ceil((boxWidth*Math.abs(Math.sin(rotateDeg))+boxHeight*Math.abs(Math.cos(rotateDeg)))/g);var cgw=Math.ceil((boxWidth*Math.abs(Math.cos(rotateDeg))+boxHeight*Math.abs(Math.sin(rotateDeg)))/g);var width=cgw*g;var height=cgh*g;fcanvas.setAttribute('width',width);fcanvas.setAttribute('height',height);if(debug){document.body.appendChild(fcanvas);fctx.save()}fctx.scale(1/mu,1/mu);fctx.translate(width*mu/2,height*mu/2);fctx.rotate(-rotateDeg);fctx.font=settings.fontWeight+' '+(fontSize*mu).toString(10)+'px '+settings.fontFamily;fctx.fillStyle='#000';fctx.textBaseline='middle';fctx.fillText(word,fillTextOffsetX*mu,(fillTextOffsetY+fontSize*0.5)*mu);var imageData=fctx.getImageData(0,0,width,height).data;if(exceedTime()){return false}if(debug){fctx.strokeRect(fillTextOffsetX*mu,fillTextOffsetY,fw*mu,fh*mu);fctx.restore()}var occupied=[];var gx=cgw,gy,x,y;var bounds=[cgh/2,cgw/2,cgh/2,cgw/2];while(gx--){gy=cgh;while(gy--){y=g;singleGridLoop:{while(y--){x=g;while(x--){if(imageData[((gy*g+y)*width+(gx*g+x))*4+3]){occupied.push([gx,gy]);if(gx<bounds[3]){bounds[3]=gx}if(gx>bounds[1]){bounds[1]=gx}if(gy<bounds[0]){bounds[0]=gy}if(gy>bounds[2]){bounds[2]=gy}if(debug){fctx.fillStyle='rgba(255, 0, 0, 0.5)';fctx.fillRect(gx*g,gy*g,g-0.5,g-0.5)}break singleGridLoop}}}if(debug){fctx.fillStyle='rgba(0, 0, 255, 0.5)';fctx.fillRect(gx*g,gy*g,g-0.5,g-0.5)}}}}if(debug){fctx.fillStyle='rgba(0, 255, 0, 0.5)';fctx.fillRect(bounds[3]*g,bounds[0]*g,(bounds[1]-bounds[3]+1)*g,(bounds[2]-bounds[0]+1)*g)}return{mu:mu,occupied:occupied,bounds:bounds,gw:cgw,gh:cgh,fillTextOffsetX:fillTextOffsetX,fillTextOffsetY:fillTextOffsetY,fillTextWidth:fw,fillTextHeight:fh,fontSize:fontSize}};var canFitText=function canFitText(gx,gy,gw,gh,occupied){var i=occupied.length;while(i--){var px=gx+occupied[i][0];var py=gy+occupied[i][1];if(px>=ngx||py>=ngy||px<0||py<0){if(!settings.drawOutOfBound){return false}continue}if(!grid[px][py]){return false}}return true};var drawText=function drawText(gx,gy,info,word,weight,distance,theta,rotateDeg,attributes){var fontSize=info.fontSize;var color;if(getTextColor){color=getTextColor(word,weight,fontSize,distance,theta)}else{color=settings.color}var classes;if(getTextClasses){classes=getTextClasses(word,weight,fontSize,distance,theta)}else{classes=settings.classes}var dimension;var bounds=info.bounds;dimension={x:(gx+bounds[3])*g,y:(gy+bounds[0])*g,w:(bounds[1]-bounds[3]+1)*g,h:(bounds[2]-bounds[0]+1)*g};elements.forEach(function(el){if(el.getContext){var ctx=el.getContext('2d');var mu=info.mu;ctx.save();ctx.scale(1/mu,1/mu);ctx.font=settings.fontWeight+' '+(fontSize*mu).toString(10)+'px '+settings.fontFamily;ctx.fillStyle=color;ctx.translate((gx+info.gw/2)*g*mu,(gy+info.gh/2)*g*mu);if(rotateDeg!==0){ctx.rotate(-rotateDeg)}ctx.textBaseline='middle';ctx.fillText(word,info.fillTextOffsetX*mu,(info.fillTextOffsetY+fontSize*0.5)*mu);ctx.restore()}else{var span=document.createElement('span');var transformRule='';transformRule='rotate('+(-rotateDeg/Math.PI*180)+'deg) ';if(info.mu!==1){transformRule+='translateX(-'+(info.fillTextWidth/4)+'px) scale('+(1/info.mu)+')'}var styleRules={'position':'absolute','display':'block','font':settings.fontWeight+' '+(fontSize*info.mu)+'px '+settings.fontFamily,'left':((gx+info.gw/2)*g+info.fillTextOffsetX)+'px','top':((gy+info.gh/2)*g+info.fillTextOffsetY)+'px','width':info.fillTextWidth+'px','height':info.fillTextHeight+'px','lineHeight':fontSize+'px','whiteSpace':'nowrap','transform':transformRule,'webkitTransform':transformRule,'msTransform':transformRule,'transformOrigin':'50% 40%','webkitTransformOrigin':'50% 40%','msTransformOrigin':'50% 40%'};if(color){styleRules.color=color}span.textContent=word;for(var cssProp in styleRules){span.style[cssProp]=styleRules[cssProp]}if(attributes){for(var attribute in attributes){span.setAttribute(attribute,attributes[attribute])}}if(classes){span.className+=classes}el.appendChild(span)}})};var fillGridAt=function fillGridAt(x,y,drawMask,dimension,item){if(x>=ngx||y>=ngy||x<0||y<0){return}grid[x][y]=false;if(drawMask){var ctx=elements[0].getContext('2d');ctx.fillRect(x*g,y*g,maskRectWidth,maskRectWidth)}if(interactive){infoGrid[x][y]={item:item,dimension:dimension}}};var updateGrid=function updateGrid(gx,gy,gw,gh,info,item){var occupied=info.occupied;var drawMask=settings.drawMask;var ctx;if(drawMask){ctx=elements[0].getContext('2d');ctx.save();ctx.fillStyle=settings.maskColor}var dimension;if(interactive){var bounds=info.bounds;dimension={x:(gx+bounds[3])*g,y:(gy+bounds[0])*g,w:(bounds[1]-bounds[3]+1)*g,h:(bounds[2]-bounds[0]+1)*g}}var i=occupied.length;while(i--){var px=gx+occupied[i][0];var py=gy+occupied[i][1];if(px>=ngx||py>=ngy||px<0||py<0){continue}fillGridAt(px,py,drawMask,dimension,item)}if(drawMask){ctx.restore()}};var putWord=function putWord(item){var word,weight,attributes;if(Array.isArray(item)){word=item[0];weight=item[1]}else{word=item.word;weight=item.weight;attributes=item.attributes}var rotateDeg=getRotateDeg();var info=getTextInfo(word,weight,rotateDeg);if(!info){return false}if(exceedTime()){return false}if(!settings.drawOutOfBound){var bounds=info.bounds;if((bounds[1]-bounds[3]+1)>ngx||(bounds[2]-bounds[0]+1)>ngy){return false}}var r=maxRadius+1;var tryToPutWordAtPoint=function(gxy){var gx=Math.floor(gxy[0]-info.gw/2);var gy=Math.floor(gxy[1]-info.gh/2);var gw=info.gw;var gh=info.gh;if(!canFitText(gx,gy,gw,gh,info.occupied)){return false}drawText(gx,gy,info,word,weight,(maxRadius-r),gxy[2],rotateDeg,attributes);updateGrid(gx,gy,gw,gh,info,item);return{gx:gx,gy:gy,rot:rotateDeg,info:info}};while(r--){var points=getPointsAtRadius(maxRadius-r);if(settings.shuffle){points=[].concat(points);shuffleArray(points)}for(var i=0;i<points.length;i++){var res=tryToPutWordAtPoint(points[i]);if(res){return res}}}return null};var sendEvent=function sendEvent(type,cancelable,detail){if(cancelable){return!elements.some(function(el){var evt=document.createEvent('CustomEvent');evt.initCustomEvent(type,true,cancelable,detail||{});return!el.dispatchEvent(evt)},this)}else{elements.forEach(function(el){var evt=document.createEvent('CustomEvent');evt.initCustomEvent(type,true,cancelable,detail||{});el.dispatchEvent(evt)},this)}};var start=function start(){var canvas=elements[0];if(canvas.getContext){ngx=Math.ceil(canvas.width/g);ngy=Math.ceil(canvas.height/g)}else{var rect=canvas.getBoundingClientRect();ngx=Math.ceil(rect.width/g);ngy=Math.ceil(rect.height/g)}if(!sendEvent('wordcloudstart',true)){return}center=(settings.origin)?[settings.origin[0]/g,settings.origin[1]/g]:[ngx/2,ngy/2];maxRadius=Math.floor(Math.sqrt(ngx*ngx+ngy*ngy));grid=[];var gx,gy,i;if(!canvas.getContext||settings.clearCanvas){elements.forEach(function(el){if(el.getContext){var ctx=el.getContext('2d');ctx.fillStyle=settings.backgroundColor;ctx.clearRect(0,0,ngx*(g+1),ngy*(g+1));ctx.fillRect(0,0,ngx*(g+1),ngy*(g+1))}else{el.textContent='';el.style.backgroundColor=settings.backgroundColor;el.style.position='relative'}});gx=ngx;while(gx--){grid[gx]=[];gy=ngy;while(gy--){grid[gx][gy]=true}}}else{var bctx=document.createElement('canvas').getContext('2d');bctx.fillStyle=settings.backgroundColor;bctx.fillRect(0,0,1,1);var bgPixel=bctx.getImageData(0,0,1,1).data;var imageData=canvas.getContext('2d').getImageData(0,0,ngx*g,ngy*g).data;gx=ngx;var x,y;while(gx--){grid[gx]=[];gy=ngy;while(gy--){y=g;singleGridLoop:while(y--){x=g;while(x--){i=4;while(i--){if(imageData[((gy*g+y)*ngx*g+(gx*g+x))*4+i]!==bgPixel[i]){grid[gx][gy]=false;break singleGridLoop}}}}if(grid[gx][gy]!==false){grid[gx][gy]=true}}}imageData=bctx=bgPixel=undefined}if(settings.hover||settings.click){interactive=true;gx=ngx+1;while(gx--){infoGrid[gx]=[]}if(settings.hover){canvas.addEventListener('mousemove',wordcloudhover)}if(settings.click){canvas.addEventListener('click',wordcloudclick);canvas.addEventListener('touchstart',wordcloudclick);canvas.addEventListener('touchend',function(e){e.preventDefault()});canvas.style.webkitTapHighlightColor='rgba(0, 0, 0, 0)'}canvas.addEventListener('wordcloudstart',function stopInteraction(){canvas.removeEventListener('wordcloudstart',stopInteraction);canvas.removeEventListener('mousemove',wordcloudhover);canvas.removeEventListener('click',wordcloudclick);hovered=undefined})}i=0;var loopingFunction,stoppingFunction;if(settings.wait!==0){loopingFunction=window.setTimeout;stoppingFunction=window.clearTimeout}else{loopingFunction=window.setImmediate;stoppingFunction=window.clearImmediate}var addEventListener=function addEventListener(type,listener){elements.forEach(function(el){el.addEventListener(type,listener)},this)};var removeEventListener=function removeEventListener(type,listener){elements.forEach(function(el){el.removeEventListener(type,listener)},this)};var anotherWordCloudStart=function anotherWordCloudStart(){removeEventListener('wordcloudstart',anotherWordCloudStart);stoppingFunction(timer)};addEventListener('wordcloudstart',anotherWordCloudStart);var timer=loopingFunction(function loop(){if(i>=settings.list.length){stoppingFunction(timer);sendEvent('wordcloudstop',false);removeEventListener('wordcloudstart',anotherWordCloudStart);return}escapeTime=(new Date()).getTime();var drawn=putWord(settings.list[i]);var canceled=!sendEvent('wordclouddrawn',true,{item:settings.list[i],drawn:drawn});if(exceedTime()||canceled){stoppingFunction(timer);settings.abort();sendEvent('wordcloudabort',false);sendEvent('wordcloudstop',false);removeEventListener('wordcloudstart',anotherWordCloudStart);return}i++;timer=loopingFunction(loop,settings.wait)},settings.wait)};start()};WordCloud.isSupported=isSupported;WordCloud.minFontSize=minFontSize;if(true){!(__WEBPACK_AMD_DEFINE_ARRAY__=[],__WEBPACK_AMD_DEFINE_RESULT__=function(){return WordCloud}.apply(exports,__WEBPACK_AMD_DEFINE_ARRAY__),__WEBPACK_AMD_DEFINE_RESULT__!==undefined&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))}else if(typeof module!=='undefined'&&module.exports){module.exports=WordCloud}else{global.WordCloud=WordCloud}})(this)})])});